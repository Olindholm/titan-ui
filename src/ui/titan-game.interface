<?xml version="1.0" encoding="UTF-8"?>
<interface name="game"
	scenex="0%" sceney="0%"
	scenewidth="100%" sceneheight="100%"
	luatable="true"
	onloadlua="Trigger('MiniMapPosition')"
	onshowlua="Set('ui_gameInterfaceLoaded', true, 'bool') Cmd('Trigger movf_interfacegame 1')"
	onhidelua="Cmd('Trigger movf_interfacegame 0')"
>
	<!-- Search for 'UIScript' to find stuff that still needs to be replaced with LUA, also probably search for UICmd -->

	<lua file="/ui/scripts/game_ui_manager.lua" />
	<lua file="/ui/titan-game.lua" />

	<panel name="lod_game_unload_delay" noclick="1" onloadlua="RegisterScript2('Game_Interface', '39') Game:InitializeGameInterface()"/>

	<!-- Custom buttons and boss selection need to be at the top because other interface elements need to overshadow them -->
	<include file="/ui/custom_buttons/custom_buttons.package"/>
	<lua file="/ui/custom_buttons/custom_buttons.lua"/>
	<include file="/ui/bossselection/bossbuff_select.package"/>
	<lua file="/ui/bossselection/bossbuff_select.lua"/>

	<!-- Packages -->
	<include file="/ui/shared_templates_global.package"/>
	<childinterface file="ui_items_1.interface" />
	<include file="movf.package"/>
	<childinterface file="/ui/game_chat.interface" />
	<childinterface file="/ui/game_vote.interface" />
	<childinterface file="/ui/game_mentor.interface" />
	<include file="stash.package"/>
	<childinterface file="/ui/tooltips.interface" />
	<if condition="!cg_newMainInterface">
		<childinterface file="/ui/confirmations.interface" />
	</if>
	<if condition="cg_newMainInterface">
		<include file="/ui/fe2/newui/common_v2.package"/>
		<include file="/ui/fe2/newui/confirmations_v2.package" />
	</if>
	<include file="game_radialmenu.package" />
	<include file="fastshare.package"/>
	<include file="/ui/game_score.package" />

	<!-- MVP Vote -->
	<include file="/ui/mvp_vote.package"/>
	<instance name="mvp_vote" visible="0"/>
	<lua file="/ui/scripts/mvp_vote.lua" />

	<if condition="(releaseStage_dev or releaseStage_test) and !releaseStage_stable and !ui_disableQAChecklist" >
		<panel y="4h" x="0h" width="2.0h" height="2.0h" grow="1" align="right" name="game_qa_mini_button" visible="1" noclick="0" valign="top" passivechildren="1" color="0 0 0 1" onshow=""
			onclicklua="local widg = GetWidget('game_qa_mini_panel_parent', 'game') widg:SetVisible(not widg:IsVisible())"
		>
			<image texture="/ui/icons/tech_support.tga" height="90%" width="90%" align="center" valign="center" />
			<frame color="invisible" borderthickness="1" bordercolor="#074880" visible="1" />
		</panel>
		<childinterface file="/ui/game_qa.interface" />
	</if>

	<!-- Triggers -->
	<trigger name="MiniMapPosition" />
	<trigger name="GameImagePreviewVis"/>
	<trigger name="GameImagePreviewInit"/>
	<trigger name="GameMenuTooltipText"/>
	<trigger name="CourierUpgrade"/>
	<trigger name="ItemTooltip"/>
	<trigger name="scoresFlagState0"/>
	<trigger name="scoresFlagState1"/>

	<trigger name="scoresFlagTime0"/>
	<trigger name="scoresFlagTime1"/>

	<trigger name="DicePrompt" />

	<trigger name="EventDevoHeadshot" />
	<trigger name="EventSoccerGoal" />
	<trigger name="EventMidwarsSuddenDeath" />

	<panel noclick="1" color="invisible"
		onloadlua="Cmd('UnAlias DiceHotkey; Alias DiceHotkey Trigger DicePrompt')"
	/>

	<!-- Templates -->
	<template name="promptReviveButtonOKState">
		<widgetstate statename="{statename}" x="{x}" y="{y}">
			<image texture="{texture=/ui/common/prompt_revive_button_ok.tga}" rendermode="{rendermode=normal}" color="{color=white}"/>
		</widgetstate>
	</template>

	<template name="promptReviveButtonOK">
		<button name="{id}" width="{width=100%}" height="{height=100%}" x="{x}" y="{y}" align="{align}" valign="{valign}" color="invisible" watch="{watch}" ontriggerlua="{ontriggerlua}">
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="up" color="0.9 0.9 0.9"/>
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="over"/>
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="down" color="0.65 0.65 0.65" x="1" y="1"/>
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="disabled" rendermode="grayscale" color="0.75 0.75 0.75"/>
		</button>
	</template>

	<template name="promptReviveButtonCancel">
		<instance name="promptReviveButtonOK" id="{id}" width="{width=100%}" height="{height=100%}" x="{x}" y="{y}" align="{align}" valign="{valign}" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" watch="{watch}" ontriggerlua="{ontriggerlua}"/>
	</template>

	<style name="gameScoreHeaderBarSpace" width="75%" height="18@" y="13@"/>

	<template name="gameScoreHeader">
		<panel name="gameScoreHeader{index}" x="{innerXMod}13.5h" y="1h" height="7.45h" width="14.9h" align="center" noclick="1" passivechildren="true" watch="GameInfo" ontriggerlua="self:SetVisible(param0 ~= 'soccer')">
			<panel y="30%" width="125%" height="175@" align="center">
				<panel width="70%" height="70@" valign="center" y="-16.5@" align="center">
					<modelpanel
						name="gameScoreHeader{flagIndex}Flag"
						model="/ui/elements/ctf/flag/geo_cloth.mdf"
						anim="upIdle"
						depthclear="true"
						cameradistance="70"
						camerapos="7 0 -20"
						depthcompress="true"
						cameranear="1"
						camerafar="5000"
						noclick="true"
					/>
					<label textalign="center" textvalign="center" font="dyn_20" shadow="true" color="white" content="" height="65@"
						watch="scoresFlagTime{flagIndex}"
						ontriggerlua="
							local time = ((tonumber(param0) * 1000) + tonumber(GetTrigger('GameTime'):GetLastValue()))
							self:RegisterWatch('GameTime', function(self, gameTime)
								gameTime = tonumber(gameTime)
								local timeDiff = time - gameTime

								if (0 >= timeDiff) then
									self:SetText('')
									self:UnregisterWatch('GameTime')
								else
									self:SetText(':'..math.ceil(timeDiff / 1000, 0)..'s')
								end
							end)
						"
					/>
				</panel>

			</panel>
			<panel style="gameScoreHeaderBarSpace" align="{innerAlign}" x="{innerXMod}16%" color="{bgColor}">
				<panel name="gameScoreHeader{index}Bar" align="{innerAlign}" color="{barColor=lime}">
					<panel color="#8e874d" rendermode="additive" width="2" align="{outerAlign}" x="{innerXMod}1"/>
				</panel>
			</panel>
			<panel texture="/ui/common/scores_frame_gloss.tga" hflip="{hflip=false}" width="100%" height="50@"/>
			<panel texture="/ui/common/scores_frame.tga" hflip="{hflip=false}" width="100%" height="50@"/>
			<panel style="gameScoreHeaderBarSpace" align="{innerAlign}" x="{innerXMod}16%">
				<label name="gameScoreHeader{index}Label" textalign="center" textvalign="center" font="dyn_12" y="-6%" color="white" outline="true" content="----/----"/>
			</panel>
		</panel>
	</template>

	<template name="kick_button">
		<button
			x="{x=}" y="{y=}" width="{width=100%}" height="{height=100%}" align="{align=}" valign="{valign=}"
			group="{group}"
			name="{button_name}"
			color="invisible"
			visible="{visible=true}"
			watch="{watch=}"
			enabled="{enabled=true}"
			ontrigger="{ontrigger=}"
			ontriggerlua="{ontriggerlua=}"
			watch1="{watch1=}"
			ontrigger1="{ontrigger1=}"
			ontrigger1lua="{ontrigger1lua=}"
			watch2="{watch2=}"
			ontrigger2="{ontrigger2=}"
			ontrigger2lua="{ontrigger2lua=}"
			onmouseover="{onmouseover}"
			onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav') PlaySound('/shared/sounds/ui/ccpanel/button_over_01.wav') {onmouseoverlua}"
			onmouseout="{onmouseout}"
			onclick="{onclick}"
			onclicklua="PlaySound('{sound=/shared/sounds/ui/ccpanel/button_click_02.wav}') {onclicklua}"
			onenter="{onenter}"
			onenterlua="PlaySound('{sound='/shared/sounds/ui/ccpanel/button_click_02.wav}') {onenterlua}"
			onshow="{onshow}"
			onhide="{onhide}"
			onhidelua="{onhidelua}"
			hotkey="{hotkey}"
			onhotkey="{onhotkey}"
			onhotkeylua="PlaySound('{sound=/shared/sounds/ui/ccpanel/button_click_02.wav}') {onhotkeylua}"
			interactive="{interactive=true}"
			onevent="{onevent=}"
		>
			<widgetstate statename="up">
				<image texture="/ui/elements/kick_up.tga"/>
			</widgetstate>

			<widgetstate statename="over">
				<image texture="/ui/elements/kick_over.tga"/>
			</widgetstate>

			<widgetstate statename="down" x="1" y="1">
				<image texture="/ui/elements/kick_down.tga"/>
			</widgetstate>
			<widgetstate statename="disabled">
				<image texture="/ui/elements/kick_disabled.tga"/>
			</widgetstate>
		</button>
	</template>

	<template name="kick_player_item">
		<panel width="100%" height="1.75h"
			name="kick_player_item_{index}"
			visible="false"
			sticky="true" stickytoinvis="false"
		>
			<label font="dyn_9" color="white" textvalign="center" shadow="true" noclick="true" watch="MenuPlayerInfo{index}" ontriggerlua="self:SetColor(param1) self:SetText(param2);"/>
			<instance name="kick_button" button_name="kick_player_item_{index}_button" width="100@" height="100%" align="right" watch1="VotePermissions" ontrigger1lua="self:SetEnabled((not AtoB(param0)) and (not AtoB(param1)) and AtoB(param8))"/>
			<label align="right" width="3h" font="dyn_9" color="white" textalign="right" textvalign="center" shadow="true" noclick="true" visible="false" content="0"
				watch="MenuPlayerInfo{index}"
				ontriggerlua="
					local timeUntilKickAllowed = tonumber(param17)
					if timeUntilKickAllowed ~= nil and timeUntilKickAllowed > 0 then
						self:SetText(math.ceil(timeUntilKickAllowed / 1000.0))
						self:SetVisible(1)
					end
				"
			/>
		</panel>
	</template>

	<template name="killBoardEntry">
		<panel noclick="true" height="3.5h" visible="0"
			name="killBoardEntry{id}"
			onevent0lua="
				GetWidget('killBoardNameA{id}', 'game'):DoEventN(0)
				GetWidget('killBoardIconA{id}', 'game'):Sleep(50, function() self:DoEventN(0) end)
				GetWidget('killBoardSkull{id}', 'game'):Sleep(100, function() self:DoEventN(0) end)
				GetWidget('killBoardIconB{id}', 'game'):Sleep(150, function() self:DoEventN(0) end)
				GetWidget('killBoardNameB{id}', 'game'):Sleep(200, function() self:DoEventN(0) end)
				self:SetVisible(1)
			"
			onhidelua="
				GetWidget('killBoardNameA{id}', 'game'):SetVisible(0)
				GetWidget('killBoardIconA{id}', 'game'):SetVisible(0)
				GetWidget('killBoardSkull{id}', 'game'):SetVisible(0)
				GetWidget('killBoardIconB{id}', 'game'):SetVisible(0)
				GetWidget('killBoardNameB{id}', 'game'):SetVisible(0)
			"
		>
			<panel noclick="true" height="-0.25h" float="right" padding="0.5h" grow="true" align="center">
				<panel noclick="true" width="20h">
					<label noclick="true" textvalign="center" shadow="true" font="dyn_11" textalign="right" width="-120@" visible="false" name="killBoardNameA{id}" onevent0lua="self:FadeIn(250)"/>
					<panel noclick="true" height="100%" width="100@" align="right" name="killBoardIconA{id}" visible="false" onevent0lua="self:FadeIn(250)">
						<image name="killBoardHeroIconA{id}" noclick="true"/>
						<frame name="killBoardTeamA{id}" color="invisible" borderthickness="1" noclick="true" />
					</panel>
				</panel>
				<panel noclick="true" width="100@" align="center">
					<panel width="70%" height="70%" align="center" valign="center">
						<image noclick="true" width="300@" height="300%" valign="center" align="center" texture="/shared/effects/textures/ping_death.tga" rendermode="additive" name="killBoardSkull{id}" visible="false"
							onevent0lua="
								self:SetVisible(0) self:SetWidth('400%') self:SetHeight('400%') self:FadeIn(200) self:ScaleWidth('70%', 250) self:ScaleHeight('70%', 250) self:Sleep(250, function() self:DoEventN(1) end)
							"
							onevent1lua="
								self:ScaleWidth('100%', 100) self:ScaleHeight('100%', 100)
							"
						/>
					</panel>

					<!--<image noclick="true" width="100@" height="100%" align="center" texture="/ui/elements/stat_icons/total_kills.tga"/>-->
				</panel>
				<panel noclick="true" width="20h">
					<panel noclick="true" height="100%" width="100@" name="killBoardIconB{id}" visible="false" onevent0lua="self:FadeIn(250)">
						<image name="killBoardHeroIconB{id}" noclick="true" />
						<frame name="killBoardTeamB{id}" color="invisible" borderthickness="1" noclick="true" />
					</panel>
					<label noclick="true" textvalign="center" shadow="true" font="dyn_11" visible="false" onevent0lua="self:FadeIn(250)" width="-120@" x="120@" name="killBoardNameB{id}"/>
				</panel>
			</panel>
		</panel>
	</template>

	<template name="multi_select_unit">
		<panel width="4.0h" watch="SelectedVisible{index}" ontriggerlua="self:SetVisible(AtoB(param))">
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="3" watch="SelectedColor{index}" ontriggerlua="self:SetBorderColor(param)"/>
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="3" color="0 0 0 .9"/>
			<frame texture="/ui/frames/roundframe.tga" watch="SelectedColor{index}" ontriggerlua="self:SetBorderColor(param)" borderthickness="3"/>

			<panel align="center" valign="center" width="85%" height="85%" float="bottom" padding="1%" color="invisible">
				<panel align="center" height="85@" width="85%" color="invisible" >
					<image
						watch="SelectedIcon{index}"
						ontriggerlua="self:SetTexture(param)"
						watch0="SelectedIllusion{index}"
						ontrigger0lua="	if (AtoB(param)) then
											self:SetRenderMode('grayscale')
											self:SetColor('0.35 1.3 0.35')
										else
											self:SetRenderMode('normal')
											self:SetColor('white')
										end"
					/>
				</panel>
				<panel height="7%" width="85%" color="black" watch="SelectedHealth{index}" ontriggerlua="self:SetVisible(tonumber(param1) > 0)">
					<!--
					<panel watch="SelectedHealth{index}" ontrigger="SetColor(Saturate(1 - (param2 - 0.50) / 0.50), (param2 + (((param2 - 0.05) / 1.0)*0.2)) / 0.45, 0, 1); ScaleWidth(FtoP(param2), 500);" color="0 1 0 0" noclick="1">
						<panel color="0 0 0 .5"/>
					</panel>
					-->
					<panel watch="SelectedHealth{index}" ontriggerlua="self:SetWidth(FtoP(param2)) self:SetColor(Saturate(1 - (tonumber(param2) - 0.50) / 0.50), (tonumber(param2) + (((tonumber(param2) - 0.05) / 1.0) * 0.2)) / 0.45, 0, 1)" color="0 1 0 0" noclick="1">
						<panel color="1 1 1 .1" align="right" width=".1h" rendermode="additive"/>
					</panel>
				</panel>
				<panel height="7%" width="85%" color="black" watch="SelectedMana{index}" ontriggerlua="self:SetVisible(tonumber(param1) > 0)">
					<!--
					<panel color="0 0.2 1 .8" watch="SelectedMana{index}"  ontrigger="ScaleWidth(FtoP(param2), 500, -1);"/>
					-->
					<panel color="0 0.4 1 1" watch="SelectedMana{index}"  ontriggerlua="self:SetWidth(FtoP(param2))"/>
				</panel>
			</panel>

			<image
				texture="/ui/info/drop.tga"
				rendermode="additive"
				color="white"
				watch="SelectedActive{index}"
				ontriggerlua="self:SetVisible(AtoB(param))"
			/>
			<!-- UIScript -->
			<button
				color="invisible"
				onclick="If(GetModifier1(), DeselectUnit({index}), SetControlUnit({index}));"
				onrightclick="DeselectUnit({index});"
				onmouseoverlua="GetWidget('unit_tooltip_info{index}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('unit_tooltip_info{index}', 'game'):SetVisible(0)"
				interactive="false"
			/>
		</panel>
	</template>

	<template name="command_tooltip">
		<floater name="command_tooltip{slot}" width="20h" x="0" y="0.8h" align="center" valign="bottom" grow="true" color="invisible" visible="false" group="tooltip_group">
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .88"/>
			<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" bordercolor="#434d50"/>
			<panel grow="true" regrow="true" growinvis="false" y="0.8h" width="-1.2h" align="center" float="bottom" padding="0.5h">
				<panel width="100%" height="3.6h">
					<panel float="right" sticky="true" stickytoinvisible="false" padding="0.5h">
						<!-- Icon -->
						<panel width="100@" height="100%">
							<image texture="{texture}" />
							<frame color="invisible" borderthickness="1" bordercolor=".3 .3 .3 1"/>
						</panel>
						<!-- Name / Lvl -->
						<panel width="-120@" height="100%" float="bottom" padding="0">
							<label fity="true" font="dyn_12" color="#ffab01" shadow="true" content="{header}" />
						</panel>
					</panel>
					<!-- Shortcut -->
					<panel x="0" y="-0.2h" grow="true" regrow="true" height="2.0h" align="right" visible="1" >
						<frame texture="/ui/frames/key.tga" width="100%" height="100%" borderthickness="33@" />
						<label y="-1" fitx="true" fitxpadding="0.7h" font="dyn_10" textalign="center" textvalign="center" color=".1 .1 .1 1" shadow="true" shadowcolor=".8 .8 .8 1"
							onshow="SetText(GetKeybindButton('game', '{command}', ''));"

						/>
					</panel>
				</panel>
				<panel width="100%" height="0.2h">
					<panel width="100%" height="1" valign="bottom" color=".2 .2 .2 1" />
				</panel>
				<panel grow="true" regrow="true" width="100%">
					<label fity="true" font="dyn_10" wrap="true" color="1 1 1 1" shadow="true" content="{description}" />
				</panel>
				<panel height="0.3h" width="100%"/>
			</panel>
		</floater>
	</template>

	<template name="command_button">
		<panel>
			<image texture="{texture}" rendermode="{rendermode=normal}" watch="{trigger}" ontriggerlua="if (AtoB(param)) then self:SetRenderMode('normal') else self:SetRenderMode('grayscale') end"/>
			<panel>
				<button
					texture="/ui/elements/button_bevel.tga"
					onclicklua="PlaySound('/shared/sounds/ui/button_click_04.wav') {onclicklua}"
					onclick="{onclick}"
					onrightclick="SecondaryAction({slot});"
					onmouseoverlua="GetWidget('command_tooltip{slot}', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('command_tooltip{slot}', 'game'):SetVisible(0)"
					interactive="false"
					enabled="{enabled=true}"
					watch="{trigger}"
					ontriggerlua="self:SetEnabled(AtoB(param))"
				/>
			</panel>
		</panel>
	</template>

	<!-- ability frame templates-->
	<template name="ability_frame_shared">
		<!-- SINGLE-->
		<panel
			width="4.0h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryExists{slot}"
			ontriggerlua="self:SetVisible(AtoB(param))"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<panel x="0" y="0" align="center" valign="center" height="4.0h" width="4.0h" >
				<instance name="shared_ability_button" slot="{slot}"/>
			</panel>
			<image width="7.0h" height="7.0h" align="center" valign="center" texture="/ui/common/ability_frame.tga" noclick="1" />
		</panel>
	</template>

	<!-- ability frame templates-->
	<template name="ability_frame_multi_slots">
		<!-- SINGLE, used for the multiabilities feature-->
		<panel
			width="6.6h"
			height="100%"
			valign="center"
			color="invisible"
			sticky="true"
			stickytoinvis="false"
			visible="true"
			noclick="1"
		>
			<panel x="0" y="0" align="center" valign="center" height="5.5h" width="5.5h">
				<instance name="ability_button" slot="{slot}"/>
			</panel>
			<image width="9.0h" height="9.0h" align="center" valign="center" texture="/ui/common/ability_frame.tga" noclick="1" />
		</panel>
	</template>

	<template name="ability_frame_single_devowars">
		<!-- HyperXewl-1 -->
		<panel
			width="7.0h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
			x="{x}"
		>
			<panel x="0" y="0" align="center" valign="center" height="4.2h" width="4.2h">
				<instance name="ability_button" slot="{slot}"/>
			</panel>
			<image width="7h" height="6.9h" align="center" valign="center" texture="/ui/common/ability_frame_devowars.tga" noclick="1" />
			<!-- mana cost -->
			<!-- Removed -->
			<frame width="5.0h" height="5.0h" align="center" valign="center" color="invisible" bordercolor="#00FF00" borderthickness="0.1h" visible="false" watch="HeroLevelupMode" ontriggerlua="self:SetVisible(AtoB(param))" noclick="true"/>
		</panel>
	</template>

	<template name="abilities_frame_soccerattribute">
		<!-- SINGLE-->
		<panel name="ability_frame_soccerattribute"
			width="{width}"
			height="{height}"
			x="{x}"
			y="{y}"
			align="{align}"
			valign="{valign}"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<panel x="0" y="0" align="center" valign="center" height="5.2h" width="5.2h">
				<instance name="ability_button" slot="{slot}"/>
			</panel>
			<frame width="5.5h" height="5.5h" align="center" valign="center" color="invisible" bordercolor="#00FF00" borderthickness="0.1h" visible="false" watch="HeroLevelupMode" ontriggerlua="self:SetVisible(AtoB(param))" noclick="true"/>
			<frame
				color="1 1 1 0.01"
				rendermode="additive"
				visible="true"
				noclick="true"
				width="5.5h" height="5.5h"
				align="center" valign="center"
			>
				<image noclick="true" color="0.7 0.7 0.7 0.4" texture="/ui/elements/button_bevel_disabled.tga" rendermode="additive"/>
			</frame>
		</panel>
	</template>

	<template name="ability_frame_single">
		<!-- SINGLE-->
		<panel
			width="7.0h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single' or param == 'single_boosted')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<!-- Main button -->
			<panel x="0" y="0" align="center" valign="center" height="5.5h" width="5.5h">
				<instance name="ability_button" slot="{slot}"/>
			</panel>

			<!-- Texture Around Button -->
			<image
				width="9.0h"
				height="9.0h"
				align="center"
				valign="center"
				texture="/ui/common/ability_frame.tga"
				noclick="1"
				watch="ActiveInventoryInterface{slot}"
				ontriggerlua=
				"
				if param == 'single_boosted' then
					self:SetTexture('/ui/common/ability_frame_boosted.tga')
				else
					self:SetTexture('/ui/common/ability_frame.tga')
				end
				"
			/>

			<!-- SOTM Effects -->
			<frame
				color="invisible"
				visible="1"
				watch="ActiveInventoryInterface{slot}"
				ontriggerlua="self:SetVisible(param == 'single_boosted')"
				noclick="true"
				passivechildren="true"
			>
				<modelpanel
					name="sotm_modelpanel"
					visible="1"
					noclick="true"
					model="/core/null/invis.mdf"
					modelangles="0 0 0"

					width="150%"
					height="150%"

					anim="idle"
					effect="/shared/effects/boosted.effect"

					camerapos="0 -950 00"
					cameraangles="0 0 0"
					camerafov="35"
					cameranear="1"
					carmerafar="100"

					modelpos="0 50 0"
					ortho="false"
					lookat="0"

					depthclear="false"
					depthcompress="true"
					onshow="SetAnim('idle'); SetEffect('/shared/effects/boosted.effect');"
					valign="center"
					align="center"
				/>
			</frame>

			<!-- Mana Cost -->
			<panel x="0" y="6.8h" align="center" height="5.5h" width="5.5h" color="invisible" noclick="1" >
				<image width="8.9h" align="center" valign="bottom" texture="/ui/common/mana_frame.tga" noclick="1" />
				<label y="0.2h" fity="1" font="dyn_10" color="white" outline="1" textalign="center"
					watch="ActiveInventoryDescription{slot}"
					ontriggerlua="if (tonumber(param2) and (tonumber(param2) > 0.0)) then self:SetColor('white') self:SetText(round(param2)) else self:SetText('-') self:SetColor('gray') end Game.manaCost{slot} = tonumber(param2)"
					watch2="ActiveInventoryExists{slot}"
					ontrigger2lua="if (not AtoB(param)) then self:SetText('-') self:SetColor('gray') elseif ((Game.manaCost{slot} ~= nil) and (Game.manaCost{slot} > 0.0)) then self:SetColor('white') self:SetText(round(Game.manaCost{slot})) end"
					onshowlua="
						local widget = self
						widget:SetColor('white')
						local f = function(_, mana)
							if ((tonumber(widget:GetValue()) ~= nil) and (tonumber(mana) >= tonumber(widget:GetValue()))) then
								widget:SetColor('white')
							else
								widget:SetColor('gray')
							end
						end
						self:RegisterWatch('ActiveMana', f)
					"
					onhidelua="self:UnregisterWatch('ActiveMana')"
					canclick="false"
					/><!-- No canclick in case we add tooltips -->
			</panel>
			<frame width="5.5h" height="5.5h" align="center" valign="center" color="invisible" bordercolor="#00FF00" borderthickness="0.1h" visible="false" watch="HeroLevelupMode" ontriggerlua="self:SetVisible(AtoB(param))" noclick="true"/>
		</panel>
	</template>

	<template name="ability_frame_single_plus_one">
		<!-- SINGLE plus ONE-->
		<panel
			width="10.5h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single_plus_one' or param == 'single_plus_one_boosted')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
		>
			<panel y="0.8h" noclick="1">
				<!-- Button 1 -->
				<panel x="1.5h" y="1.1h" height="4.25h" width="4.25h" noclick="1">
					<instance name="ability_button" slot="{slot_a}"/>
				</panel>

				<!-- Button 2 -->
				<panel x="6.4h" y="2.85h" height="2.5h" width="2.5h" noclick="1">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<!-- Texture Around Button -->
				<image width="14.9h" height="7.45h" texture="/ui/common/ability_frame_1.tga" noclick="1" />
			</panel>

			<!-- SOTM Effect 1 -->
			<!--
			<frame
				y="0.8h"
				color="invisible"
				visible="1"
				watch="ActiveInventoryInterface{slot}"
				ontriggerlua="self:SetVisible(param == 'single_plus_one_boosted')"
				noclick="true"
				passivechildren="true"
			>
				<modelpanel
					name="sotm_modelpanel"
					visible="1"
					noclick="true"
					model="/core/null/invis.mdf"
					modelangles="0 0 0"

					width="150%"
					height="150%"

					anim="idle"
					effect="/shared/effects/boosted.effect"

					camerapos="0 -950 00"
					cameraangles="0 0 0"
					camerafov="35"
					cameranear="1"
					carmerafar="100"

					modelpos="0 50 0"
					ortho="false"
					lookat="0"

					depthclear="false"
					depthcompress="true"
					onshow="SetAnim('idle'); SetEffect('/shared/effects/boosted.effect');"
					valign="center"
					align="center"
				/>
			</frame>
			-->

			<!-- Mana Cost -->
			<panel x="0" y="6.2h" align="center" height="4.9h" width="5.5h" color="invisible" noclick="1">
				<image x="2.2h" width="14.9h" align="center" valign="bottom" texture="/ui/common/mana_frame2.tga" noclick="1"/>
				<panel y="0.3h" x="0.3h" float="right" padding="0.6h" noclick="1">
					<label width="50%" font="dyn_10" color="white" outline="1" textalign="center" noclick="1"
						watch="ActiveInventoryDescription{slot_a}"
						ontriggerlua="if (tonumber(param2) and (tonumber(param2) > 0.0)) then self:SetColor('white') self:SetText(round(param2)) else self:SetText('-') self:SetColor('gray') end Game.manaCost{slot_a} = tonumber(param2)"
						watch2="ActiveInventoryExists{slot_a}"
						ontrigger2lua="if (not AtoB(param)) then self:SetText('-') self:SetColor('gray') elseif ((Game.manaCost{slot_a} ~= nil) and (Game.manaCost{slot_a} > 0.0)) then self:SetColor('white') self:SetText(round(Game.manaCost{slot_a})) end"
						onshowlua="
							local widget = self
							widget:SetColor('white')
							local f = function(_, mana)
								if ((tonumber(widget:GetValue()) ~= nil) and (tonumber(mana) >= tonumber(widget:GetValue()))) then
									widget:SetColor('white')
								else
									widget:SetColor('gray')
								end
							end
							self:RegisterWatch('ActiveMana', f)
						"
						onhidelua="self:UnregisterWatch('ActiveMana')"
					/>
					<label width="50%" font="dyn_10" color="white" outline="1" textalign="center" noclick="1"
						watch="ActiveInventoryDescription{slot_b}"
						ontriggerlua="if (tonumber(param2) and (tonumber(param2) > 0.0)) then self:SetColor('white') self:SetText(round(param2)) else self:SetText('-') self:SetColor('gray') end Game.manaCost{slot_b} = tonumber(param2)"
						watch2="ActiveInventoryExists{slot_b}"
						ontrigger2lua="if (not AtoB(param)) then self:SetText('-') self:SetColor('gray') elseif ((Game.manaCost{slot_b} ~= nil) and (Game.manaCost{slot_b} > 0.0)) then self:SetColor('white') self:SetText(round(Game.manaCost{slot_b})) end"
						onshowlua="
							local widget = self
							widget:SetColor('white')
							local f = function(_, mana)
								if ((tonumber(widget:GetValue()) ~= nil) and (tonumber(mana) >= tonumber(widget:GetValue()))) then
									widget:SetColor('white')
								else
									widget:SetColor('gray')
								end
							end
							self:RegisterWatch('ActiveMana', f)
						"
						onhidelua="self:UnregisterWatch('ActiveMana')"
					/>
				</panel>
			</panel>
		</panel>
	</template>

	<template name="ability_frame_double">
		<!-- double-->
		<panel
			width="7h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'double')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
		>
			<panel y="1.7h">
				<panel x="0.5h" y="1.0h" height="3.00h" width="3.00h" >
					<instance name="ability_button_small" slot="{slot_a}"/>
				</panel>

				<panel x="3.5h" y="1.0h" height="3.00h" width="3.00h">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>
			<!--	<image x="0h" y="0.5h" width="3.75h" height="3.75h" texture="/ui/common/ability_frame.tga" noclick="1" />
				<image x="3.25h" y="0.5h" width="3.75h" height="3.75h" texture="/ui/common/ability_frame.tga" noclick="1" /> -->

			</panel>
			<!-- mana cost -->
			<panel x="0" y="5.6h" align="center" height="9.0h" width="5.5h" color="invisible" noclick="1">
				<image width="7.8h" align="center" valign="bottom" texture="/ui/common/mana_frame3.tga" noclick="1" visible="1"/>
				<panel y="0.2h" float="right" noclick="1">
					<label width="50%" font="dyn_10" color="white" outline="1" textalign="center" noclick="1"
						watch="ActiveInventoryDescription{slot_a}"
						ontriggerlua="if (tonumber(param2) and (tonumber(param2) > 0.0)) then self:SetColor('white') self:SetText(round(param2)) else self:SetText('-') self:SetColor('gray') end Game.manaCost{slot_a} = tonumber(param2)"
						watch2="ActiveInventoryExists{slot_a}"
						ontrigger2lua="if (not AtoB(param)) then self:SetText('-') self:SetColor('gray') elseif ((Game.manaCost{slot_a} ~= nil) and (Game.manaCost{slot_a} > 0.0)) then self:SetColor('white') self:SetText(round(Game.manaCost{slot_a})) end"
						onshowlua="
							local widget = self
							widget:SetColor('white')
							local f = function(_, mana)
								if ((tonumber(widget:GetValue()) ~= nil) and (tonumber(mana) >= tonumber(widget:GetValue()))) then
									widget:SetColor('white')
								else
									widget:SetColor('gray')
								end
							end
							self:RegisterWatch('ActiveMana', f)
						"
						onhidelua="self:UnregisterWatch('ActiveMana')"
					/>
					<label width="50%" font="dyn_10" color="white" outline="1" textalign="center" noclick="1"
						watch="ActiveInventoryDescription{slot_b}"
						ontriggerlua="if (tonumber(param2) and (tonumber(param2) > 0.0)) then self:SetColor('white') self:SetText(round(param2)) else self:SetText('-') self:SetColor('gray') end Game.manaCost{slot_b} = tonumber(param2)"
						watch2="ActiveInventoryExists{slot_b}"
						ontrigger2lua="if (not AtoB(param)) then self:SetText('-') self:SetColor('gray') elseif ((Game.manaCost{slot_b} ~= nil) and (Game.manaCost{slot_b} > 0.0)) then self:SetColor('white') self:SetText(round(Game.manaCost{slot_b})) end"
						onshowlua="
							local widget = self
							widget:SetColor('white')
							local f = function(_, mana)
								if ((tonumber(widget:GetValue()) ~= nil) and (tonumber(mana) >= tonumber(widget:GetValue()))) then
									widget:SetColor('white')
								else
									widget:SetColor('gray')
								end
							end
							self:RegisterWatch('ActiveMana', f)
						"
						onhidelua="self:UnregisterWatch('ActiveMana')"
					/>
				</panel>
			</panel>
		</panel>
	</template>

	<template name="ability_frame_single_plus_two">
		<!-- SINGLE plus TWO-->
		<panel
			width="7h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single_plus_two')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<panel y="1.7h" noclick="1">
				<panel align="center" x="0" y="-.13h" height="3.5h" width="3.5h" noclick="1">
					<instance name="ability_button" slot="{slot_a}"/>
				</panel>

				<panel x="1.7h" y="3.44h" height="1.9h" width="1.9h" noclick="1">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<panel x="3.62h" y="3.44h" height="1.9h" width="1.9h" noclick="1">
					<instance name="ability_button_small" slot="{slot_c}"/>
				</panel>
				<image height="14h" width="7h" y="-4.5h" texture="/ui/common/ability_frame_2.tga" noclick="1" />
			</panel>

			<!-- I DONT HAVE A MANA COST THING BECAUSE I AM NEVER USED LOLWUT -->
		</panel>
	</template>

	<template name="ability_frame_triple">
		<!-- Triple-->
		<panel
			width="7h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'triple')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
		>
			<panel y="1.7h">
				<panel x="0" y="-.265h" height="2.5h" width="2.5h" align="center">
					<instance name="ability_button_small" slot="{slot_a}"/>
				</panel>

				<panel x=".63h" y="2.6h" height="2.4h" width="2.4h">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<panel x="4.0h" y="2.6h" height="2.4h" width="2.4h">
					<instance name="ability_button_small" slot="{slot_c}"/>
				</panel>
				<image align="center" y="-1.5h" height="8h" width="8h" texture="/ui/common/ability_frame_3.tga" noclick="1" />
			</panel>
			<panel x="0" y="6.8h" align="center" height="5.5h" width="5.5h" color="invisible" noclick="1" watch="ActiveInventoryDescription{slot}" ontriggerlua="self:SetVisible(tonumber(param2) > 0.0)">
				<image width="9.4h" align="center" valign="bottom" texture="/ui/common/mana_frame.tga" noclick="1" />
				<label y="0.2h" fity="1" font="dyn_10" color="white" outline="1" textalign="center"
					watch="ActiveInventoryDescription{slot}"
					ontriggerlua="if (tonumber(param2) and (tonumber(param2) > 0.0)) then self:SetColor('white') self:SetText(round(param2)) else self:SetText('-') self:SetColor('gray') end Game.manaCost{slot} = tonumber(param2)"
					watch2="ActiveInventoryExists{slot}"
					ontrigger2lua="if (not AtoB(param)) then self:SetText('-') self:SetColor('gray') elseif ((Game.manaCost{slot} ~= nil) and (Game.manaCost{slot} > 0.0)) then self:SetColor('white') self:SetText(round(Game.manaCost{slot})) end"
					onshowlua="
						local widget = self
						widget:SetColor('white')
						local f = function(_, mana)
							if ((tonumber(widget:GetValue()) ~= nil) and (tonumber(mana) >= tonumber(widget:GetValue()))) then
								widget:SetColor('white')
							else
								widget:SetColor('gray')
							end
						end
						self:RegisterWatch('ActiveMana', f)
					"
					onhidelua="self:UnregisterWatch('ActiveMana')"
					/>
			</panel>
		</panel>
	</template>

	<template name="ability_button">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<image texture="/ui/legion/ability_coverup.tga"/>
			</panel>
			<!-- UIScript -->
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param))"
				onclicklua="
					if Input.IsAltDown() then
						SendGamePing('alt_ability', {slot})
					else
						self:UICmd('PrimaryAction({slot});')
					end
					"
				onrightclick="SecondaryAction({slot});"
				onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
				onmouseoutlua="
					if (GetCvarBool('cg_useLongTooltips')) then
						GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
					else
						GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
					end
					if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
				watch2="EventActiveInventoryUpgrade{slot}"
				ontrigger2="If(IsVisible(), Call('effect_panel', 'StartEffect(\'/ui/common/models/choose/choose.effect\', ' # GetAbsoluteFractionX(0.5) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(0.5) / GetScreenHeight() # ', \'1 1 1 1\');'));"
			>

				<!-- Icon -->
				<image noclick="true" onloadlua="Game:RegisterAbilityIcon(self, {slot})" />

				<piegraph
					start="270"
					end="-90"
					square="true"
					color="#000000cc"
					noclick="true"
					onloadlua="Game:RegisterAbilityPie(self, {slot})"
				/>

				<!-- Timer -->
				<label
					y="0.2h"
					width="100%"
					height="100%"
					textvalign="top"
					textalign="center"
					color="white"
					shadow="true"
					font="dyn_12"
					noclick="true"
					onloadlua="Game:RegisterAbilityTimer(self, {slot})"
				/>
				<!-- UIScript -->
				<panel
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="
						if ((tonumber(param5) > 0) or (tonumber(param7) == 0)) then
							self:SetVisible(1)
							self:SetColor('white')
						else
							self:SetVisible(0)
							self:SetColor('invisible')
						end"
					onclicklua="
						if Input.IsAltDown() then
							SendGamePing('alt_ability', {slot})
						else
							self:UICmd('PrimaryAction({slot});')
						end
						"
				/>
				<!-- UIScript -->
				<button
					texture="/ui/common/button_gloss.tga"
					rendermode="additive"
					onclicklua="
						if Input.IsAltDown() then
							SendGamePing('alt_ability', {slot})
						else
							self:UICmd('PrimaryAction({slot}); ActivateTool({slot});')
							PlaySound('/shared/sounds/ui/ability_select.wav')
						end
						"
					onrightclicklua="PlaySound('/shared/sounds/ui/ability_select.wav')"
					onrightclick="SecondaryAction({slot}); ActivateToolSecondary({slot});"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					watch="ActiveInventoryCanActivate{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1lua="
						if ((tonumber(param5) > 0) or (tonumber(param7) == 0)) then
							self:SetEnabled(1)
							self:SetColor('#cccccc')
						else
							self:SetEnabled(0)
							self:SetColor('invisible')
						end"
					interactive="false"
				/>

				<image
					texture="$white"
					rendermode="overlay"
					noclick="true"
					onloadlua="Game:RegisterAbilityOverlay(self, {slot})"
				/>

				<!--  silenced intentory section... can move or add a timer later -->
				<image align="center" valign="center" width="90%" height="90%" texture="elements/silence.tga" watch="Silenced" ontriggerlua="self:SetVisible(AtoB(param))" color="1 1 1 1" noclick="1" visible="0"/>

				<panel
					width="38.5%"
					height="38.5%"
					align="right"
					valign="bottom"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_8" watch="ActiveInventoryCharges{slot}" ontriggerlua="self:SetText(param)"/>
				</panel>

				<!-- Refresh effect -->
				<!-- UIScript -->
				<modelpanel
					visible="0"
					noclick="true"
					model="common/models/refresh/refresh.mdf"
					anim="idle"
					effect="common/models/refresh/refresh.effect"
					camerapos="0 1 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					carmerafar="100"
					depthclear="false"
					depthcompress="true"
					watch="EventActiveInventoryReady{slot}"
					ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
					ontriggerlua="if param0 ~= 'true' then PlaySound('/shared/sounds/ui/ability_refresh.wav') end"
				/>

				<!-- Targeting -->
				<frame
					borderthickness="4"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param8))"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>

					<modelpanel
						noclick="true"
						model="effects/portrait_lvlup/portrait_emitter.mdf"
						anim="idle"
						effect="effects/portrait_lvlup/ability_active.effect"
						camerapos="-1 10 0"
						cameraangles="0 0 180"
						camerafov="60"
						depthclear="false"
						depthcompress="true"
						onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
					/>
				</frame>

				<!-- Toggle active -->
				<frame
					borderthickness="2"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param1))"
					noclick="true"
					passivechildren="true"
				>
					<!--<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>-->
					<modelpanel
						visible="1"
						noclick="true"
						model="common/models/toggle/toggle.mdf"
						anim="idle"
						effect="common/models/toggle/toggle.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
					/>
				</frame>

				<!-- Activating -->
				<frame
					borderthickness="2"
					bordercolor="yellow"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param4))"
					noclick="true"
					passivechildren="true"
				>
					<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>

				<label noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" outline="1" font="dyn_12"
					onloadlua="Game:RegisterAbilityCooldown(self, {slot})"
				/>
			</panel>
		</panel>
	</template>

	<template name="shared_ability_button">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<image texture="/ui/legion/ability_coverup.tga"/>
			</panel>
			<!-- UIScript -->
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param))"
				onmouseoverlua="GetWidget('ability_levelup_tooltip_shared{slot}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('ability_levelup_tooltip_shared{slot}', 'game'):SetVisible(0)"
				watch2="EventActiveInventoryUpgrade{slot}"
				ontrigger2="If(IsVisible(), Call('effect_panel', 'StartEffect(\'/ui/common/models/choose/choose.effect\', ' # GetAbsoluteFractionX(0.5) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(0.5) / GetScreenHeight() # ', \'1 1 1 1\');'));"
			>
				<image
					watch="ActiveInventoryIcon{slot}"
					ontriggerlua="self:SetTexture(param);"
					watch0="ActiveInventoryStatus{slot}"
					ontrigger0lua="	if (AtoB(param0) and AtoB(param11)) then
										self:SetRenderMode('normal')
									else
										self:SetRenderMode('grayscale')
									end"
					noclick="true"
				/>

				<piegraph start="270" end="-90" square="true" color="#000000cc" noclick="true"
					onloadlua="Game:RegisterAbilityPie(self, {slot})"
				/>

				<panel
					onmouseoverlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(0)"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="
						if (tonumber(param5) > 0 or tonumber(param7) == 0) then
							self:SetVisible(1)
							self:SetColor('white')
						else
							self:SetVisible(0)
							self:SetColor('invisible')
						end"
				/>
				<!-- UIScript -->
				<button
					texture="/ui/common/button_gloss.tga"
					rendermode="additive"
					onclicklua="PlaySound('/shared/sounds/ui/ability_select.wav')"
					onclick="ActivateSharedTool({slot});"
					onrightclicklua="PlaySound('/shared/sounds/ui/ability_select.wav')"
					onrightclick="ActivateSharedToolSecondary({slot});"
					onmouseoverlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(0)"
					watch="ActiveInventoryCanActivate{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1lua="
						if (tonumber(param5) > 0 or tonumber(param7) == 0) then
							self:SetEnabled(1)
							self:SetColor('cccccc')
						else
							self:SetEnabled(0)
							self:SetColor('invisible')
						end"
					interactive="false"
				/>

				<image
					texture="$white"
					rendermode="overlay"
					noclick="true"
					onloadlua="Game:RegisterAbilityOverlay(self, {slot})"
				/>

				<panel
					width="38.5%"
					height="38.5%"
					align="right"
					valign="bottom"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_8" watch="ActiveInventoryCharges{slot}" ontriggerlua="self:SetText(param);"/>
				</panel>

				<!-- Refresh effect -->
				<!-- UIScript -->
				<modelpanel
					visible="0"
					noclick="true"
					model="common/models/refresh/refresh.mdf"
					anim="idle"
					effect="common/models/refresh/refresh.effect"
					camerapos="0 1 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					carmerafar="100"
					depthclear="false"
					depthcompress="true"
					watch="EventActiveInventoryReady{slot}"
					ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
					onshow="PlaySound('/shared/sounds/ui/ability_refresh.wav'); "
				/>

				<!-- Targeting -->
				<frame
					borderthickness="4"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param8))"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>

					<modelpanel
						noclick="true"
						model="effects/portrait_lvlup/portrait_emitter.mdf"
						anim="idle"
						effect="effects/portrait_lvlup/ability_active.effect"
						camerapos="-1 10 0"
						cameraangles="0 0 180"
						camerafov="60"
						depthclear="false"
						depthcompress="true"
						onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
					/>
				</frame>

				<!-- Toggle active -->
				<frame
					borderthickness="2"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param1))"
					noclick="true"
					passivechildren="true"
				>
					<!--<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>-->
					<modelpanel
						visible="1"
						noclick="true"
						model="common/models/toggle/toggle.mdf"
						anim="idle"
						effect="common/models/toggle/toggle.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
					/>
				</frame>

				<!-- Activating -->
				<frame
					borderthickness="2"
					bordercolor="yellow"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param4))"
					noclick="true"
					passivechildren="true"
				>
					<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>

				<panel color="invisible" noclick="1" >
					<label  noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" shadow="1" font="dyn_10"
						onloadlua="Game:RegisterAbilityCooldown(self, {slot})"
					/>
				</panel>
			</panel>
		</panel>
	</template>
	<!-- UIScript -->
	<template name="inventory_button">
		<panel noclick="1">
			<panel name="inventory_button_bg_empty_{slot}" color="invisible" noclick="1">
				<image texture="{texture=/ui/common/empty_pack.tga}"/>
			</panel>
			<panel name="inventory_button_parent_{slot}"
				onclicklua="
					if Input.IsAltDown() then
						SendGamePing('alt_inventory_item', {slot})
					else
						self:UICmd('PrimaryAction({slot});')
					end
					"
				onrightclick="SecondaryAction({slot});"
				onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
				onmouseoutlua="
					if (GetCvarBool('cg_useLongTooltips')) then
						GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
					else
						GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(0)
					end
					if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
			>
				<!-- Icon -->
				<image name="inventory_button_icon_{slot}" noclick="true" />

				<!-- Recipe scroll -->
				<panel name="inventory_button_recipe_parent_{slot}" color="black" noclick="true" passivechildren="true" >
					<image name="inventory_button_recipe_icon_{slot}"  width="55%" height="55%" align="center" valign="center" noclick="1" />
					<image texture="/ui/elements/shop/scroll_overlay.tga" noclick="1"/>
				</panel>

				<!-- Cooldown overlay-->
				<piegraph name="inventory_button_cooldown_overlay_{slot}" start="270" end="-90" square="true" color="#000000cc" noclick="true"/>

				<!-- Timer -->
				<label name="inventory_button_timer_{slot}"
					y="0.2h"
					width="100%"
					height="100%"
					textvalign="top"
					textalign="center"
					color="white"
					shadow="true"
					font="dyn_12"
					noclick="true"
				/>
				<!-- UIScript -->
				<button name="inventory_button_activate_{slot}"
					texture="/ui/elements/button_bevel.tga"
					onclicklua="
						if Input.IsAltDown() then
							SendGamePing('alt_inventory_item', {slot})
						else
							self:UICmd('PrimaryAction({slot}); ActivateTool({slot});')
						end
						"
					onrightclick="SecondaryAction({slot});"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					interactive="false"
				/>

				<!-- Bevel -->
				<!-- UIScript -->
				<image name="inventory_button_bevel_{slot}" texture="/ui/elements/button_bevel_up.tga"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					noclick="true"
				/>

				<!-- Color overlay -->
				<image name="inventory_button_color_overlay_{slot}" texture="$white" rendermode="overlay" noclick="true" />

				<!-- Shared -->
				<image name="inventory_button_shared_{slot}" width="40%" height="40%" texture="/ui/icons/shared.tga" noclick="true" />

				<!-- Purchased Recently -->
				<image name="inventory_button_recent_{slot}" align="right" valign="top" width="40%" height="40%" texture="/ui/icons/purchased_recently.tga" noclick="true" />

				<!-- Muted -->
				<image name="inventory_button_muted_{slot}" width="40%" height="40%" texture="/ui/icons/muted.tga" noclick="true" />

				<!-- Charges -->
				<panel name="inventory_button_charges_parent_{slot}"
					width="38.5%"
					height="38.5%"
					align="right"
					valign="bottom"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1" noclick="1" />
					<label name="inventory_button_charges_label_{slot}" noclick="1"
						width="100%"
						height="100%"
						textalign="center"
						textvalign="center"
						color="white"
						shadow="true"
						font="dyn_8"
					/>
				</panel>

				<!-- Refresh effect -->
				<modelpanel name="inventory_button_refresh_{slot}" visible="0" noclick="true"
					model="common/models/refresh/refresh.mdf"
					anim="idle"
					effect="common/models/refresh/refresh.effect"
					camerapos="0 1 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					carmerafar="100"
					depthclear="false"
					depthcompress="true"
				/>

				<!-- Targeting -->
				<frame name="inventory_button_target_parent_{slot}" borderthickness="4" bordercolor="orange" color="invisible" visible="false" noclick="true" passivechildren="true" >
					<image x="3" y="3" width="-6" height="-6" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>
					<modelpanel
						noclick="true"
						model="effects/portrait_lvlup/portrait_emitter.mdf"
						anim="idle"
						effect="effects/portrait_lvlup/ability_active.effect"
						camerapos="-1 10 0"
						cameraangles="0 0 180"
						camerafov="60"
						depthclear="false"
						depthcompress="true"
						onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
					/>
				</frame>

				<!-- Toggle active -->
				<frame name="inventory_button_toggle_{slot}"
					borderthickness="2"
					bordercolor="orange"
					color="invisible"
					visible="false"
					noclick="true"
					passivechildren="true"
				>
					<modelpanel
						visible="1"
						noclick="true"
						model="common/models/toggle/toggle.mdf"
						anim="idle"
						effect="common/models/toggle/toggle.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
					/>
				</frame>

				<!-- Activating -->
				<frame name="inventory_button_activating_{slot}" borderthickness="2" bordercolor="yellow" color="invisible" visible="false" noclick="true" passivechildren="true" >
					<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>

				<!-- Numeric cooldown timer -->
				<label name="inventory_button_cooldown_label_{slot}" noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" outline="1" font="dyn_12" />
			</panel>
			<!-- UIScript -->
			<panel name="inventory_button_item_cursor_{slot}" visible="0"
				color="invisible"
				texture="/ui/info/drop.tga"
				onmouseoverlua="self:SetColor('white')"
				onmouseoutlua="self:SetColor('invisible')"
				onclick="ItemPlace({slot});"
				onrightclick="ItemPlace({slot});"
				watch="ItemCursorVisible"
				ontriggerlua="self:SetVisible(AtoB(param)) self:UICmd('RefreshCursor();')"
			/>
			<panel color="invisible" noclick="true" name="player_inventory_slot_{slot}" />
		</panel>
	</template>

	<template name="inventory_game_button">
		<panel noclick="1"
			watch="{main_watch}"
			ontriggerlua="{main_ontriggerlua}"
			visible="{visible=1}"
		>
			<!-- Icon -->
			<image noclick="true"
				texture="{texture}"
				watch="{image_watch}"
				ontriggerlua="{image_ontriggerlua}"
				watch2="{cooldown_timer}"
				ontrigger2lua="
					if (tonumber(param) > 0) then
						self:SetRenderMode('grayscale')
					else
						self:SetRenderMode('normal')
					end
				"
				watch3="{image_watch3}"
				ontrigger3lua="{image_ontrigger3lua}"
			/>

			<!-- UIScript -->
			<button
				texture="/ui/elements/button_bevel.tga"
				onclicklua="{onclicklua}"
				onclick="{onclick}"
				onmouseoverlua="{onmouseoverlua}"
				onmouseoutlua="{onmouseoutlua}"
				watch="{button_watch}"
				ontriggerlua="{button_ontriggerlua}"
				interactive="false"
			/>

			<!-- charges -->
			<panel
				width="38.5%"
				height="38.5%"
				x="-7.5%"
				y="-7.5%"
				align="right"
				valign="bottom"
				noclick="true"
				passivechildren="true"
				color="invisible"
				visible="{hasCharges=false}"
				watch="{charges_panel_watch}"
				ontriggerlua="{charges_panel_ontriggerlua}"
			>
				<frame color="0 0 0 .7" bordercolor="white" borderthickness="1" noclick="1" />
				<label noclick="1"
					watch="{charges_watch}"
					ontriggerlua="{charges_ontriggerlua}"
					width="100%"
					height="100%"
					textalign="center"
					textvalign="center"
					color="white"
					shadow="true"
					font="dyn_8"
				/>
			</panel>

			<!-- cover -->
			<panel
				visible="0"
				watch="{cover_watch}"
				ontriggerlua="{cover_ontriggerlua}"
				onmouseoverlua="{cover_onmouseoverlua}"
				onmouseoutlua="{cover_onmouseoutlua}"
			/>

			<!-- cooldown stuff -->
			<piegraph
				visible="0"
				start="270" end="-90"
				square="true"
				color="#000000cc"
				watch="{cooldown_timer}"
				ontriggerlua="self:SetVisible(tonumber(param) > 0)"
				watch2="{cooldown_percent}"
				ontrigger2lua="self:SetValue(tonumber(param))"
			/>
			<label
				font="dyn_12"
				color="#87CEEB"
				outline="1"
				visible="0"
				watch="{cooldown_timer}"
				ontriggerlua="self:SetVisible(tonumber(param) > 0) self:SetText(param..'s')"
				textalign="center"
				textvalign="center"
			/>

		</panel>
	</template>

	<template name="inventory_game_icon">
		<panel noclick="1">
			<!-- Icon -->
			<image
				watch="{watch}"
				ontriggerlua="{ontriggerlua}"
				watch2="{watch2}"
				ontrigger2lua="{ontrigger2lua}"
				onmouseoverlua="{onmouseoverlua}"
				onmouseoutlua="{onmouseoutlua}"
				canclick="false"
			/>

			<frame
				borderthickness="1"
				color="invisible"
				bordercolor="#474747"
				noclick="1"
			/>
			<!-- <image
				texture="/ui/elements/button_bevel_up.tga"
				noclick="1"
			/> -->
		</panel>
	</template>

	<template name="ability_button_small">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<image texture="/ui/legion/empty_pack.tga"/>
			</panel>
			<!-- UIScript -->
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param))"
				onclicklua="
					if Input.IsAltDown() then
						SendGamePing('alt_ability', {slot})
					else
						self:UICmd('PrimaryAction({slot});')
					end
					"
				onrightclick="SecondaryAction({slot});"
				onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
				onmouseoutlua="
					if (GetCvarBool('cg_useLongTooltips')) then
						GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
					else
						GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
					end
					if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
			>
				<image
					noclick="true" texture="$invis"
					onloadlua="Game:RegisterAbilityIcon(self, {slot})"
				/>
				<piegraph start="270" end="-90" square="true" color="#000000cc" noclick="true"
					onloadlua="Game:RegisterAbilityPie(self, {slot})"
				/>
				<!-- UIScript -->
				<button
					texture="/ui/elements/button_bevel.tga"
					onclicklua="
						if Input.IsAltDown() then
							SendGamePing('alt_ability', {slot})
						else
							self:UICmd('PrimaryAction({slot}); ActivateTool({slot});')
						end
						"
					onrightclick="SecondaryAction({slot});"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					onhidelua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end"
					watch="ActiveInventoryCanActivate{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1lua="
						if ((tonumber(param5) > 0) or (tonumber(param7) == 0)) then
							self:SetEnabled(1)
							self:SetColor('white')
						else
							self:SetEnabled(0)
							self:SetColor('invisible')
						end"
					interactive="false"
				/>
				<image
					texture="$white"
					rendermode="overlay"
					noclick="true"
					onloadlua="Game:RegisterAbilityOverlay(self, {slot})"
				/>

				<panel
					width="48.5%"
					height="48.5%"
					align="right"
					valign="bottom"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_8" watch="ActiveInventoryCharges{slot}" ontriggerlua="self:SetText(param);"/>
				</panel>

				<frame
					borderthickness="4"
					bordercolor="cyan"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param8))"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="cyan" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>
				<frame
					borderthickness="4"
					bordercolor="yellow"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param1) or AtoB(param4))"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>
			</panel>
			<!-- UIScript -->
			<panel
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(param); RefreshCursor();"
				onmouseoverlua="self:SetColor('white');"
				onmouseoutlua="self:SetColor('invisible');"
				onclicklua="
					if Input.IsAltDown() then
						SendGamePing('alt_ability', {slot})
					else
						self:UICmd('ItemPlace({slot});')
					end
					"
				onrightclick="ItemPlace({slot});"
			/>
		</panel>
	</template>

	<template name="inventory_info_ward" >
		<panel noclick="1" visible="0"
			watch="SelectedInventoryExists{slot}"
			ontriggerlua="self:SetVisible(AtoB(param))"
		>
			<panel x="-7%" y="-5%" width="44%" height="44%" align="center" valign="center"
				onmouseoverlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
				onhidelua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
				onclicklua="if Input.IsAltDown() then SendGamePing('alt_enemy_inventory', {slot}) end"
				canclick="true"
			>
				<image usealphamask="true" alphamaskfile="/ui/masks/circle_mask.tga" noclick="true"
					watch="SelectedInventoryIcon{slot}"
					ontriggerlua="self:SetTexture(param)"
				/>

				<piegraph start="270" end="-90" color="#000000cc" noclick="true"
					watch="SelectedInventoryCooldown{slot}"
					ontriggerlua="self:SetVisible(tonumber(param1) > 0) self:SetValue(param2)"
				/>

				<label textalign="center" textvalign="center" color="white" font="dyn_9" outline="1" noclick="true"
					watch="SelectedInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0) self:SetText(param)"
				/>
			</panel>
			<image texture="/ui/common/ability_toggle.tga" noclick="true" />
		</panel>
	</template>

	<template name="inventory_info">
		<panel noclick="true">
			<panel
				watch="SelectedInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))" passivechildren="true"
			>
				<image texture="/ui/legion/empty_pack.tga"/>
			</panel>
			<panel
				watch="SelectedInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param));"
				onmouseoverlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
				onclicklua="if Input.IsAltDown() then SendGamePing('alt_enemy_inventory', {slot}) end"
				onhidelua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
				passivechildren="true"
			>
				<!-- Icon -->
				<image
					watch="SelectedInventoryIcon{slot}"
					ontriggerlua="self:SetTexture(param);"
					watch0="SelectedInventoryStatus{slot}"
					ontrigger0lua="	if (AtoB(param5)) then
										self:SetRenderMode('normal')
								   	else
								   		self:SetRenderMode('grayscale')
								   	end"
					watch1="SelectedInventoryRecipe{slot}"
					ontrigger1lua="self:SetVisible(not AtoB(param))"
				/>

				<!-- Recipe scroll -->
				<panel color="black" watch="SelectedInventoryRecipe{slot}" ontriggerlua="self:SetVisible(AtoB(param))" noclick="true" passivechildren="true">
					<image
						width="55%" height="55%"
						align="center" valign="center"
						watch="SelectedInventoryIcon{slot}"
						ontriggerlua="self:SetTexture(param);"
					/>
					<image texture="/ui/elements/shop/scroll_overlay.tga"/>
				</panel>

				<!-- Bevel -->
				<image texture="/ui/elements/button_bevel_up.tga" noclick="true"/>

				<!-- Cooldown overlay-->
				<piegraph start="270" end="-90" square="true" color="#000000cc" watch="SelectedInventoryCooldown{slot}" ontriggerlua="self:SetVisible(tonumber(param1) > 0) self:SetValue(param2)" noclick="true"/>

				<!-- Timer -->
				<!-- UIScript -->
				<label
					y="0.2h"
					width="100%"
					height="100%"
					textvalign="top"
					textalign="center"
					color="white"
					shadow="true"
					font="dyn_9"
					watch="SelectedInventoryHasTimer{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="SelectedInventoryTimer{slot}"
					ontrigger1="SetText(FtoT(param + 949));"
					noclick="true"
				/>

				<!-- Color overlay -->
				<image
					texture="$white"
					rendermode="overlay"
					watch="SelectedInventoryStatus{slot}"
					ontriggerlua="
						if (tonumber(param3) == 0 and tonumber(param4) > 0) then
							self:SetColor('#404040')
							self:SetVisible(1)
						elseif (AtoB(param1)) then
							self:SetColor('#676045')
							self:SetVisible(1)
						elseif (AtoB(param2)) then
							self:SetColor('#4444ff')
							self:SetVisible(1)
						else
							self:SetVisible(0)
						end
					"
					noclick="true"
				/>

				<!-- Shared -->
				<image
					width="40%" height="40%"
					texture="/items/icons/shared.tga"
					watch="SelectedInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param8) and AtoB(param7))"
					noclick="true"
				/>

				<!-- Purchased Recently -->
				<image
					align="right"
					valign="top"
					width="40%"
					height="40%"
					texture="{texture=/items/icons/PurchasedRecently.tga}"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param12) and (not AtoB(param10)))"
					noclick="true"
				/>

				<!-- Muted -->
				<image
					width="40%" height="40%"
					texture="/items/icons/muted.tga"
					watch="SelectedInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param8) and (not AtoB(param7)))"
					noclick="true"
				/>

				<!-- Charges -->
				<panel
					width="42.00%"
					height="42.00%"
					align="right"
					valign="bottom"
					watch="SelectedInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					color="invisible"
					noclick="true" passivechildren="true"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label textalign="center" textvalign="center" color="white" font="dyn_7" watch="SelectedInventoryCharges{slot}" ontriggerlua="self:SetText(param);"/>
				</panel>

				<!-- Numeric cooldown timer -->
				<!-- UIScript -->
				<panel color="invisible" noclick="1">
					<label noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" shadow="1" font="dyn_9" watch="SelectedInventoryCooldown{slot}" ontriggerlua="self:SetVisible(AtoB(param0)) self:SetText(self:UICmd('FtoT('..param0..', 0, 0, \'-\')')..'s')" />
				</panel>
			</panel>
		</panel>
	</template>

	<template name="ability_button_lvlup">
		<panel>
			<image texture="/ui/legion/empty_pack.tga"/>
			<panel name="ability_lvlup_button_{slot}">
				<panel y="1.5h" width="7h" height="7h" valign="bottom" align="center" noclick="1">
					<modelpanel name="level_up_effect_{slot}"
						noclick="true"
						model="/shared/models/invis.mdf"
						effect="effects/level_up_ability.effect"
						camerapos="0 10 0"
						cameraangles="0 0 180"
						camerafov="55"
						depthclear="false"
						depthcompress="true"
					/>
				</panel>
				<image name="ability_lvlup_button_icon_{slot}" noclick="1" />
				<button name="ability_lvlup_button_button_{slot}"
					color="1 1 1 .3"
					texture="/ui/elements/button_roundhl.tga"
					onmouseoverlua="
						SetLevelUpSlot({slot})
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_levelup_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_levelup_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end
					"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_levelup_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_levelup_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						ClearLevelUpSlot()
					"
					onhidelua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_levelup_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_levelup_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						ClearLevelUpSlot()
					"
					interactive="false"
				/>
				<panel name="ability_lvlup_button_label_parent_{slot}" y="-0.23h" width="1.7h" height="1.4h" align="center" valign="bottom" color="invisible" noclick="true" passivechildren="true" >
					<label name="ability_lvlup_button_label_{slot}" width="100%" height="100%" textalign="center" textvalign="center" color="white" font="dyn_9" outline="1" />
				</panel>
			</panel>
		</panel>
	</template>

	<template name="addfriend_button">
		<panel
			width="1.5h" height="1.5h"
			valign="center" watch="{watch=}" ontriggerlua="{ontriggerlua=}"
		>
			<!-- UIScript -->
			<button
				group="{group}"
				color="invisible"
				watch="MenuPlayerInfo{index}"
				ontriggerlua="
					if (not IsBuddy(param2) and (param2 ~= GetAccountName())) then
						self:SetVisible(1)
					else
						self:SetVisible(0)
					end

					local player = param1..param2
					local mouseOver = function()
						GetWidget('tooltip_label', 'game'):SetText(Translate('game_menu_add_friend_tip', 'player', player))
						GetWidget('menu_tooltip', 'game'):SetVisible(1)
					end

					local buddy = param2
					local onClick = function()
						PlaySound('/shared/sounds/ui/button_click_05.wav')
						self:UICmd('ChatAddBuddy(\''..buddy..'\')')
						self:SetVisible(0)
					end
					self:SetCallback('onmouseover', mouseOver)
					self:SetCallback('onclick', onClick)
					self:RefreshCallbacks()
				"
				onmouseoutlua="GetWidget('menu_tooltip', 'game'):SetVisible(0)"
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/addfriend_up.tga" />
				</widgetstate>

				<widgetstate statename="over">
					<image texture="/ui/elements/addfriend_over.tga" />
				</widgetstate>

				<widgetstate statename="down">
					<image x="1" y="1" texture="/ui/elements/addfriend_over.tga" />
				</widgetstate>

				<widgetstate statename="disabled">
					<image texture="/ui/elements/addfriend_over.tga" />
				</widgetstate>
			</button>
		</panel>
	</template>

	<template name="reportplayer_button">
		<panel
			width="100@" height="100%"
			valign="center"
		>
			<button
				name="rap_scoreboard_{index}"
				visible="false"
				group="{group}"
				color="invisible"
				watch="MenuPlayerInfo{index}"
				ontriggerlua="
					local player = param1..param2
					local mouseOver = function()
						GetWidget('tooltip_label', 'game'):SetText(Translate('tooltip_report', 'player', player))
						GetWidget('menu_tooltip', 'game'):SetVisible(1)
					end

					local buddy = param2
					local onClick = function()
						PlaySound('/shared/sounds/ui/button_click_05.wav')
						Trigger('show_rap_panel', buddy)
					end
					self:SetCallback('onmouseover', mouseOver)
					self:SetCallback('onclick', onClick)
					self:RefreshCallbacks()
				"
				onmouseoutlua="GetWidget('menu_tooltip', 'game'):SetVisible(0)"
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/icons/ban_hammer.tga" color="1 1 1 1" />
				</widgetstate>

				<widgetstate statename="over">
					<image texture="/ui/icons/ban_hammer.tga" color=".8 .8 1 1" />
				</widgetstate>

				<widgetstate statename="down" x="1" y="1">
					<image texture="/ui/icons/ban_hammer.tga" color=".8 .8 1 1" />
				</widgetstate>

				<widgetstate statename="disabled">
					<image texture="/ui/icons/ban_hammer.tga" color=".8 .8 .8 .5" rendermode="grayscale" />
				</widgetstate>
			</button>

		</panel>
	</template>

	<!-- Attack modifiers -->
	<!-- UIScript -->
	<template name="attack_modifier">
		<panel width="100@" height="100%" watch="AttackModifier{index}" ontriggerlua="self:SetVisible(NotEmpty(param0))">
			<image watch="AttackModifier{index}" ontriggerlua="self:SetTexture(param1)" rendermode="grayscale" />
			<image watch="AttackModifier{index}" ontriggerlua="self:SetTexture(param1) self:SetVisible(AtoB(param3))" />
			<button texture="/ui/elements/button_bevel.tga" watch="AttackModifier{index}" ontrigger="SetOnclick('SetExclusiveModifierSlot(GetCurrentControlUnit(), ' # param4 # ');');" interactive="false" />
			<frame color="invisible" bordercolor="1 1 1 .8" borderthickness="1" watch="AttackModifier{index}" ontriggerlua="self:SetVisible(AtoB(param3))"/>
		</panel>
	</template>

	<!-- Status Bar Overlay -->
	<template name="statusbar_overlay">
		<image noclick="true" texture="/ui/legion/{barimage=behind_bar.tga}" rendermode="{rendermode=overlay}" color="{barcolor=1 1 1 1}"/>
		<image noclick="true" align="right" texture="/ui/legion/{barimage=behind_bar.tga}" width="1"  color="1 1 1 .5"/>
	</template>

	<!-- Team Member Icon -->
	<template name="ally_ability_status">
		<image name="ally_ability_status_dot_{index}_{slot}"
			y="{y}"
			width="100%" height="100@"
			texture="/ui/common/ally_ability_led.tga"
		/>
	</template>

	<template name="team_member_rightclick_menu_item">
		<listitem value="{index=0}" condition="{condition=}" onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');" onselect="{command=}" onselectlua="{commandlua}" command="true">
			<label x="0.5h" color="{textcolor=white}" font="dyn_10" textvalign="center">{label}</label>
		</listitem>
	</template>

	<template name="team_member_icon">
		<panel y="{y}" name="game_top_left_ally_parent_{index}" width="7.45h" height="14.9h" noclick="1" sticky="true" stickytoinvis="false" color="invisible">
			<!-- Portrait Icon -->
			<panel x="0.65h" y="0.75h" width="5.0h" height="5.0h" color="invisible">
				<image name="game_top_left_ally_image_{index}"
					hmargin="0.30h" vmargin="0.30h"
				/>
				<panel name="game_top_left_ally_image_bg_{index}" align="center" valign="center" noclick="true" width="155@" height="155%" texture="/ui/fe2/lobby/team_color.tga" color="1 1 1 1"/>

				<panel name="game_top_left_ally_dead_{index}" y="0.2h" noclick="true" passivechildren="true">
					<image texture="/ui/legion/dead.tga" />
					<label name="game_top_left_ally_respawn_{index}" font="dyn_10" color="yellow" shadow="true" textalign="center" textvalign="center" />
				</panel>

				<panel name="game_top_left_ally_afk_{index}" noclick="true" passivechildren="true">
					<label
						width="100%" height="100%"
						textalign="center" textvalign="center"
						color="white" shadow="true"
						font="dyn_14"
						content="AFK"
					/>
				</panel>

				<panel name="game_top_left_ally_dc_{index}" noclick="true" passivechildren="true">
					<panel color="0 0 0 .5"/>
					<image x="0.2h" y="0.4h" width="90%" height="90@" texture="/ui/elements/disconnect.tga" />
					<label name="game_top_left_ally_dc_label_{index}"
						width="100%" height="100%"
						textalign="center" textvalign="bottom"
						color="white" shadow="true"
						font="dyn_10"
					/>
				</panel>

				<panel name="game_top_left_ally_load_{index}" noclick="true" passivechildren="true">
					<panel color="0 0 0 .5"/>
					<image x="0.5h" width="90%" height="90@" texture="/ui/elements/lobby/icon_loading.tga" />
					<label name="game_top_left_ally_load_label_{index}"
						width="100%" height="100%"
						textalign="center" textvalign="center"
						color="white" outline="true"
						font="dyn_10"
					/>
				</panel>
				<!-- UIScript -->
				<button name="ally_right_click_menu_button_{index}"
					color="invisible"
					onclick="SelectUnit(AllyIndex{index});"
					onmouseoverlua="GetWidget('ally_tooltip{index}', 'game'):SetVisible(1)
									Game:AllyHover({index})
									SetInterfaceTargetedEntity(GetTrigger('AllyIndex'..{index}):GetLastValue())"
					onmouseoutlua="GetWidget('ally_tooltip{index}', 'game'):SetVisible(0)
									GetWidget('genericGameFloatingTip', 'game'):SetVisible(0)
									SetInterfaceTargetedEntity(-1)"
					interactive="false"
				/>

				<!-- Item catcher -->
				<!-- UIScript -->
				<panel
					color="invisible"
					texture="/ui/info/drop.tga"
					watch="ItemCursorVisible"
					ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
					onmouseoverlua="self:SetColor('white')"
					onmouseoutlua="self:SetColor('invisible')"
					onclick="ItemPlaceEntity(AllyIndex{index});"
					onrightclick="ItemPlaceEntity(AllyIndex{index});"
				/>
			</panel>

			<!-- Health / Mana Bars -->
			<panel x="0.6h" y="5.9h" width="5.8h" height="1.1h" color="black" noclick="true" passivechildren="true">
				<panel y="0" height="50%" valign="top" color="black">
					<panel name="game_top_left_ally_health_{index}" color="0 1 0 0" noclick="1">
						<panel color="1 1 1 .1" align="right" width=".1h" rendermode="additive"/>
					</panel>
				</panel>
				<panel y="0.5h" height="50%" color="black">
					<panel name="game_top_left_ally_mana_{index}" color="0 0.4 1 1" />
				</panel>
			</panel>

			<!--  Voip Mic  -->
			<panel x="0h" name="game_top_left_ally_voip_{index}" noclick="1" width="80%" height="50%" color="invisible" align="center" valign="top" visible="1">
				<modelpanel
					visible="1"
					width="100%"
					height="100%"
					noclick="true"
					model="/ui/common/models/arcade_text/invis.mdf"
					anim="idle"
					camerapos="-5 200 25"
					cameraangles="0 0 180"
					camerafov="10"
					cameranear="1"
					carmerafar="5000"
					depthclear="false"
					depthcompress="true"
					sunazimuth="-90"
					sunaltitude="180"
					suncolor="2 2 2"
					onshow="SetAnim('idle'); SetEffect('/shared/effects/talking.effect');"
				/>
			</panel>

			<image name="ally_indicator_template_{index}"
				texture="/ui/common/ally_frame_iron.tga" noclick="1"
				onloadlua="self:SetVisible(not GetCvarBool('ui_rap_enabled'))"
			    watch="AllyMastery{index}"
			    ontriggerlua="self:SetTexture('/ui/common/ally_frame_'..param0..'.tga')"
			/>
			<image name="ally_rap_indicator_template_{index}"
				texture="/ui/common/ally_frame_rap_iron.tga" noclick="1"
				onloadlua="self:SetVisible(GetCvarBool('ui_rap_enabled'))"
				watch="AllyMastery{index}"
			    ontriggerlua="self:SetTexture('/ui/common/ally_frame_'..param0..'.tga')"
			/>

			<!-- Ally Share -->
			<panel x="0" y="0.15h" width="1.86h" height="1.86h" color="invisible" noclick="true">
				<image noclick="true"
					watch="AllyControlSharing{index}"
					ontriggerlua="
						local partOne = 'none'
						local partTwo = 'none'

						if (tonumber(param1) == 1) then
							partOne = 'courier'
						elseif (tonumber(param1) == 3) then
							partOne = 'full'
						end

						if (tonumber(param0) == 1) then
							partTwo = 'courier'
						elseif (tonumber(param0) == 3) then
							partTwo = 'full'
						end

						self:SetTexture('/ui/common/share_'..partOne..'_'..partTwo..'.tga')
					"
					watch1="ViewingReplay"
					ontrigger1lua="if AtoB(param) then self:SetColor('gray') else self:SetColor('white') end"
				/>
				<!-- UIScript -->
				<button color="invisible" watch="AllyPlayerInfo{index}" ontrigger="SetOnclick('CycleSharedControl(' # param2 # ');');" interactive="false" onmouseoverlua="GetWidget('game_menu_tip_sharing', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('game_menu_tip_sharing', 'game'):SetVisible(0)"
					watch1="ViewingReplay"
					ontrigger1lua="self:SetVisible(not AtoB(param))" />
			</panel>

			<!-- No Help -->
			<panel x="-0.5h" y="2.2h" width="2.0h" height="2.0h" color="invisible" noclick="true">
				<image texture="/ui/common/ally_ability_led.tga" watch="AllyNoHelp{index}" ontriggerlua="if AtoB(param) then self:SetColor('red') else self:SetColor('lime') end" noclick="true"/>
				<!-- UIScript -->
				<button color="invisible" watch="AllyPlayerInfo{index}" ontrigger="SetOnclick('ToggleNoHelp(' # param2 # ');');" interactive="false" onmouseoverlua="GetWidget('game_menu_tip_nohelp', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('game_menu_tip_nohelp', 'game'):SetVisible(0)"
					watch1="ViewingReplay"
					ontrigger1lua="self:SetVisible(not AtoB(param))"/>
			</panel>

			<!-- Ally Level -->
			<panel x="5.25h" y="0.2h" width="1.5h" height="1.6h" name="game_top_left_ally_level_{index}" color="invisible" noclick="true" passivechildren="true">
				<label width="100%" height="100%" textalign="center" textvalign="center" font="dyn_8" color="yellow" watch="AllyHeroInfo{index}" ontriggerlua="self:SetText(param2)"/>
			</panel>

			<!-- Soccer Ally Frame Level Cover -->
			<image name="game_top_left_ally_level_ballcover_{index}" x="5.45h" y="0.45h" visible="0" width="1.0h" height="1.0h" texture="/triggers/custom_maps/soccer/ball/mapicon.tga" noclick="1"/>

			<!-- Ally Chat -->
			<panel x="0" y="4.0h" width="1.86h" height="1.86h" color="invisible">
				<image name="game_top_left_ally_voip_indicator_{index}"
					texture="/ui/common/chat.tga"
					watch="ViewingReplay"
					ontriggerlua="if AtoB(param) then self:SetColor('gray') end"
				/>
				<!-- UIScript -->
				<button watch="AllyPlayerInfo{index}"
					color="invisible"
					interactive="false"
					onloadlua="
						Set('toggle_ally_voice_mute_enabled_{index}', 'false', 'bool')
					"
					ontriggerlua="
						Set('toggle_ally_voice_mute_enabled_{index}', 'true')
					"
					onclicklua="
						if(GetCvarBool('toggle_ally_voice_mute_enabled_{index}')) then
							Game:ToggleAllyVoiceMute(GetCvarString('right_click_ally_player_name_{index}'))
						end
					"
					onmouseoverlua="GetWidget('game_menu_tip_voice', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('game_menu_tip_voice', 'game'):SetVisible(0)"
					watch1="ViewingReplay"
					ontrigger1lua="self:SetVisible(not AtoB(param))"
					/>
			</panel>

			<!-- RAP -->
			<panel name="ally_rap_indicator_{index}" x="4.2h" y="4.25h" width="1.5h" height="1.5h" color="invisible" visible="false"
				watch="MenuSpectatorInfo{index}"
				ontriggerlua=
				"
					if (param0 ~= '-1') then
						Game:AllySpectatorRapButtonSetVisFlag(param0, param9, param10, param1)
					end
				"
			>
			<!-- <image name="game_top_left_ally_rap_{index}"
					texture="/ui/icons/ban_hammer.tga"
					watch="ViewingReplay"
					ontriggerlua="if AtoB(param) then self:SetColor('gray') else self:SetColor('white') end"
				/>
				<button	color="invisible"
					interactive="false"
					onmouseoverlua="GetWidget('game_menu_tip_RAP', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('game_menu_tip_RAP', 'game'):SetVisible(0)"
					watch2="AllyPlayerInfo{index}"
					ontrigger2lua="
						local index = param0
						local onClick = function()
							Trigger('show_rap_panel', index)
						end
						self:SetCallback('onclick', onClick)
						self:RefreshCallbacks()
					"
					watch1="ViewingReplay"
					ontrigger1lua="self:SetVisible(not AtoB(param))"
				/> -->
			</panel>

			<!-- Ally Ability Status Lights -->
			<panel name="game_top_left_ally_status_light_{index}" x="5.5h" y="2.1h" width="1.2h" height="3.8h" color="invisible" noclick="1" passivechildren="true" >
				<instance name="ally_ability_status" y="0h" slot="0" index="{index}" />
				<instance name="ally_ability_status" y="0.9h" slot="1" index="{index}" />
				<instance name="ally_ability_status" y="1.8h" slot="2" index="{index}" />
				<instance name="ally_ability_status" y="2.7h" slot="3" index="{index}" />
			</panel>

			<!-- Right Click Menu -->
			<!-- UIScript -->
			<menu
				name="ally_right_click_menu_{index}"
				width="0" height="0"
				color="red"
				listwidth="16.0h"
				listpaddingy="1.0h"
				itemoffsetx="0.5h"
				itemoffsety="0.5h"
				itemheight="2.2h"
				itemwidth="94%"
				highlight="under"
				exteriorscrollbars="false"
				onevent="	OpenMenu(true);
							MoveToCursor();
							UpdateMenuConditions();
							BringToFront();"
				onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav')"
				onloadlua="
					Set('right_click_ally_player_name_{index}', 'DefaultName', 'string');
					Set('right_click_ally_player_heroicon_{index}', '/shared/icons/stop.tga', 'string');
					"
				watch="AllyPlayerInfo{index}"
				ontriggerlua="Set('right_click_ally_player_name_{index}', StripClanTag(param0))"
				watch2="AllyHeroInfo{index}"
				ontrigger2lua="Set('right_click_ally_player_heroicon_{index}', param1)"
			>
				<widgetstate statename="listbg">
					<frame texture="/ui/frames/glass_header_big.tga" color="#233749" />
					<frame color="invisible" bordercolor="#455166" borderthickness="3" />
					<frame color="invisible" bordercolor="black" borderthickness="2" />
				</widgetstate>
				<widgetstate statename="itemhighlight">
					<panel color="#263e51" />
				</widgetstate>

				<instance name="team_member_rightclick_menu_item" index="0" commandlua="PlaySound('/shared/sounds/ui/ccpanel/button_click_01.wav') Trigger('show_rap_panel', GetCvarString('right_click_ally_player_name_{index}'), GetCvarString('right_click_ally_player_heroicon_{index}'))" label="game_menu_report_a_player" condition="ally_rap_available_{index}" />
				<instance name="team_member_rightclick_menu_item" index="1" commandlua="PlaySound('/shared/sounds/ui/ccpanel/button_click_01.wav') Game:ToggleIgnore(GetCvarString('right_click_ally_player_name_{index}'))" label="ui_items_cc_right_click_ignore" condition="(!ChatIsIgnored(right_click_ally_player_name_{index}))" />
				<instance name="team_member_rightclick_menu_item" index="2" commandlua="PlaySound('/shared/sounds/ui/ccpanel/button_click_01.wav') Game:ToggleIgnore(GetCvarString('right_click_ally_player_name_{index}'))" label="ui_items_cc_right_click_unignore" condition="(ChatIsIgnored(right_click_ally_player_name_{index}))" />
			</menu>
		</panel>
	</template>

	<template name="minimap_inventory_item_hiding">
		<panel width="100@" height="100%" noclick="true" sticky="1" stickytoinvis="0"
			watch="MinimapHover"
			ontriggerlua="self:SetVisible(NotEmpty(param{param}))"
		>
			<image texture="/ui/common/empty_pack.tga" color=".6 .6 .6 1" watch="MinimapHover"
				ontriggerlua="	if (param{param} ~= '') then
									self:SetTexture(param{param})
									self:SetColor('1 1 1 1')
								else
									self:SetTexture('/ui/common/empty_pack.tga')
									self:SetColor('.6 .6 .6 1')
								end"
			/>
			<frame color="invisible" borderthickness="1" bordercolor=".1 .1 .1 1"/>
		</panel>
	</template>

	<template name="minimap_inventory_item">
		<panel width="100@" height="100%" noclick="true">
			<image texture="/ui/common/empty_pack.tga" color=".6 .6 .6 1" watch="MinimapHover"
				ontriggerlua="	if (param{param} ~= '') then
									self:SetTexture(param{param})
									self:SetColor('1 1 1 1')
								else
									self:SetTexture('/ui/common/empty_pack.tga')
									self:SetColor('.6 .6 .6 1')
								end"
			/>
			<frame color="invisible" borderthickness="1" bordercolor=".1 .1 .1 1"/>
		</panel>
	</template>

	<template name="gamecontrol_combobox_item">
		<label y="0.7h" x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="{label}" />
	</template>

	<template name="gamecontrol_combobox_item_unpause">
		<label y="0.7h" x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="{label}"
			watch="gameUnpauseLerpTrigger"
			ontriggerlua="	if (tonumber(param) > 0) then
								self:SetColor('.5 .5 .5 .7')
							else
								self:SetColor('white')
							end"
		/>
		<panel align="right" height="-10%" width="90@" heigth="90%" valign="center" x="-10@" y="0.7h">
			<panel align="center" valign="center" width="-15@" height="-15%">
				<piegraph color="0 0 0 0.5"/>
				<piegraph color="1 1 1 0.75" start="270" end="-90"
					oninstantiate="
						CreateLerp('gameUnpauseLerp', 60000, 1, 0, -1);
						SleepWidget('1', 'DoEvent(0)');
					"
					onevent0="
						CreateLerp('gameUnpauseLerp', 0, 60000, 0, -1);
					"
					watch="gameUnpauseLerpTrigger"
					ontriggerlua="
						self:SetValue(tonumber(param) / 60000)
						self:SetVisible(tonumber(param) > 0)
					"
				/>
			</panel>
		</panel>
	</template>

	<template name="gamecontrol_combobox_item_disabled">
		<label y="0.7h" x="0.8h" height="100%" textvalign="center" font="dyn_9" color=".5 .5 .5 .7" shadow="true" content="{label}" />
	</template>

	<template name="gamecontrol_combobox_item_disabled_countdown_th">
		<panel y="0.7h" x="0.8h" height="100%" color="invisible" float="right">
			<label name="countdown{index}" x="-4h" width="40%" textvalign="center" textalign="left" font="dyn_9" color=".9 .9 .9 1" shadow="true" content="" />
			<label padding="1h" textvalign="center" font="dyn_9" color=".5 .5 .5 .7" shadow="true" content="{label}" />
		</panel>
	</template>

	<template name="gamecontrol_combobox_item_disabled_countdown">
		<label y="0.7h" x="0.8h" height="100%" textvalign="center" font="dyn_9" color=".5 .5 .5 .7" shadow="true" content="{label}" />
		<label name="countdown{index}" y="0.7h" height="100%" width="98%" textvalign="center" textalign="right" font="dyn_9" color=".5 .5 .5 .7" shadow="true" noclick="true" content="" />
	</template>

	<template name="gamecontrol_combobox_state">
		<widgetstate statename="{state}">
			<panel color="invisible">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="{color}"/>
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="{color}"/>
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="{color}"/>
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_{image}.tga" />
			</panel>
		</widgetstate>
	</template>

	<template name="gamecontrol_combobox">
		<combobox
			luatable="1"
			name="{id}"
			align="left" valign="top"
			color="invisible"
			itemwidth="100%"
			itemheight="2.2h"
			highlightcolor="invisible"
			highlightbordercolor="invisible"
			showhidekeeporder="true"
			onload="ComboBoxCmd('clear'); {populate=}; {data}('{itemtemplate=gamecontrol_combobox_item}'); {onload=}"
			onmouseover="{onmouseover}"
			onmouseoverlua="
				PlaySound('/shared/sounds/ui/button_over_02.wav')
				GetWidget('{id}_hover', 'game'):SetVisible(1)
				{onmouseoverlua}"
			onmouseout="{onmouseout}"
			onmouseoutlua="
				GetWidget('{id}_hover', 'game'):SetVisible(0)
				{onmouseoutlua}"
			onclick="{onclick}"
			onclicklua="{onclicklua}"
			watch="{watch}"
			ontrigger="{ontrigger}"
			ontriggerlua="{ontriggerlua}"
			onselect="{onselect}"
			onselectlua="PlaySound('/shared/sounds/ui/button_click_01.wav') {onselectlua}"
			interactive="false"
			onevent="{onevent}"
			oneventlua="{oneventlua}"
		>
			<instance name="gamecontrol_combobox_state" state="up" color="1 1 1 1" image="up"/>
			<instance name="gamecontrol_combobox_state" state="over" color="#69ccff" image="over"/>
			<instance name="gamecontrol_combobox_state" state="down" color="#69ccff" image="over"/>

			<widgetstate statename="listbg">
				<frame height="+3.2h" y="-1.6h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			</widgetstate>

			<widgetstate statename="itembg">
			</widgetstate>

			<widgetstate statename="itemhighlight">
				<panel y="0.7h" width="100%" texture="/ui/info/header_bar_c.tga" color="1 1 1 1">
					<panel width="100%" height="100%" >
						<image height="50%" width="32" align="left" valign="top" color="1 1 1 1" texture="/ui/info/header_bar_tl.tga" noclick="1"/>
						<image height="50%" width="32" align="left" valign="bottom" color="1 1 1 1" texture="/ui/info/header_bar_bl.tga" noclick="1"/>
						<image height="50%" width="32" align="right" valign="top" color="1 1 1 1" texture="/ui/info/header_bar_tr.tga" noclick="1"/>
						<image height="50%" width="32" align="right" valign="bottom" color="1 1 1 1" texture="/ui/info/header_bar_br.tga" noclick="1"/>
					</panel>
				</panel>
			</widgetstate>


		</combobox>
	</template>

	<template name="channel_bar">
		<panel name="channel_bar_{slot}"
			stickytoinvis="false"
			adhere="bottom"
			spacing="0.5h"
			width="100%"
			height="2.3h"
			visible="false"
		>
			<frame hmargin="-1h" vmargin="-1h" texture="/ui/frames/shadow.tga" color="invisible" bordercolor="0 0 0 0.8" borderthickness="1.4h" noclick="1" />

			<panel color="0 0 0 1">
				<panel
					hmargin="0.2h"
					vmargin="0.2h"
				>
					<panel name="channel_bar_bg_{slot}"
						color="0 0 0 1"
						width="100@"
					>
						<image name="channel_bar_icon_{slot}"
							texture=""
							hmargin="0.1h"
							vmargin="0.1h"
						/>
					</panel>
					<panel
						align="right"
						width="-100@"
					>
						<panel name="channel_bar_right_{slot}"
							align="right"
							color="0.5 0 0.75 0.2"
							width="-0.2h"
						>
							<panel name="channel_bar_prog_{slot}"
								width="0%"
								color="0 0 0 1"
							>
								<panel color="1 1 1 .2" align="right" width=".2h" rendermode="additive" />
								<panel color="0 0 0 .5" align="right" width=".2h" x=".15h" />
							</panel>
							<image width="-0.2h" align="center" texture="/ui/elements/bar_highlight.tga" />
							<label name="channel_bar_label_{slot}"
								font="dyn_10"
								color="1 1 1 1"
								width="100%"
								outline="1"
								height="100%"
								textalign="center"
								textvalign="center"
							/>
						</panel>
					</panel>
				</panel>
			</panel>
		</panel>
	</template>

	<!-- The camera width/height is like this so that we display effects the same exact way in all resolutions, the effect just gets distorted in different aspects -->
	<effectpanel
		name="game_overlay_effects"
		camerawidth="1920"
		cameraheight="1080"
		noclick="1"
		watch="ActiveOverlayEffect"
		ontriggerlua="self:StartEffect(param, 0.5, 0.5, '1 1 1', 1)"
	/>

	<!-- Radial Command -->
	<instance name="radial_menu" />

	<!-- Disconnect button -->
	<include file="game_shared_disconnect.package"/>

	<template name="statusboard_entry">
		<panel
			height="1.8h" align="center"
			watch="ScoreboardPlayer{index}"
			ontriggerlua="self:SetVisible(string.len(param0) > 0)"
			visible="false"
			noclick="true"
			sticky="true" stickytoinvis="false"
		>
			<panel width="100%" align="center" float="right" color="invisible" noclick="true" passivechildren="false">

				<panel width="0.6h" height="96%" noclick="true">
					<panel width="0.3h" color="white" noclick="true" watch="ScoreboardPlayer{index}" ontriggerlua="self:SetColor(param3)" />
				</panel>

				<image
					name="game_statusboard_hero_image_{index}"
					x="0.5h"
					width="96@"
					height="96%"
					noclick="false"
					onmouseoverlua="Game.HoverScoreboardHero({index})"
					watch="ScoreboardPlayer{index}"
					ontriggerlua="
						self:SetTexture(param2)
						if (AtoB(param8)) then
							self:SetRenderMode('normal')
						else
							self:SetRenderMode('grayscale')
						end
					"
					onmouseoutlua="
							self:DoEventN(1)
							GetWidget('genericGameFloatingTip', 'game'):SetVisible(0)
					"
					onhidelua="
							self:DoEventN(1)
					"
					onevent1lua="
						Trigger('GameImagePreviewVis', 'false', '100%');
					"
					onclicklua="if Input.IsAltDown() then SendGamePing('alt_enemy_hero', {index}) end"
				/>

				<image
					x="0.5h"
					width="96@"
					height="96%"
					noclick="true"
					texture="/ui/legion/dead.tga"
					watch="ScoreboardPlayer{index}"
					ontriggerlua="self:SetVisible(not AtoB(param8))"
				/>

				<panel width="130@" height="100%" noclick="true">

					<label textalign="center" textvalign="center" font="dyn_9" color="#f6cd6d" shadow="true" noclick="true"
						watch="ScoreboardPlayer{index}"
						ontriggerlua="self:SetText(param4)"
					/>

					<!-- Status Icon -->
					<image
						x="0.5h"
						width="96@" height="96%"
						valign="center"
						watch="MenuPlayerInfo{index}"
						noclick="true"
						visible="false"
						texture="$invis"
						ontriggerlua="
							if (tonumber(param12) ~= 0) then
								self:SetTexture('$invis')
								self:SetVisible(1)
							elseif (1 > tonumber(param13)) then
								self:SetTexture('/ui/elements/lobby/icon_loading.tga')
								self:SetVisible(1)
							elseif (AtoB(param8)) then
								self:SetTexture('/ui/elements/disconnect.tga')
								self:SetVisible(1)
							else
								self:SetVisible(0)
							end
						"
					/>

				</panel>

				<label x="0.2h" y="-0.1h" width="2.0h" height="100%" textalign="center" textvalign="center" font="dyn_10" color="yellow" shadow="true" shadowcolor="black" noclick="true"
					watch="ScoreboardPlayerRespawn{index}"
					ontriggerlua="	self:SetVisible((tonumber(param0) > 0) and (not AtoB(param1)))
									self:SetText(param0)"
				/>
			</panel>
		</panel>
	</template>

	<!-- Scores -->
	<panel name="Nstatusboard" height="2.0h" width="29.5h" x="23.0h" y="8.0h" align="right" noclick="true" >

		<frame x="0.8h" texture="frames/rounded_bg_white.tga" borderthickness="0.5h" color="0 0 0 .6" noclick="true"/>
		<frame x="0.8h" texture="frames/roundframe.tga" color=".2 .2 .2 1" borderthickness="0.5h" noclick="true" />

		<panel y="0.5h" x="2h" grow="true" growinvis="false" width="28.0h" align="right" float="bottom" padding="1" noclick="true">

			<!-- Legion -->
			<panel name="Nstatusboard_Legion" width="100%" noclick="true" >
				<frame texture="frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .8" noclick="true"/>
				<frame texture="frames/roundframe.tga" color="0 .3 0 1" borderthickness="0.6h" noclick="true" />
				<panel y="0.4h" grow="true" width="-1.0h" align="center" float="bottom" padding="0.3h" noclick="true">

					<panel grow="true" growinvis="false" width="100%" noclick="true" float="bottom" padding="0.2h">
						<instance name="statusboard_entry" index="0"/>
						<instance name="statusboard_entry" index="1"/>
						<instance name="statusboard_entry" index="2"/>
						<instance name="statusboard_entry" index="3"/>
						<instance name="statusboard_entry" index="4"/>
						<panel sticky="true" stickytoinvis="false" width="100%" height="0.3h" noclick="true" color="invisible" />
					</panel>
				</panel>
			</panel>

			<!-- Hellbourne -->
			<panel name="Nstatusboard_Hellbourne" width="100%" sticky="true" stickytoinvis="false" noclick="true" >
				<frame texture="frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .8" noclick="true"/>
				<frame texture="frames/roundframe.tga" color=".3 0 0 1" borderthickness="0.6h" noclick="true" />
				<panel y="0.4h" grow="true" width="-1.0h" align="center" float="bottom" padding="0.3h" noclick="true">

					<panel grow="true" growinvis="false" width="100%" noclick="true" float="bottom" padding="0.2h">
						<instance name="statusboard_entry" index="5"/>
						<instance name="statusboard_entry" index="6"/>
						<instance name="statusboard_entry" index="7"/>
						<instance name="statusboard_entry" index="8"/>
						<instance name="statusboard_entry" index="9"/>
						<panel sticky="true" stickytoinvis="false" width="100%" height="0.3h" noclick="true" color="invisible" />
					</panel>
				</panel>
			</panel>

			<!-- Show Full Scoreboard -->
			<button
				name="Nscores_max"
				visible="true"
				y="-1.0h" x="-1h" height="1.8h" width="1.8h"
				color="invisible"
				onclicklua="local widget = GetWidget('game_scoreboard_popup', 'game')	widget:SetVisible(not widget:IsVisible())"
				interactive="false"
			>
				<widgetstate statename="up">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#007191" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
					<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/elements/maximize_btn.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="over">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#0096ec" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
					<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/maximize_btn.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="down" x="1" y="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#007191" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
					<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/maximize_btn.tga" noclick="true" />
				</widgetstate>
			</button>

			<panel width="100%" height="0.1h" noclick="true" />
		</panel>
	</panel>

	<!-- TOP -->
	<!-- Team Icons -->
	<panel name="game_ally_display_holder" x="0" y="7.8h" width="7.45h" height="29.8h" color="invisible" noclick="1" reverse="true"
		onloadlua="
			GameUIManager.RegisterFeatureAndSection(self, 'AllyInfo',
			function(map)
				return (true)
			end,
			function()
				local displayAllies = GetCvarBool('cg_displayAllies')
				GetWidget('game_ally_display_holder', 'game'):SetVisible(displayAllies)
				GetWidget('game_top_left_ally_expand_btn', 'game'):SetVisible(not displayAllies)
			end)
		"
	>
		<instance name="team_member_icon" y="0" index="0"/>
		<instance name="team_member_icon" y="7.4h" index="1"/>
		<instance name="team_member_icon" y="14.8h" index="2"/>
		<instance name="team_member_icon" y="22.2h" index="3"/>
	</panel>

	<!-- Hero Info -->
	<panel name="game_tl_hero_info" width="29.8h" height="14.9h" color="invisible" noclick="1">
		<!-- Icon / Lvl -->
		<panel x="0.2h" y="0.2h" width="6.6h" height="6.6h" noclick="true">

			<image name="game_top_left_hero_icon" hmargin="0.25h" vmargin="0.25h" noclick="true"/>
			<panel name="game_top_left_hero_icon_bg" align="center" x="-.25h" y="-.25h" valign="center" noclick="true" width="155@" height="155%" texture="/ui/fe2/lobby/team_color.tga" color="1 1 1 1"/>
			<image name="game_top_left_hero_icon_dead" texture="/ui/legion/dead.tga" noclick="true"/>

			<!-- LvlUp Effect -->
			<panel name="game_top_left_hero_lvlup" color="1 1 1 1" texture="/ui/legion/lvl_up_glow.tga" rendermode="additive" noclick="true">
				<modelpanel
					noclick="true"
					model="effects/portrait_lvlup/portrait_emitter.mdf"
					anim="idle"
					effect="effects/portrait_lvlup/portrait_lvlup.effect"
					camerapos="-1 0 0"
					cameraangles="0 0 180"
					camerafov="55"
					depthclear="false"
					depthcompress="true"
					onshow="SetEffect('/ui/effects/portrait_lvlup/portrait_lvlup.effect');"
				/>
			</panel>

			<!-- Respawn Timer -->
			<label name="game_top_left_respawn_timer"
				width="100%" height="100%"
				textalign="center" textvalign="center"
				font="dyn_16"
				color="yellow"
				shadow="true"
				noclick="true"
			/>
			<!-- UIScript -->
			<button
				texture="/ui/common/portrait_gloss.tga"
				color="#ffffffbb"
				onclick="SelectHero();"
				onmouseoverlua="GetWidget('unit_tooltip_hero', 'game'):SetVisible(1)
								Game:SelfHover()
								SetInterfaceTargetedEntity(GetTrigger('HeroIndex'):GetLastValue())"
				onmouseoutlua="GetWidget('unit_tooltip_hero', 'game'):SetVisible(0)
								GetWidget('genericGameFloatingTip', 'game'):SetVisible(0)
								SetInterfaceTargetedEntity(-1)"
				interactive="false"
			/>

			<!-- Item catcher -->
			<!-- UIScript -->
			<panel
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
				onmouseoverlua="self:SetColor('white')"
				onmouseoutlua="self:SetColor('invisible')"
				onclick="ItemPlaceHero();"
				onrightclick="ItemPlaceHero();"
			/>

		</panel>

		<!-- Health / Mana Bars -->
		<panel x="7.2h" y="0.2h" width="12.7h" height="1.4h" color="black" noclick="true">
			<panel name="game_top_left_health_lerp" color="1 0 0 1" noclick="true"/>
			<instance name="statusbar_overlay"/>
			<panel name="game_top_left_health_bar" onload="SetVScale(GetHeight() # 'p'); DoEvent();" utile="true" vtile="true" texture="/ui/fe2/elements/bar_fog.tga" color="0 1 0 0" noclick="1" uspeed="-.2" passivechildren="true">
				<panel color="1 1 1 .2" align="right" width="0.1h" rendermode="additive"/>
				<panel color="0 0 0 .5" align="right" width="0.1h" x="0.1h"/>
			</panel>
			<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga" noclick="true"/>
			<label name="game_top_left_health_label" font="dyn_8" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" noclick="true"/>
			<panel color="invisible" onmouseoverlua="GetWidget('health_tooltip_hero', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('health_tooltip_hero', 'game'):SetVisible(0)" canclick="false" />
		</panel>
		<panel
			x="7.2h" y="1.8h" width="12.7h" height="1.4h"
			color="black"
			onmouseoverlua="GetWidget('mana_tooltip_hero', 'game'):SetVisible(1)"
			onmouseoutlua="GetWidget('mana_tooltip_hero', 'game'):SetVisible(0)"
			passivechildren="true"
			canclick="false"
		>
			<image texture="/ui/legion/behind_bar.tga" color="0 .25 .4 1"/>
			<panel name="game_top_left_mana_lerp" color="0.5 0.5 0.5 1" >
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
				<panel color="1 1 1 .2" align="right" width=".2h" rendermode="additive"/>
				<panel color="0 0 0 1" align="right" width=".15h" x="0.15h"/>
			</panel>
			<panel name="game_top_left_mana_bar" oneventlua="self:SetUScale((self:GetHeight() * 32)..'p')" onloadlua="self:SetVScale(self:GetHeight()..'p') self:DoEvent()" utile="true" vtile="true" texture="/ui/fe2/elements/bar_fog.tga" color="0 .2 1 1" noclick="1" uspeed="-.2">
				<panel color="1 1 1 .2" align="right" width=".2h" rendermode="additive"/>
			</panel>
			<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
			<label name="game_top_left_mana_label" font="dyn_8" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
		</panel>

		<!-- Hero Voip Mic -->
		<panel name="game_top_left_hero_voip" noclick="1" x="0.4h" y="0.4h" width="7h" height="7h" color="invisible" visible="0">
			<modelpanel
				visible="1"
				width="100%"
				height="100%"
				noclick="true"
				model="/ui/common/models/arcade_text/invis.mdf"
				anim="idle"
				camerapos="-5 200 25"
				cameraangles="0 0 180"
				camerafov="10"
				cameranear="1"
				carmerafar="5000"
				depthclear="false"
				depthcompress="true"
				sunazimuth="-90"
				sunaltitude="180"
				suncolor="2 2 2"
				onshow="SetAnim('idle'); SetEffect('/shared/effects/talking.effect');"
			/>
		</panel>

		<panel x="2.7h" y="6.1h" width="1.75h" height="1.86h" color="black" noclick="1" />
		<image texture="/ui/common/small_portrait_window_iron.tga" noclick="1"
			   watch="PlayerMastery"
			   ontriggerlua="self:SetTexture('/ui/common/small_portrait_window_'..param0..'.tga')" />

		<!-- Collapse Team Icons Button -->
		<panel noclick="1"
			onloadlua="GameUIManager.RegisterSection(self, 'AllyInfo')"
		>
			<panel x="2.6h" y="5.8h" width="1.86h" height="1.86h" color="invisible">
				<!-- UIScript -->
				<button
					color="invisible"
					onclick="ToggleAllies();"
					interactive="false"
				>
					<widgetstate statename="up">
						<image texture="/ui/common/ally_hide_up.tga"  />
					</widgetstate>
					<widgetstate statename="over">
						<image texture="/ui/common/ally_hide_over.tga" />
					</widgetstate>
					<widgetstate statename="down">
						<image y="1" x="1" texture="/ui/common/ally_hide_up.tga" />
					</widgetstate>
				</button>
			</panel>

			<!-- Expand Team Icons Button -->
			<panel name="game_top_left_ally_expand_btn" x="2.6h" y="5.8h" width="1.86h" height="1.86h" color="invisible" >
				<!-- UIScript -->
				<button
					color="invisible"
					onclick="ToggleAllies();"
					interactive="false"
				>
					<widgetstate statename="up">
						<image texture="/ui/common/ally_show_up.tga"  />
					</widgetstate>
					<widgetstate statename="over">
						<image texture="/ui/common/ally_show_over.tga" />
					</widgetstate>
					<widgetstate statename="down">
						<image y="1" x="1" texture="/ui/common/ally_show_up.tga" />
					</widgetstate>
				</button>
			</panel>
		</panel>

		<!-- Buyback Button -->
		<panel name="game_top_left_buyback_parent" x="7.2h" y="0.2h" width="12.8h" height="3.1h" color="0 0 0 .7" >
			<!-- UIScript -->
			<instance
				name="button2"
				width="-1.0h"
				height="2h"
				align="center"
				valign="center"
				borderthickness="0.6h"
				button_name="dev_buyback"
				font="dyn_10"
				onclicklua=
					"
					if Input.IsAltDown() then
						SendGamePing('alt_buyback_info')
					else
						self:UICmd('BuyBack()')
					end
					"
				interactive="false"
				playsounds="false"
			/>
			<label name="game_top_left_buyback_exhausted_label" width="57%" height="100%" font="dyn_10" shadow="true" shadowoffset="2" color="white" textvalign="center" textalign="right" noclick="1" content="game_label_buy_back" />
			<label name="game_top_left_buyback_label" x="61%" width="40%" height="100%" font="dyn_10" shadow="true" shadowoffset="2" color="yellow" textvalign="center" textalign="left" noclick="1" />
		</panel>

		<!-- Stats Icon -->
		<panel valign="top" align="left" height="1.7h" width="1.7h" color="invisible" onmouseoverlua="GetWidget('attribute_tooltip', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('attribute_tooltip', 'game'):SetVisible(0)" canclick="false">
			<image x="0.3h" y="0.25h" width="1.2h" height="1.2h" texture="/ui/elements/options_icon_stats.tga" noclick="1"/>
		</panel>

		<!-- Level -->
		<panel
			x="5.0h"
			y="5.1h"
			height="1.9h"
			width="1.9h"
			color="invisible"
			passivechildren="true"
			noclick="1"
		>
			<image name="game_top_left_hero_level_ballcover" visible="0" x="0.3h" y="0.25h" width="1.2h" height="1.2h" texture="/triggers/custom_maps/soccer/ball/mapicon.tga" noclick="1"/>
			<label name="game_top_left_hero_level_label" width="100%" textalign="center" height="100%" textvalign="center" font="dyn_9" color="yellow" shadow="true" />
		</panel>

		<instance name="fastshare"/>
	</panel>

	<!-- Legion Health -->
	<panel name="game_base_health_header_0" watch="GameInfo" ontriggerlua="self:SetVisible(param0 ~= 'soccer')" x="-10.0h" y="2.2h" height="7.45h" width="14.9h" align="center" noclick="1" color="invisible" >
		<panel color="invisible" y="0.7h" x="0.9h" align="left" width="8.0h" height="1.5h" noclick="1">
			<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1" noclick="1"/>
			<panel name="game_base_health_backer_0" color="0 0 0 0" noclick="1">
				<panel name="game_base_health_bar_0" color="0 1 0 0" noclick="1">
					<panel color="1 1 1 .1" align="right" width=".1h" rendermode="additive" noclick="1"/>
				</panel>
				<instance name="statusbar_overlay"/>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga" noclick="1"/>
			</panel>
		</panel>
		<image texture="/ui/common/legion_health.tga" noclick="1" />
		<!-- dupe of above panel, sorry, this pretty much needs to sit over the image -->
		<panel color="invisible" y="0.7h" x="0.9h" align="left" width="8.0h" height="1.5h" noclick="1">
			<label name="game_base_health_percent_0" y="0.2h" textalign="center" textvalign="center" font="dyn_8" color="white" outline="1" noclick="1"/>
		</panel>
	</panel>

	<!-- Hellbourne Health -->
	<panel name="game_base_health_header_1" watch="GameInfo" ontriggerlua="self:SetVisible(param0 ~= 'soccer')" x="10.0h" y="2.2h" height="7.45h" width="14.9h" align="center" noclick="1" color="invisible" >
		<panel color="invisible" y="0.7h" x="-0.9h" align="right" width="8.0h" height="1.5h" noclick="1">
			<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1" noclick="1"/>
			<panel name="game_base_health_backer_1" color="0 0 0 0" noclick="1">
				<panel name="game_base_health_bar_1" color="0 1 0 0" noclick="1">
					<panel color="1 1 1 .1" align="right" width=".1h" rendermode="additive" noclick="1"/>
				</panel>
				<instance name="statusbar_overlay"/>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga" noclick="1"/>
			</panel>
		</panel>
		<image texture="/ui/common/hellbourne_health.tga" noclick="1" />
		<!-- dupe of above panel, sorry, this pretty much needs to sit over the image -->
		<panel color="invisible" y="0.7h" x="-0.9h" align="right" width="8.0h" height="1.5h" noclick="1">
			<label name="game_base_health_percent_1" y="0.2h" textalign="center" textvalign="center" font="dyn_8" color="white" outline="1" noclick="1"/>
		</panel>
	</panel>

	<instance name="gameScoreHeader" index="0" flagIndex="1" innerAlign="right" outerAlign="left" innerXMod="-" outerXMod="" barColor="#388ecb" bgColor="#041925"/>
	<instance name="gameScoreHeader" index="1" flagIndex="0" innerAlign="left" outerAlign="right" innerXMod="" outerXMod="-" hflip="true" barColor="#f1c100" bgColor="#1e1c02"/>

	<!-- Clock -->
	<panel name="game_top_clock" watch="GameInfo" ontriggerlua="self:SetVisible(param0 ~= 'soccer')" y="0" width="59.6h" height="7.45h" align="center" valign="top" noclick="1">

		<panel y="-7.2h" width="18.0h" height="18.0h" align="center" noclick="1">
			<image name="game_clock_face" width="50%" height="50%" align="center" valign="center" texture="/ui/common/clockface.tga" rotation="0" canclick="false"/>
		</panel>

		<image name="game_clock_texture" texture="/ui/common/clockframe.tga" noclick="1" />

		<!-- Clock Day/Night Glow Effect
		<panel y="-7.6h" x="-0.05h" width="20.0h" height="20.0h" align="center" noclick="1">
			<modelpanel name="game_clock_effect"
				noclick="true"
				model="/shared/models/invis.mdf"
				effect="effects/clock_day.effect"
				camerapos="0 10 0"
				cameraangles="0 0 180"
				camerafov="55"
				depthclear="false"
				depthcompress="true"
			/>
		</panel>
		 -->

		<!-- Hero K/D/A -->
		<panel x="-9.8h" y="-0.1h" width="11.0h" height="1.4h" align="center" color="invisible" noclick="1">
			<label x="0.3h" width="40%" height="100%" textalign="left" textvalign="center" font="dyn_9" color="white" content="game_label_hero_kd_hero" noclick="1" />
			<label name="game_player_score_1" width="75%" height="100%" align="right" textalign="center" textvalign="center" font="dyn_9" color="white" noclick="1" />
		</panel>

		<!-- Creep Kills -->
		<panel x="10.0h" y="-0.1h" width="11.0h" height="1.4h" align="center" color="invisible" noclick="1">
			<label x="0.3h" width="40%" height="100%" textalign="left" textvalign="center" font="dyn_9" color="white" content="game_label_creep_kills_creep" noclick="1"/>
			<label name="game_player_score_2" width="60%" height="100%" align="right" textalign="center" textvalign="center" font="dyn_9" color="white" noclick="1" />
		</panel>

		<!-- Team Scores -->
		<panel x="1.9h" y="5.6h" width="3.5h" height="1.4h" align="center" color="1 1 0 0" noclick="1">
			<label name="game_team_score_1" width="100%" height="100%" align="center" textalign="center" textvalign="center" font="dyn_10" color="white" noclick="1" />
		</panel>
		<panel x="-1.9h" y="5.6h" width="3.5h" height="1.4h" align="center" color="1 1 0 0" noclick="1">
			<label name="game_team_score_2" width="100%" height="100%" align="center" textalign="center" textvalign="center" font="dyn_10" color="1 1 1 1" noclick="1" />
		</panel>

		<!-- Game Time -->
		<label
			name="game_match_time_label"
			textalign="center" textvalign="top"
			height="1.6h"
			font="dyn_9"
			color="white"
			noclick="1"
		/>
        <!-- MvP Show Button -->
        <button	name="mvp_vote_show_button" visible="false" width="3h" height="3h" align="right" valign="top" color="invisible"
        watch="GamePhase"
		ontriggerlua="if tonumber(param0) ~= 7 then self:SetVisible(false) end">
            <widgetstate statename="up">
                <frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#910000" blockinput="false" noclick="true"/>
                <frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
                <image width="2h" height="2h" align="center" valign="center" color="yellow" texture="/ui/elements/star.tga" noclick="true" />
            </widgetstate>
            <widgetstate statename="over">
                <frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#dc0000" blockinput="false" noclick="true"/>
                <frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
                <image width="2h" height="2h" align="center" valign="center" color="yellow" texture="/ui/elements/star.tga" noclick="true" />
            </widgetstate>
            <widgetstate statename="down" x="1" y="1">
                <frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#910000" blockinput="false" noclick="true"/>
                <frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
                <image width="2h" height="2h" align="center" valign="center" color="yellow" texture="/ui/elements/star.tga" noclick="true" />
            </widgetstate>
        </button>
	</panel>

	<!-- soccer -->
	<panel name="game_top_soccer" watch="GameInfo" ontriggerlua="self:SetVisible(param0 == 'soccer')" width="48h" height="12h" align="center" valign="top" noclick="1">
		<image name="game_soccer_texture" texture="/ui/elements/soccer/in_game/scoreboard.tga" noclick="1"/>
		<panel x="6h" width="13h" height="3h" align="left">
			<label name="soccer_legion" content="Legion" textalign="center" textvalign="center" font="dyn_16" color="#BAC8D2" shadow="1" shadowcolor="#1C1F22" shadowoffset="1" />
		</panel>
		<panel x="-6h" width="13h" height="3h" align="right">
			<label name="soccer_hellbourne" content="Hellbourne" textalign="center" textvalign="center" font="dyn_16" color="#BAC8D2" shadow="1" shadowcolor="#1C1F22" shadowoffset="1" />
		</panel>
		<panel width="12h" height="3.5h" align="center">
			<label name="soccer_team_score1" x="-2.5h" content="0" textalign="center" textvalign="center" font="dyn_24" color="#000304" shadow="1" shadowcolor="#FEE702" shadowoffset="1" />
			<label name="soccer_score_split" content=":" textalign="center" textvalign="center" font="dyn_24" color="#000304" shadow="1" shadowcolor="#FEE702" shadowoffset="1" />
			<label name="soccer_team_score2" x="2.5h" content="0" textalign="center" textvalign="center" font="dyn_24" color="#000304" shadow="1" shadowcolor="#FEE702" shadowoffset="1" />
		</panel>
		<panel y="-1h" width="12h" height="3h" align="center" valign="center">
			<label  name="soccer_time" content="15:06" textalign="center" textvalign="center" font="dyn_15" color="#717C83" shadow="1" shadowcolor="#1C1F22" shadowoffset="1"/>
		</panel>
	</panel>

	<panel name="arcade_messages" width="100h" height="30h" y="0h" align="center" color="invisible" noclick="1">
		<modelpanel
			name="game_arcade_model_1"
			width="80h" align="center"
			visible="0"
			noclick="true"
			anim="idle"
			cameradistance="0"
			lookat="false"
			camerapos="0 1300 0"
			cameraangles="0 0 180"
			camerafov="50"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"
			sunazimuth="-90"
			sunaltitude="180"
			suncolor="4 1 1"
			scenebuffer="1"
		/>
		<modelpanel
			name="game_arcade_model_2"
			width="80h" align="center"
			visible="0"
			noclick="true"
			anim="idle"
			cameradistance="0"
			lookat="false"
			camerapos="0 1300 0"
			cameraangles="0 0 180"
			camerafov="50"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"
			sunazimuth="-90"
			sunaltitude="180"
			suncolor="1 1 1"
			scenebuffer="1"
		/>
		<modelpanel
			name="game_arcade_model_3"
			visible="0"
			noclick="true"
			anim="idle"
			cameradistance="0"
			lookat="false"
			camerapos="0 1625 0"
			cameraangles="0 0 180"
			camerafov="50"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"
			sunazimuth="-90"
			sunaltitude="180"
			suncolor="1 1 1"
			scenebuffer="1"
		/>
		<modelpanel
			name="game_arcade_model_4"
			width="80h" align="center"
			visible="0"
			noclick="true"
			anim="idle"
			cameradistance="0"
			lookat="false"
			camerapos="0 220 20"
			cameraangles="0 0 180"
			camerafov="65"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"
			sunazimuth="-90"
			sunaltitude="180"
			suncolor="1 1 1"
			scenebuffer="1"
		/>
	</panel>

	<panel valign="top" align="left" x="3h" y="12h" height="10.5h" width="45h" noclick="true" visible="true" name="KillBoard">
		<instance name="killBoardEntry" id="1" />
		<instance name="killBoardEntry" id="2" />
		<instance name="killBoardEntry" id="3" />
		<instance name="killBoardEntry" id="4" />
	</panel>

	<panel width="25h" height="6h" align="center" valign="center" color="0 0 0 0.5" noclick="true" passivechildren="true" watch="StatsStatus" ontriggerlua="
		local visible = param == 'submitting'
		local isPlayingStreaming = GetCvarBool('replay_isPlaying') and GetCvarBool('replay_v2')
		if isPlayingStreaming then
			visible = false
		end
		self:SetVisible(visible)">
		<animatedimage hmargin="10@" vmargin="10%" width="100@" height="100%" texture="/ui/elements/throb/throb.tga" noclick="true" loop="1" fps="30" onshow="StartAnim(1);" />
		<label width="-100@" align="right" font="dyn_14" textalign="center" textvalign="center" color="white" shadow="true" content="general_submitting_stats" noclick="1" />
	</panel>

	<panel width="25h" height="6h" align="center" valign="center" color="0 0 0 0.5"  noclick="true" passivechildren="true" watch="StatsStatus" ontriggerlua="
		local visible = param == 'successful'
		local isPlayingStreaming = GetCvarBool('replay_isPlaying') and GetCvarBool('replay_v2')
		if isPlayingStreaming then
			visible = false
		end
		self:SetVisible(visible)">
		<label align="right" font="dyn_14" textalign="center" textvalign="center" color="white" shadow="true" content="general_submission_success" noclick="1" />
	</panel>

	<!-- UIScript -->
	<template name="specator_kick_item">
		<panel width="100%" height="1.75h"
			visible="0"
			sticky="true" stickytoinvis="false"
			watch="MenuSpectatorInfo{index}"
			ontriggerlua="
				local kO = param0
				local onClick = function()
					self:UICmd('Kick(\''..kO..'\')')
				end
				self:SetCallback('onclick', onClick)
				self:RefreshCallbacks()

				self:SetVisible((GetAccountName() ~= param1) and (tonumber(param0) ~= -1) and (not AtoB(param3)))
			"
		>
			<!-- ## Mentor (10) - Purple | Local Spec (9) Orange | Global Spec White ## -->
			<label font="dyn_9" color="white" textvalign="center" shadow="true" noclick="true"
				watch="MenuSpectatorInfo{index}"
				ontriggerlua="
					if (AtoB(param10)) then
						self:SetColor('#E01BC6')
					elseif (AtoB(param9)) then
						self:SetColor('#FFCC00')
					else
						self:SetColor('#FFFFFF')
					end

					self:SetText(param1)
				"
			/>
			<!-- UIScript -->
			<instance name="kick_button" width="100@" height="100%" align="right" enabled="1"
				watch="MenuSpectatorInfo{index}"
				ontriggerlua="
					local kO = param0
					local onClick = function()
						self:UICmd('Kick(\''..kO..'\')')
					end
					self:SetCallback('onclick', onClick)
					self:RefreshCallbacks()

					GetWidget('game_kick_list', 'game'):DoEventN(1)
					self:SetVisible(AtoB(param9) or AtoB(param10))
				"
				onmouseoverlua="GetWidget('game_menu_tip_kick', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('game_menu_tip_kick', 'game'):SetVisible(0)"
				onhidelua="GetWidget('game_menu_tip_kick', 'game'):SetVisible(0)"
			/>

			<!-- Spec VOIP -->
			<panel x="-150@" width="100@" height="100%"  align="right" color="invisible" noclick="1">
				<image noclick="1"
					texture="/ui/common/chat.tga"
					watch="SpectatorVoice{index}"
					ontriggerlua="
						if AtoB(param1) then
							self:SetColor('red')
						elseif AtoB(param0) then
							self:SetColor('lime')
						else
							self:SetColor('white')
						end"
				/>
				<!-- UIScript -->
				<button
					color="invisible"
					interactive="false"
					watch="MenuSpectatorInfo{index}"
					ontrigger="SetOnclick('ToggleVoiceMute(' # param0 # ');');"
					onmouseoverlua="GetWidget('game_menu_tip_voice_spec', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('game_menu_tip_voice_spec', 'game'):SetVisible(0)"
				/>
			</panel>

		</panel>
	</template>

	<!-- Menu / Vote Buttons -->
	<panel name="game_dropdown_options" width="29.8h" height="7.45h" align="right" noclick="1">

		<!-- Remake Confirm -->
		<panel noclick="true" width="19h" align="right" x="-1.0h" y="-150%" visible="false" grow="true" regrow="true" name="remake_confirm"
			onevent0lua="self:SetVisible(1) self:SlideY('2.5h', 250)"
			onevent1lua="self:SlideY('-150%', 250) self:Sleep(250, function() self:SetVisible(0) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="6h"/><!-- Minheight -->
			<panel width="-1h" align="center" y="1.0h" grow="true" float="bottom" padding="0.5h" regrow="true" growinvis="false">
				<label fity="true" fitypadding="0.5h" width="100%" font="dyn_10" color="1 1 1 1" shadow="true" wrap="true" content="game_menu_remake_confirm" noclick="true"/>

				<panel height="2h" width="100%">
					<instance
						name="button2" button_name="unnamedButton6"
						width="16h" align="center"
						label="game_menu_remake_btn"
						onclicklua="CallVote('remake') GetWidget('remake_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

				<panel height="2h" width="100%">
					<instance
						name="button2" button_name="unnamedButton7"
						width="16h" align="center"
						label="general_cancel"
						onclicklua="GetWidget('remake_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

			</panel>
		</panel>

		<!-- Conceed Confirm -->
		<panel noclick="true" width="19h" align="right" x="-1.0h" y="-150%" visible="false" grow="true" regrow="true" name="concede_confirm"
			onevent0lua="self:SetVisible(1) self:SlideY('2.5h', 250)"
			onevent1lua="self:SlideY('-150%', 250) self:Sleep(250, function() self:SetVisible(0) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="6h"/><!-- Minheight -->
			<panel width="-1h" align="center" y="1.0h" grow="true" float="bottom" padding="0.5h" regrow="true" growinvis="false">
				<label fity="true" fitypadding="0.5h" width="100%" font="dyn_10" color="1 1 1 1" shadow="true" wrap="true" content="game_menu_concede_confirm" noclick="true"/>

				<panel height="2h" width="100%">
					<instance
						name="button2" button_name="unnamedButton8"
						width="16h" align="center"
						label="game_menu_concede_btn"
						onclicklua="CallVote('concede') GetWidget('concede_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

				<panel height="2h" width="100%">
					<instance
						name="button2" button_name="unnamedButton9"
						width="16h" align="center"
						label="general_cancel"
						onclicklua="GetWidget('concede_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

			</panel>
		</panel>

		<!-- Kick Player List -->
		<panel noclick="true" width="19h" align="right" x="-1.0h" y="-150%" visible="false" grow="true" regrow="true" name="game_kick_list"
			onevent0lua="self:SetVisible(true) self:SlideY('2.5h', 250)"
			onevent1lua="self:SlideY('-150%', 250) self:Sleep(250, function() self:SetVisible(0) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="2h"/><!-- Minheight -->
			<instance height="2h" y="0.25h" name="header_bar" lbl="game_menu_vote_kick" lbl_font="dyn_10" show_close="0" />
			<panel width="-1h" align="center" y="2.5h" grow="true" float="bottom" padding="0.25h" regrow="true" growinvis="false">
				<label name="game_afk_kick_menu" font="dyn_9" color="gray" fity="1" textvalign="center" textalign="center" visible="1" shadow="true" noclick="true" content="game_menu_no_afk"/>

				<instance name="kick_player_item" index="0"/>
				<instance name="kick_player_item" index="1"/>
				<instance name="kick_player_item" index="2"/>
				<instance name="kick_player_item" index="3"/>
				<instance name="kick_player_item" index="4"/>
				<instance name="kick_player_item" index="5"/>
				<instance name="kick_player_item" index="6"/>
				<instance name="kick_player_item" index="7"/>
				<instance name="kick_player_item" index="8"/>
				<instance name="kick_player_item" index="9"/>

				<panel height="2h" width="100%">
					<instance
						name="button2" button_name="unnamedButton10"
						width="9h" align="center"
						label="general_close"
						onclicklua="GetWidget('game_kick_list', 'game'):DoEventN(1)"
					/>
				</panel>
			</panel>
		</panel>

		<!-- Spec Player List -->
		<panel noclick="true" width="19h" align="right" x="-1.0h" y="-150%" visible="false" grow="true" regrow="true" name="spec_kick_list"
			onevent0lua="self:SetVisible(true) self:SlideY('2.5h', 250); GetWidget('game_menu_tip_spec', 'game'):SetVisible(0)"
			onevent1lua="self:SlideY('-300%', 250) self:Sleep(250, function() self:FadeOut(50) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="2h"/><!-- Minheight -->
			<instance height="2h" y="0.25h" name="header_bar" lbl="game_menu_vote_spec" lbl_font="dyn_10" show_close="0" />
			<panel width="-1h" align="center" y="2.5h" grow="true" float="bottom" padding="0.25h" regrow="true" growinvis="false">

				<instance name="specator_kick_item" index="0"/>
				<instance name="specator_kick_item" index="1"/>
				<instance name="specator_kick_item" index="2"/>
				<instance name="specator_kick_item" index="3"/>
				<instance name="specator_kick_item" index="4"/>
				<instance name="specator_kick_item" index="5"/>
				<instance name="specator_kick_item" index="6"/>
				<instance name="specator_kick_item" index="7"/>
				<instance name="specator_kick_item" index="8"/>
				<instance name="specator_kick_item" index="9"/>
				<instance name="specator_kick_item" index="10"/>
				<instance name="specator_kick_item" index="11"/>
				<instance name="specator_kick_item" index="12"/>
				<instance name="specator_kick_item" index="13"/>
				<instance name="specator_kick_item" index="14"/>
				<instance name="specator_kick_item" index="15"/>
				<instance name="specator_kick_item" index="16"/>
				<instance name="specator_kick_item" index="17"/>
				<instance name="specator_kick_item" index="18"/>
				<instance name="specator_kick_item" index="19"/>
				<instance name="specator_kick_item" index="20"/>
				<instance name="specator_kick_item" index="21"/>
				<instance name="specator_kick_item" index="22"/>
				<instance name="specator_kick_item" index="23"/>
				<instance name="specator_kick_item" index="24"/>
				<instance name="specator_kick_item" index="25"/>

				<panel height="2h" width="100%">
					<instance
						name="button2" button_name="unnamedButton11"
						width="9h" align="center"
						label="general_close"
						onclicklua="GetWidget('spec_kick_list', 'game'):DoEventN(1)"
					/>
				</panel>
			</panel>
		</panel>

		<panel x="-0.2h" y="0.25h" width="9.5h" height="2.0h" align="right" noclick="true">

			<!-- Menu Combobox -->
			<instance
				name="gamecontrol_combobox"
				id="menu_combobox_cover"
				width="100%"
				maxlistheight="4"
				lisbgheight="10.0h"
			/>
			<!-- Menu Combobox Cover -->
			<panel color="invisible" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="1 1 1 1" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_up.tga" noclick="true" />
			</panel>
			<panel name="menu_combobox_cover_hover" color="invisible" visible="false" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="#69ccff" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_over.tga" noclick="true" />
			</panel>
			<label x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" noclick="true" content="game_menu_menu" />
		</panel>

		<panel x="-10.0h" y="0.25h" width="9.5h" height="2.0h" align="right" noclick="true">
			<!-- Voting Combobox -->
			<instance
				name="gamecontrol_combobox"
				id="voting_combobox_cover"
				width="100%"
				maxlistheight="3"
				lisbgheight="8.0h"
				watch="ViewingReplay"
				ontriggerlua="self:SetEnabled(not AtoB(param))"
			/>
			<!-- Vote Combobox Cover -->
			<panel color="invisible" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="1 1 1 1" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_up.tga" noclick="true" />
			</panel>
			<panel name="voting_combobox_cover_hover" color="invisible" visible="false" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="#69ccff" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_over.tga" noclick="true" />
			</panel>
			<label x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" noclick="true" content="game_menu_vote" watch="ViewingReplay"
					ontriggerlua="if AtoB(param) then self:SetColor('.6 .6 .6') else self:SetColor('white') end" />
		</panel>

		<image texture="/ui/common/scores_menu_buttons.tga" noclick="true"/>
	</panel>

	<panel name="portrait_overlay" group="game_portrait_overlay" visible="true" width="88%" height="58%" y="14h" align="center" noclick="true" color="invisible">
		<portraitoverlay name="portraitoverlay" watch="PortraitOverlay" clickthru="true" onclick="SelectUnit(param);" font="dyn_12" fontOffsetX="-3" fontOffsetY="-6" interactive="false" />
	</panel>

	<!-- END TOP -->
	<!-- Chat -->
	<panel noclick="1" passivechildren="0" >
		<instance name="game_chat_window" interface="game" xoffset="7h" yoffset="-32.5h"/>
	</panel>
	<lua file="/ui/scripts/chat.lua" />

	<!-- Walkthrough panels that needs to be in the game interface -->
	<template name="walkthrough_tip_storage_entry_template">
		<panel name="walkthrough_tip_storage_entry_{id}" height="4h" noclick="0" visible="0"
			onclicklua="Game_Walkthrough.MiscTipClicked({id})"
			onmouseover="Call('walkthrough_tip_storage_entry_color_panel_{id}', 'FadeIn(150);');"
			onmouseout="Call('walkthrough_tip_storage_entry_color_panel_{id}', 'FadeOut(150);');"
		>
			<frame texture="/ui/frames/togglebox.tga" borderthickness="1.0h" color="1 1 1 1" blockinput="false" noclick="1" />
			<image name="walkthrough_tip_storage_entry_icon_{id}" x="14@" width="58@" height="58%" valign="center" noclick="true"/>

			<label name="walkthrough_tip_storage_entry_label_{id}" x="86@" textvalign="center" font="dyn_11" color=".9 .9 .9 1" shadow="true" noclick="1" blockinput="false" content="" />
			<!-- More Information -->
			<button
				x="-16@"
				width="48@" height="48%"
				align="right" valign="center"
				color="invisible"
				onclicklua="Game_Walkthrough.MiscTipClicked({id})"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/tip_mark_up.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/elements/tip_mark_over.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="down" x="1" y="1">
					<image texture="/ui/elements/tip_mark_over.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="disabled">
					<image texture="/ui/elements/tip_mark_up.tga" rendermode="grayscale" noclick="true" />
				</widgetstate>
			</button>

			<!-- Use this for Flash -->
			<panel name="walkthrough_tip_storage_entry_color_panel_{id}" noclick="true" blocksinput="false">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#177bdf82" noclick="1" blocksinput="false"/>
				<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color="#0080ff" noclick="1" blocksinput="false"/>
			</panel>

		</panel>
	</template>
	<panel name="game_walkthrough_section" color="invisible" noclick="1" visible="0">
		<panel name="game_walkthrough_tip_parent" blockinput="0" grow="1" regrow="1" growinvis="0" noclick="1" onclick="FadeOut(150);" onrightclick="FadeOut(150);" width="70h" align="center" valign="bottom" y="-21h" visible="0"
			onshow="If(game_walkthrough_tip_duration != 0, SleepWidget(game_walkthrough_tip_duration, 'FadeOut(150)'));"
		>
			<frame texture="/ui/frames/togglebox.tga" borderthickness="1.4h" color="1 1 1 1" blockinput="false" noclick="1" />
			<panel name="game_walkthrough_tip_info_parent" grow="1" regrow="1" growinvis="0" y="1.4h" width="-2.8h" align="center" noclick="1" blockinput="0" float="bottom">
				<panel grow="1" regrow="1" growinvis="0" width="100%" noclick="true" blockinput="0" >
					<panel width="11.0h" height="11.0h" valign="top">
						<image name="game_walkthrough_tip_icon" texture="$invis" noclick="1" blockinput="0"  visible="0"  />
						<frame color="invisible" bordercolor=".4 .4 .4 1" borderthickness="1" blockinput="0" noclick="1" />
					</panel>
					<panel grow="1" regrow="1" growinvis="0" width="-12.5h" align="right" noclick="1" blockinput="0" float="bottom" padding="0.3h">
						<label name="game_walkthrough_tip_icon_label" fity="true" color="#ffaa00" outline="1" font="dyn_16" textalign="left" content="" noclick="1" visible="0" blockinput="0"  />
						<label name="game_walkthrough_tip_icon_desc" fity="true" wrap="true" color="1 1 1 1" shadow="1" font="dyn_14" noclick="1" visible="0" blockinput="0"
							content=""
						/>
					</panel>
				</panel>
				<panel height="1.5h"/>
			</panel>
		</panel>

		<panel name="walkthrough_tip_storage_container" align="right" valign="bottom" x="0.5h" y="-25.0h" width="21h" float="bottom" padding="0.4h" grow="true" regrow="true" growinvis="false">
			<instance name="walkthrough_tip_storage_entry_template" id="1" />
			<instance name="walkthrough_tip_storage_entry_template" id="2" />
			<instance name="walkthrough_tip_storage_entry_template" id="3" />
			<instance name="walkthrough_tip_storage_entry_template" id="4" />
			<instance name="walkthrough_tip_storage_entry_template" id="5" />
		</panel>
	</panel>
	<!-- end of walkthrough stuff -->

	<!-- Enhanced Buff Timers -->
	<include file="ebuffplus.package"/>
	<instance name="ebuff_movf_group" x1="-12h" y1="-14.6h" x2="12h" y2="-19.8h" />

	<!-- Shop / Obsv -->
	<childinterface file="game_shop_v3.interface" />
	<!-- Doesn't exist yet
		<include file="game_observatory.package"/>
	-->

	<!-- BOTTOM CENTER -->
	<panel name="game_bottom_center" x="-0.4h" width="119.2h" height="29.8h" align="center" valign="bottom" color="invisible" noclick="1">

		<panel height="12.8h" width="30h" valign="bottom" align="center" color="black" noclick="1"/>

		<!-- Health -->
		<panel name="bottom_center_health_mana" noclick="1" >
			<panel color="black" x="3.9h" y="-0.25h" width="26.7h" height="5h" align="center" valign="bottom" noclick="1" />
			<panel
				x="3.9h"
				y="-3.0h"
				width="26.6h"
				height="1.9h"
				align="center"
				valign="bottom"
				color="0 0 0 .8"
				watch="ActiveHealth"
				ontriggerlua="self:SetVisible(tonumber(param1) > 0)"
				onmouseoverlua="GetWidget('health_tooltip', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('health_tooltip', 'game'):SetVisible(0)"
				onclicklua="if Input.IsAltDown() then SendGamePing('alt_health') end"
				passivechildren="true"
			>
				<panel color="0 0 0 .5"/>
				<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1"/>
				<panel name="game_center_health_lerp" color="0 0 0 0">
					<panel color="1 0 0 1" noclick="1" />
					<instance name="statusbar_overlay"/>
				</panel>
				<panel name="game_center_health_bar_backer" color="0 0 0 0">
					<instance name="statusbar_overlay"/>
					<image name="game_center_health_bar" onloadlua="self:SetVScale(self:GetHeight()..'p') self:DoEvent()" utile="true" vtile="true" texture="/ui/fe2/elements/bar_fog.tga" color=".1 1 .1 1" noclick="1" uspeed="-.2" />
					<panel color="1 1 1 .2" align="right" width=".2h" rendermode="additive"/>
					<panel color="0 0 0 .5" align="right" width=".2h" x=".15h"/>
				</panel>
				<image align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label name="game_center_health_label" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
				<label name="game_center_health_regen_label" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="right" textvalign="center" visible="1" />
			</panel>

			<!-- Mana -->
			<panel
				x="3.9h"
				y="-0.5h"
				width="26.6h"
				height="1.9h"
				align="center"
				valign="bottom"
				color="0 0 0 .5"
				onmouseoverlua="GetWidget('mana_tooltip', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('mana_tooltip', 'game'):SetVisible(0)"
				onclicklua="if Input.IsAltDown() then SendGamePing('alt_mana') end"
				passivechildren="true"
				onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'NotDevoWars', function(map) return (map ~= 'devowars') end)"
			>
				<image texture="/ui/legion/behind_bar.tga" color="0 .25 .4 1"/>
				<panel name="game_center_mana_lerp" clip="1">
					<instance name="statusbar_overlay" barimage="behind_bar2.tga" rendermode="" barcolor="0.75 0.75 0.75 1" />
					<image align="center" texture="/ui/elements/bar_highlight.tga" rendermode="additive"/>
				</panel>
				<panel name="game_center_manabar_backer" >
					<image name="game_center_mana_bar" onloadlua="self:SetVScale(self:GetHeight()..'p') self:DoEvent()" utile="true" vtile="true" texture="/ui/fe2/elements/bar_fog.tga" color="0 .2 1 1" noclick="1" uspeed="-.2" />
					<panel color="1 1 1 .2" align="right" width=".2h" rendermode="additive"/>
					<panel color="0 0 0 .6" align="right" width=".2h" x=".10h"/>
				</panel>
				<image align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label name="game_center_mana_label" y="-1" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
				<label name="game_center_mana_regen_label" y="-1" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="right" textvalign="center" visible="1" />
			</panel>
		</panel>

		<!-- Shop Indicator -->
		<panel name="item_shop_sign" visible="true" x="24.25h" y="3h" width="8h" height="16h" valign="bottom" align="center" >
			<image texture="/ui/common/item_shop_sign.tga" noclick="1" />
			<animatedimage name="animated_shop_sign" onshow="StartAnim();" height="4.5h" width="4.5h" y="1.3h" valign="top" align="center" fps="25" loop="true" loopbackframe="-1" texture="common/sign/sign.tga" />
			<!-- UIScript -->
			<button
				color="invisible"
				onmouseoverlua="GetWidget('shop_tooltip', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('shop_tooltip', 'game'):SetVisible(0)"
				onclick="Call('animated_shop_sign', 'StartAnim();'); PlaySound('/shared/sounds/ui/shop.wav'); If(ItemCursorVisible and PlayerCanShop, Sell(), ToggleShop());"
				interactive="false"
			/>
		</panel>

		<!-- Level Up Buttons -->
		<panel name="game_center_levelup_btn_holder" x="9.5h" y="15.6h" width="59.6h" height="29.8h" align="center" valign="bottom" color="invisible" noclick="1">
			<panel y="0.7h" x="4.3h" height="4.1h" width="4.1h">
				<panel valign="center" align="center" height="72%" width="72@" onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'NotDevoWars', function(map) return (map ~= 'devowars') end)" >
					<instance name="ability_button_lvlup" slot="4" />
				</panel>
			</panel>
			<panel y="0.4h" x="11.3h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@">
					<instance name="ability_button_lvlup" slot="0"/>
				</panel>
			</panel>
			<panel y="0.4h" x="18.5h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@" >
					<instance name="ability_button_lvlup" slot="1"/>
				</panel>
			</panel>
			<panel y="0.4h" x="25.5h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@">
					<instance name="ability_button_lvlup" slot="2"/>
				</panel>
			</panel>
			<panel y="0.4h" x="32.5h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@">
					<instance name="ability_button_lvlup" slot="3"/>
				</panel>
			</panel>

			<panel name="bottom_center_popups" noclick="true" onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'NoDevoWars', function(map) return (map ~= 'devowars') end)" >
				<image noclick="1" valign="bottom" onloadlua="GameUIManager.RegisterTexture(self, '/ui/common/pop_up.tga')"/>
			</panel>

			<panel name="bottom_center_popups_devo" noclick="true" onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'YesDevoWars', function(map) return (map == 'devowars') end)" >
				<image noclick="1" valign="bottom" onloadlua="GameUIManager.RegisterTexture(self, '/ui/common/pop_up_devowars.tga')"/>
			</panel>

			<!-- Popup Gear L -->
			<image x="-3.3h" y="1.75h" width="3.9h" height="3.9h" noclick="true" rotation="180" texture="/ui/common/pop_up_gear.tga"
				onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'NotDevoWars', function(map) return (map ~= 'devowars') end)"
			/>

		</panel>



		<!-- Portrait -->
		<panel x="-20.1h" y="-1.3h" width="10.3h" height="10.3h" valign="bottom" align="center">
			<image name="game_center_portrait_icon"
				onmouseldownlua="PlaySound('/shared/sounds/ui/center_view.wav') Action('PortraitCenter', 1.0)"
				onmouseluplua="Action('PortraitCenter', 0.0)"
				onmouseoverlua="GetWidget('unit_tooltip', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('unit_tooltip', 'game'):SetVisible(0)"
			/>
			<!-- UIScript -->
			<button name="game_center_portrait_button"
				color="invisible"
				onclick="SelectUnit(ActiveIndex);"
				interactive="false"
				onmouseoverlua="SetInterfaceTargetedEntity(GetTrigger('ActiveIndex'):GetLastValue())"
				onmouseoutlua="SetInterfaceTargetedEntity(-1)"
			/>
			<panel color="black" noclick="1" />
			<modelpanel name="game_center_portrait_model"
				scenebuffer="true"
				visible="1"
				noclick="true"
				model=""
				anim="portrait"
				camerapos="0 1 26"
				cameraangles="0 0 200"
				camerafov="25"
				cameranear="1"
				carmerafar="100"
				depthclear="false"
				depthcompress="true"
				sunazimuth="120"
				sunaltitude="50"
				suncolor="0.9 0.9 0.9"
				ambientcolor="0.6 0.7 0.7"
				onshow="SetAnim('portrait');"
				lookupresource="true"
				cull="false"
			/>

			<image texture="/ui/common/portrait_gloss_up.tga" color="1 1 1 .8" rendermode="additive" noclick="true" />
			<panel name="game_center_portrait_glow" noclick="1" visible="0"
				x="0"
				y="0"
				color="1 .6 0 1"
				texture="/ui/legion/lvl_up_glow.tga"
				rendermode="additive"
			>
				<modelpanel
					noclick="true"
					model="effects/portrait_lvlup/portrait_emitter.mdf"
					anim="idle"
					effect="effects/portrait_lvlup/portrait_lvlup.effect"
					camerapos="-1 10 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					camerafar="1000"
					depthclear="true"
					depthcompress="true"
					onshow="SetEffect('/ui/effects/portrait_lvlup/portrait_lvlup.effect');"
				/>
			</panel>
		</panel>

		<!-- EXP / Lifetime Bar -->
		<panel x="-20.1h" y="-0.3h" width="12.5h" height="12.5h" valign="bottom" align="center" color="invisible" noclick="1">

			<!-- exp bar section-->
			<panel name="game_center_exp_bar_backer" visible="false" noclick="true" pasivechildren="true">
				<piegraph texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color=".1 0 .3 1" value="1" noclick="true"/>
				<piegraph name="game_center_exp_bar_ring" texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color="0.7 0 1 1" value=".2" noclick="true"/>
			</panel>

			<!-- UIScript -->
			<modelpanel
				noclick="true"
				model="common/models/lvlup/lvlup.mdf"
				anim="idle"
				effect="common/models/lvlup/lvlup.effect"
				camerapos="0 1 0"
				cameraangles="0 0 180"
				cameranear="-20"
				camerafar="100"
				camerafov="19.5"
				depthclear="false"
				depthcompress="true"
				visible="false"
				watch="EventActiveLevelup"
				ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/lvlup/lvlup.effect'); SleepWidget(1000, 'SetVisible(false);');"
			/>

			<!-- lifetime bar section-->
			<panel name="game_center_life_bar_backer" visible="false" noclick="true" passivechildren="true">
				<piegraph texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color=".2 .2 .1 1" value="1" noclick="true"/>
				<piegraph name="game_center_life_bar_ring" texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color="#e5df2f" value=".2" noclick="true"/>
				<label name="game_center_life_bar_label" width="100%" height="100%" valign="center" textalign="center" textvalign="center" font="dyn_14" color="white" outline="true" shadowoffset="2" />
			</panel>
		</panel>

		<!-- Detailed Stats Background -->
		<panel x="-28.7h" y="4.7h" width="15.65h" height="15.65h" align="center" valign="bottom" color="1 1 1 1" float="bottom" padding="0.3h" texture="/ui/common/stat_background_legacy.tga" noclick="1"/>

		<!-- Large Gear -->
		<image name="game_center_large_gear" x="-20.23h" y="5.3h" width="23.8h" height="23.8h" align="center" valign="bottom" texture="/ui/common/gear_large.tga" rotation="30" noclick="true"/>

		<!-- Detail Stats -->
		<panel x="-28.8h" y="4.7h" width="15.65h" height="15.65h" align="center" valign="bottom" color="invisible" float="bottom" padding="0.3h" noclick="1">
			<!-- Damage -->
			<panel name="game_center_damage" y="0.9h" x="0.4h" height="2.0h" width="10.0h" onmouseoverlua="GetWidget('attack_tooltip', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('attack_tooltip', 'game'):SetVisible(0)" passivechildren="true" canclick="false">
				<image width="2.0h" height="2.0h" texture="/ui/common/damage_icon.tga"/>
				<label name="game_center_damage_label" width="-2.0h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="center" />
			</panel>
			<!-- Movement Speed -->
			<panel name="game_center_speed" height="2.0h" width="10.0h" onmouseoverlua="GetWidget('movement_tooltip', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('movement_tooltip', 'game'):SetVisible(0)" passivechildren="true" canclick="false">
				<image width="2.0h" height="2.0h" texture="/ui/common/move_speed_icon.tga"/>
				<label name="game_center_speed_label" width="-2.0h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="center" />
			</panel>
			<!-- Armor -->
			<panel height="2.0h" width="10.0h" onmouseoverlua="GetWidget('defense_tooltip', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('defense_tooltip', 'game'):SetVisible(0)" passivechildren="true" canclick="false">
				<image name="game_center_armor_img" width="2.0h" height="2.0h" texture="/ui/common/armor_icon.tga"/>
				<label name="game_center_armor_label" width="-2.0h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="center" />
			</panel>
			<!-- Attributes -->
			<panel name="game_center_att_parent" height="2.0h" width="10.0h" color="invisible" float="right" onmouseoverlua="GetWidget('attribute_tooltip', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('attribute_tooltip', 'game'):SetVisible(0)" passivechildren="true" canclick="false">
				<image name="game_center_att_img" width="2.0h" height="2.0h" texture="/ui/common/plus_icon.tga"/>
				<label name="game_center_att_label" width="-2.0h" height="100%" font="dyn_9" color="white" outline="1" textalign="left" textvalign="center" />
			</panel>
		</panel>

		<!-- Hero Name -->
		<panel x="-27.0h" y="-11.4h" width="19.0h" height="2.2h" align="center" valign="bottom" color="0 0 0 1" noclick="true" passivechildren="true">
			<label name="game_center_name_label" x="0.5h" font="dyn_12" color="white" height="100%" textalign="left" textvalign="center" />
		</panel>

		<!-- Error Messages -->
		<textbuffer name="game_center_error_messages"
			x="4.5h"
			y="-18.75h"
			width="63h"
			height="7h"
			align="center"
			valign="bottom"
			textalign="center"
			font="dyn_14"
			fadecolor="white"
			fadetime="5000"
			color="invisible"
			textcolor="#F0E68C"
			shadow="true"
			shadowcolor="black"
			shadowoffset="2"
			wrap="false"
			anchorbottom="true"
			usesmileys="false"
			usescrollbar="false"
			noclick="true"
			maxlines="3"
		/>

		<!-- Ward Slot -->
		<panel name="game_ward_slot" x="34h" y="-2.25h" width="6h" height="12h" align="center" valign="bottom" noclick="1"
			watch="ActiveCourier"
			ontriggerlua="self:SetVisible(not AtoB(param))"
		>
				<panel noclick="1" x="0.5h" y="-1.1h">
					<!-- Black Behind Bar -->
					<panel noclick="1" color="black" width="7.3h" height="5h" y="3.2h" align="right" x="-0.7h" />
					<!-- Left Ward -->
					<panel noclick="1" width="3.15h" height="3.15h" x="-3.30h" y="-0.7h" align="center" valign="center" >
						<instance name="inventory_button" slot="63" texture="/ui/common/empty_ward.tga" />
					</panel>
					<!-- Right Ward -->
					<panel noclick="1" width="3.15h" height="3.15h" x="0.35h" y="-0.7h" align="center" valign="center" >
						<instance name="inventory_button" slot="64" texture="/ui/common/empty_ward.tga" />
					</panel>
				</panel>
			<image width="90i" height="90i" x="0.2h" y="1.0h" valign="" align="right" texture="/ui/common/ward_slider.tga" noclick="1" />
		</panel>

		<!-- Inventory -->
		<panel name="inventory" x="28.4h" y="-0.7h" width="16.0h" height="13.4h" align="center" valign="bottom" color="invisible" noclick="1">
			<!-- Gold Amt / Shop Button -->
			<panel name="shop_button" width="8.4h" height="2.8h" color="0 0 0 1">
				<label name="game_center_gold_label" y="0.3h" x="2.3h" height="100%" align="left" textalign="left" textvalign="center" font="dyn_9" color="white" noclick="true" />
				<!-- UIScript -->
				<button
					color="invisible"
					onmouseoverlua="GetWidget('shop_tooltip_gold_report', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('shop_tooltip_gold_report', 'game'):SetVisible(0)"
					onclicklua="PlaySound('/shared/sounds/ui/shop.wav')
								if Input.IsAltDown() then
									SendGamePing('alt_gold')
								else
									local cmd = 'If(ItemCursorVisible and PlayerCanShop, Sell(), ToggleShop());' self:UICmd(cmd)
								end"
					interactive="false"
				/>
			</panel>

			<instance name="simple_tooltip" tip_id="shop_tooltip" x="6.65h" y="-7.5h" width="13.0h" height="2.8h" color="1 1 1 1" align="right" label="game_button_open_close_shop" visible="0"/>
		</panel>

		<!-- Backpack -->
		<panel height="50%" noclick="1" valign="bottom"
			onloadlua="
				GameUIManager.RegisterFeatureAndSection(self, 'Inventory',
				function(map)
					return (map ~= 'soccer')
				end,
				nil,
				function()
					GetWidget('bottom_center_inventory_cover', 'game'):SetVisible(1)
				end
				)
			"
		>
			<panel x="79h" y="3.7h" width="17h" height="12h" color="black" />

			<panel x="67.14%" y="27.34%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="48"/>
			</panel>
			<panel x="71.73%" y="27.34%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="49"/>
			</panel>
			<panel x="76.32%" y="27.34%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="50"/>
			</panel>

			<panel x="67.14%" y="63.67%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="51"/>
			</panel>
			<panel x="71.73%" y="63.67%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="52"/>
			</panel>
			<panel x="76.32%" y="63.67%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="53"/>
			</panel>
		</panel>

		<!-- Center Framing -->

		<panel noclick="1">
			<panel name="bottom_center_panel" noclick="true" onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'NoDevoWars', function(map) return (map ~= 'devowars') end)" >
				<image height="50%" noclick="true" valign="bottom" onloadlua="GameUIManager.RegisterTexture(self, '/ui/common/bot_center_legacy.tga')"/>
			</panel>

			<panel name="bottom_center_covers" color="invisible" y="0h" noclick="true">
				<image name="bottom_center_levelcover" noclick="true" valign="center" align="center" texture="/ui/common/level_cover.tga" height="7h" width="7h"
					x="-17.6h"
					y="2.7h"
				/>
				<image name="bottom_center_goldcover" noclick="true" valign="center" align="right" texture="/ui/common/gold_cover.tga" height="3.5h" width="14.8h"
					x="-29.0h"
					y="2.3h"
				/>
			</panel>

			<panel name="bottom_center_panel_devo" noclick="true" onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'YesDevoWars', function(map) return (map == 'devowars') end)" >
				<image height="50%" noclick="true" valign="bottom" onloadlua="GameUIManager.RegisterTexture(self, '/ui/common/bot_center_devowars.tga')"/>
			</panel>
		</panel>

		<!-- UIScript -->
		<animatedimage watch="EventPlayerGold" ontrigger="StartAnim();" name="animated_gold"  onshow="StartAnim();" height="6h" width="3h" y="13.3h" x="21.2h" valign="top" align="center" fps="30" loop="true" startframe="5" numframes="-1" loopbackframe="-1" texture="common/gold/gold.tga" noclick="true" />

		<!-- Inventory Cover -->
		<panel name="bottom_center_inventory_cover" x="35.0h" y="3.8h" width="29.8h" height="14.9h" align="center" valign="bottom" noclick="true" watch="ActiveHasInventory" ontriggerlua="self:SetVisible((not AtoB(param)) or (not GameUIManager.FeatureEnabled('Inventory')))">
			<image name="game_inventory_cover" texture="/ui/common/inventory_cover.tga" noclick="true" />
			<panel width="54%" height="70%" />
			<panel name="game_soccer_attribute" noclick="1">
			<instance
				name="abilities_frame_soccerattribute"
				slot="4"
				width="12h"
				height="12h"
				x="1.96h"
				y="-0.65h"
			/>
			</panel>
		</panel>

		<!-- Level Indicator-->
		<panel x="-17.4h" y="-10.6h" height="2.9h" width="2.9h" valign="bottom" align="center" color="invisible" passivechildren="true" onmouseoverlua="GetWidget('experience_tooltip', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('experience_tooltip', 'game'):SetVisible(0)">
			<label name="game_center_level_label" width="100%" height="100%" textalign="center" textvalign="center" font="dyn_12" color="yellow" shadow="true" />
		</panel>

		<!-- Primary Icon -->
		<panel
			x="32.75h"
			y="0.4h"
			height="3.7h"
			width="3.7h"
			valign="bottom"
			color="invisible"
			onmouseoverlua="GetWidget('attribute2_tooltip', 'game'):SetVisible(1)"
			onmouseoutlua="GetWidget('attribute2_tooltip', 'game'):SetVisible(0)"
			passivechildren="true"
			canclick="false"
		>
			<image watch="ActiveAttributeInfo" ontriggerlua="self:SetTexture('/ui/common/primary_' .. param11 .. '.tga');" rendermode="normal" />
		</panel>

		<!-- primary icon cover, we use this so the below mouseover/out works nicely when swapping between things -->
		<!-- quite possibly deprecated or we could do this better -->
		<image
			x="32.75h"
			y="0.4h"
			height="3.7h"
			width="3.7h"
			valign="bottom"
			color="invisible"
			passivechildren="true"
			watch="ActiveHasAttributes"
			ontriggerlua="
				self:SetVisible(not AtoB(param0))
			"
			texture="/ui/common/primary_none.tga"
		/>

		<!-- Alt Courier Button -->
		<panel
			x="32.75h"
			y="0.4h"
			width="3.7h"
			height="3.7h"
			valign="bottom"
			visible="false"

		>
			<button
				texture="/ui/common/alt_courier.tga"
				onmouseoverlua="GetWidget('alt_courier_select_tip', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('alt_courier_select_tip', 'game'):SetVisible(0)"
				onclicklua="GetWidget('altcourier_select', 'game'):DoEventN(0)"
				interactive="false"
				enabled="true"
			/>
			<animatedimage onshow="StartAnim();" x="-2%" height="42@" width="42%" valign="center" align="center" fps="30" loop="true" texture="common/alt_courier/AltCourier.tga" noclick="true" />
		</panel>

		<!-- Abilities -->
		<panel x="3.9h" y="-6.9h" width="33.0h" height="8.0h" align="center" valign="bottom" noclick="1"
			onloadlua="GameUIManager.RegisterSection(self, 'DefaultAbilities')"
		>

			<panel name="panel_abilities" align="center" padding="0" noclick="1">

				<panel float="right" width="11.0h" height="8.0h" grow="1" regrow="1" growinvis="0" align="center" noclick="true"
						onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'NotDevoWars', function(map) return (map ~= 'devowars') end)" >
					<instance name="ability_frame_single" slot="0"/>
					<instance name="ability_frame_single_plus_one" slot="0" slot_a="0" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="0" slot_a="0" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="0" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="0" slot_a="5" slot_b="6" />

					<instance name="ability_frame_single" slot="1"/>
					<instance name="ability_frame_single_plus_one" slot="1" slot_a="1" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="1" slot_a="1" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="1" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="1" slot_a="5" slot_b="6" />

					<instance name="ability_frame_single" slot="2"/>
					<instance name="ability_frame_single_plus_one" slot="2" slot_a="2" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="2" slot_a="2" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="2" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="2" slot_a="5" slot_b="6" />

					<instance name="ability_frame_single" slot="3"/>
					<instance name="ability_frame_single_plus_one" slot="3" slot_a="3" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="3" slot_a="3" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="3" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="3" slot_a="5" slot_b="6" />
				</panel>

				<panel float="right" width="11.0h" height="8.0h" x="2h" y="2.3h" grow="1" regrow="1" growinvis="0" align="center" noclick="true"
						onloadlua="GameUIManager.RegisterFeatureAndSection(self, 'YesDevoWars', function(map) return (map == 'devowars') end)" >
					<instance name="ability_frame_single_devowars" slot="4"/>
				</panel>

			</panel>

		</panel>

		<!-- Ability Selection Toggle -->
		<panel x="-13.7h" y="-9.8h" width="4.2h" height="4.2h" align="center" valign="bottom"
			onloadlua="GameUIManager.RegisterSection(self, 'LevelupButtons')"
		>
			<panel x="1.0h" y="1.0h" width="1.8h" height="1.8h" color="black">
				<button
					x="-0.15h" y="0"
					align="center"
					valign="center"
					width="1.4h"
					height="1.4h"
					color="invisible"
					numstates="2"
					cvar="cg_displayLevelup"
					onclicklua="PlaySound('/shared/sounds/ui/popup.wav')"
					interactive="false"
				>

				<widgetstate statename="up">
					<image texture="/ui/common/ability_toggle_up.tga"  />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/common/ability_toggle_up_over.tga" />
				</widgetstate>
				<widgetstate statename="down">
					<image y="1" x="1" texture="/ui/common/ability_toggle_up_over.tga" />
				</widgetstate>

				<widgetstate statename="up2">
					<image texture="/ui/common/ability_toggle_down.tga" />
				</widgetstate>
				<widgetstate statename="over2">
					<image texture="/ui/common/ability_toggle_down_over.tga" />
				</widgetstate>
				<widgetstate statename="down2">
					<image y="1" x="1" texture="/ui/common/ability_toggle_down_over.tga" />
				</widgetstate>


				</button>
			</panel>
			<panel x="1.0h" y="1.0h" width="1.8h" height="1.8h" color="black" watch="ActiveLevel" ontriggerlua="self:SetVisible(tonumber(param1) > 0);">
				<label name="attribute_level_label" x="-0.1h" y="-0.1h" width="100%" height="100%" textalign="center" textvalign="center" font="dyn_10" watch="ActiveLevel" color="yellow" shadow="true" ontriggerlua="self:SetText(param1);" noclick="true"/>
			</panel>
			<image texture="/ui/common/ability_toggle.tga" noclick="1" />
		</panel>

	</panel>
	<!-- END BOTTOM CENTER -->

	<!-- BOTTOM LEFT -->
	<!-- Attack Modifiers -->
	<panel name="attack_modifiers_left" group="game_attack_modifiers"  x="0.6h" y="-26.5h" width="23.0h" height="3.2h" align="left"  valign="bottom" float="right" padding="0.5h" color="invisible"  noclick="true" visible="1">
		<instance name="attack_modifier" index="0"/>
		<instance name="attack_modifier" index="1"/>
		<instance name="attack_modifier" index="2"/>
		<instance name="attack_modifier" index="3"/>
		<instance name="attack_modifier" index="4"/>
		<instance name="attack_modifier" index="5"/>
		<instance name="attack_modifier" index="6"/>
		<instance name="attack_modifier" index="7"/>
	</panel>

	<panel name="attack_modifiers_right"  group="game_attack_modifiers" x="-6.8h" y="-26.5h" width="23.0h"  height="3.2h" align="right" valign="bottom" float="right" padding="0.5h"  color="invisible" noclick="true" visible="0">
		<instance name="attack_modifier" index="7"/>
		<instance name="attack_modifier" index="6"/>
		<instance name="attack_modifier" index="5"/>
		<instance name="attack_modifier" index="4"/>
		<instance name="attack_modifier" index="3"/>
		<instance name="attack_modifier" index="2"/>
		<instance name="attack_modifier" index="1"/>
		<instance name="attack_modifier" index="0"/>
	</panel>

	<!-- Lag indicator -->
	<image name="game_lag_indicator" width="5h" height="5h" align="left" valign="center" texture="/ui/elements/disconnect.tga" watch="Lag" ontriggerlua="self:SetVisible(AtoB(param0))" visible="false" />

	<!-- Map Left -->
	<!-- UIScript -->
	<!-- Minimap radial menu, it will be left/right aligned when it's opened depending on the minimap position -->
	<instance name="radial_minimap" />

	<panel name="mini_map_left" group="game_mini_map" visible="true" width="29.8h" height="29.8h" align="left" valign="bottom" noclick="true">
		<panel x="0.5h" y="-0.5h" width="23.2h" height="23.2h" align="left" valign="bottom" clip="true">
			<map hoversize="0.5" outlinesize="0.19h" width="23.2h" height="23.2h" name="minimap" texture="!minimap_texture" watch="Minimap" onclick="If(MinimapClick(param0, param1), BreakDrag());" onrightclick="If(MinimapRightClick(param0, param1), BreakDrag());"/>
		</panel>
		<image texture="/ui/common/bot_left.tga" valign="bottom" noclick="1"/>
		<panel color="invisible" x="0.35h" y="4.6h" height="2.1h" width="2.1h" >
			<button noclick="1" cvar="cg_unitPlayerColors" numstates="2" color="invisible" interactive="false">
				<widgetstate statename="up" >
					<image texture="/ui/elements/team_colors_up.tga"/>
				</widgetstate>
				<widgetstate statename="up2" >
					<image texture="/ui/elements/team_colors_up2.tga"/>
				</widgetstate>
			</button>
			<button
				texture="/ui/elements/button_roundhl.tga"
				onclicklua="Set('cg_unitPlayerColors', not GetCvarBool('cg_unitPlayerColors')) GetWidget('teamcolors_tooltip', 'game'):SetVisible(0)"
				onmouseoverlua="GetWidget('teamcolors_tooltip', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('teamcolors_tooltip', 'game'):SetVisible(0)"
				interactive="false"
			/>

		</panel>
	</panel>

	<!-- Map Right (Alt View) -->
	<panel name="mini_map_right" group="game_mini_map" visible="false" width="29.8h" height="29.8h" align="right" valign="bottom" noclick="true">
		<!-- UIScript -->
		<panel x="-0.5h" y="-0.5h" width="23.2h" height="23.2h" align="right" valign="bottom" clip="true">
			<map hoversize="0.5" outlinesize="0.19h" width="23.2h" height="23.2h" name="minimap_altview" texture="!minimap_texture" watch="Minimap" onclick="If(MinimapClick(param0, param1), BreakDrag());" onrightclick="If(MinimapRightClick(param0, param1), BreakDrag());"/>
		</panel>
		<image hflip="1" texture="/ui/common/bot_left.tga" valign="bottom" noclick="1"/>
		<panel color="invisible" x="-0.35h" y="4.6h" align="right" height="2.1h" width="2.1h" >
			<button noclick="1" cvar="cg_unitPlayerColors" numstates="2" color="invisible" interactive="false">
				<widgetstate statename="up" >
					<image texture="/ui/elements/team_colors_up.tga"/>
				</widgetstate>
				<widgetstate statename="up2" >
					<image texture="/ui/elements/team_colors_up2.tga"/>
				</widgetstate>
			</button>
			<button
				texture="/ui/elements/button_roundhl.tga"
				onclicklua="Set('cg_unitPlayerColors', not GetCvarBool('cg_unitPlayerColors')) GetWidget('team_colors_tooltip_altview', 'game'):SetVisible(0)"
				onmouseoverlua="GetWidget('team_colors_tooltip_altview', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('team_colors_tooltip_altview', 'game'):SetVisible(0)"
				interactive="false"
			/>

		</panel>
	</panel>
	<!-- END BOTTOM LEFT -->

	<!-- Map Hover Popup
		Needs to align left or right based on mini map location selection
	-->
	<floater grow="true" regrow="1" x="0.5h" y="1.0h" align="left" valign="bottom" color="invisible" noclick="true" name="mini_map_hover" onloadlua="self:ForceToFront()" visible="false"
		watch="MinimapHover"
		ontriggerlua="
			if (GetCvarBool('ui_minimap_rightside')) then
				self:SetAlign('right')
			else
				self:SetAlign('left')
			end

			if (AtoB(param0)) then
				self:SetVisible(1)
			else
				self:SetVisible(0)
			end
		"
	>

		<panel grow="true" regrow="1" growinvis="0" color="0 0 0 .6" noclick="true">
			<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" noclick="false"/>


			<!-- Hero -->
			<panel
				visible="false"
				grow="true"
				regrow="true"
				float="bottom"
				watch="MinimapHover"
				ontriggerlua="if (AtoB(param0)) then self:SetVisible(AtoB(param1) and (not AtoB(param2))) end"
			>
				<panel grow="true" height="1.8h">
					<panel x="0.3h" y="0.3h" width="1.8h" height="1.8h">
						<image watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetTexture(param4) end" />
						<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" noclick="false"/>
					</panel>
					<label x="2.3h" y="0.1h" height="100%" font="dyn_9" textvalign="center" color="1 1 1 1" noclick="true" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetText(param3) self:SetWidth(GetStringWidth('dyn_9', param3) + self:GetXFromString('0.3h')) end" content="--" />
				</panel>
				<panel width="100%" height="0.2h" />
				<!-- HP -->
				<panel
					width="100%" height="0.5h"
					visible="true"
					watch="MinimapHover"
					ontriggerlua="
						if (AtoB(param0)) then
							self:SetVisible(tonumber(param5) > 0)
						end
					"
				>
					<panel width="-0.6h" align="center">
						<panel watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetWidth(FtoP(param5)) self:SetColor(Saturate(1 - (tonumber(param5) - 0.50) / 0.50), (tonumber(param5) + (((tonumber(param5) - 0.05) / 1.0) * 0.2)) / 0.45, 0, 1) end" color="0 1 0 0">
							<frame color="invisible" borderthickness="1" bordercolor="0 0 0 1" noclick="false"/>
						</panel>
					</panel>
				</panel>
				<!-- Mana -->
				<panel
					width="100%" height="0.5h"
					visible="true"
					watch="MinimapHover"
					ontriggerlua="if (AtoB(param0)) then self:SetVisible(tonumber(param6) > 0) end"
				>
					<panel width="-0.6h" align="center">
						<panel texture="/ui/info/mana_pos.tga" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetWidth(round(tonumber(param6)*100.0)..'%') end">
							<frame color="invisible" borderthickness="1" bordercolor="0 0 0 1" noclick="false"/>
						</panel>
					</panel>
				</panel>
				<panel width="100%" height="0.2h" />
				<!-- Inventory -->
				<panel grow="true" regrow="1" growinvis="0" height="1.7h" float="right" padding="0.1h" >
					<panel width="0.3h" height="100%"/>
					<instance name="minimap_inventory_item" param="7" />
					<instance name="minimap_inventory_item" param="8" />
					<instance name="minimap_inventory_item" param="9" />
					<instance name="minimap_inventory_item" param="10" />
					<instance name="minimap_inventory_item" param="11" />
					<instance name="minimap_inventory_item" param="12" />
					<instance name="minimap_inventory_item_hiding" param="13" />
					<panel width="0.3h" height="100%" sticky="1" stickytoinvis="0"/>
				</panel>

				<panel width="100%" height="0.2h" />
			</panel>

			<!-- Shop -->
			<panel
				visible="false"
				grow="true"
				float="bottom"
				watch="MinimapHover"
				ontriggerlua="if (AtoB(param0)) then self:SetVisible(AtoB(param2) and (not AtoB(param1))) end"
			>
				<panel grow="true" height="1.8h">
					<panel x="0.3h" y="0.3h" width="1.8h" height="1.8h">
						<image watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetTexture(param4) end" />
						<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" noclick="false"/>
					</panel>
					<label x="2.3h" y="0.1h" height="100%" font="dyn_9" textvalign="center" color="1 1 1 1" noclick="true" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetText(param3) self:SetWidth(GetStringWidth('dyn_9', param3) + self:GetXFromString('0.3h')) end" content="--" />
				</panel>
				<panel width="100%" height="0.2h" sticky="true" stickytoinvis="false" />
			</panel>

			<!-- Building -->
			<panel
				visible="false"
				grow="true"
				growinvis="false"
				float="bottom"
				watch="MinimapHover"
				ontriggerlua="if (AtoB(param0)) then self:SetVisible((not AtoB(param2)) and (not AtoB(param1))) end"
			>
				<panel grow="true" height="1.8h">
					<panel x="0.3h" y="0.3h" width="1.8h" height="1.8h">
						<image watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetTexture(param4) end" />
						<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" noclick="false"/>
					</panel>
					<label x="2.3h" y="0.1h" height="100%" font="dyn_9" textvalign="center" color="1 1 1 1" noclick="true" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetText(param3) self:SetWidth(GetStringWidth('dyn_9', param3) + self:GetXFromString('0.3h')) end" content="--" />
				</panel>
				<!-- HP -->
				<panel
					width="100%" height="0.5h"
					visible="true"
					watch="MinimapHover"
					ontriggerlua="if (AtoB(param0)) then self:SetVisible(tonumber(param5) > 0) end"
				>
					<panel width="-0.6h" align="center">
						<panel width="2" color="1 0 0 1"/>
						<panel watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetWidth(FtoP(param5)) if (not AtoB(param14)) then self:SetColor(Saturate(1 - (tonumber(param5) - 0.50) / 0.50), (tonumber(param5) + (((tonumber(param5) - 0.05) / 1.0) * 0.2)) / 0.45, 0, 1) else self:SetColor('1 1 0') end end" color="0 1 0 0">
							<frame color="invisible" borderthickness="1" bordercolor="0 0 0 1" noclick="false"/>
						</panel>
					</panel>
				</panel>
				<panel width="100%" height="0.2h" sticky="true" stickytoinvis="false" />
			</panel>
		</panel>
	</floater>

	<!-- BOTTOM RIGHT -->

	<!-- Selection Info(s)-->
	<!-- Selection Info Right -->
	<panel name="selection_info_right" group="game_selection_info" visible="true" width="29.8h" height="29.8h" align="right" valign="bottom" color="invisible" noclick="1">
		<!-- Unit Selected -->
		<panel name="game_selected_info_orders" color="invisible" visible="1" noclick="1" height="50%" valign="bottom" watch="SelectedVisible0" ontriggerlua="self:SetVisible(not AtoB(param))">

			<!-- Framing -->
			<panel name="game_botright_orders_right" align="right" valign="bottom" noclick="1" visible="1">
				<panel color="#222829" x="-50" y="0" align="right" valign="bottom" width="180i" height="11h" noclick="1" name="t1"/>
				<image texture="/ui/common/bot_right_orders.tga" noclick="1"/>
			</panel>
			<panel name="game_botright_orders_left" x="0" noclick="1" visible="0">
				<panel color="#222829" x="40i" y="0i" valign="bottom" width="180i" height="11h" noclick="1" name="t2"/>
				<image hflip="1" texture="/ui/common/bot_right_orders.tga" noclick="1"/>
			</panel>

			<panel name="game_selected_info_orders_pos" noclick="1" width="104%" height="104%" y="2i">

				<!-- empty coverup -->
				<panel name="game_info_empty" x="43.0%" y="64.5%" width="15.5%" height="31.5%">
					<image texture="/ui/common/order_coverup.tga"/>
				</panel>

				<!-- dance -->
				<panel name="game_info_dance" x="43.0%" y="64.5%" width="15.5%" height="31.5%">
					<instance name="inventory_button" slot="11" simple_tooltip_interface="game_shop_shared"/>
				</panel>

				<!-- taunt -->
				<panel name="game_info_taunt" x="60.0%" y="29.25%" width="15.5%" height="31.5%">
					<instance name="inventory_button" slot="8" simple_tooltip_interface="game_shop_shared"/>
				</panel>

				<!-- fortification -->
				<panel name="game_info_fortification" x="60.0%" y="64.5%" width="15.5%" height="31.5%">
					<instance name="inventory_button" slot="45" simple_tooltip_interface="game_shop_shared"/>
				</panel>

				<!-- Courier Status Icon -->
				<panel name="game_info_multi_unit_control" x="77.25%" y="64.5%" width="15.5%" height="31.5%" noclick="true">

					<button name="multiUnitControl" color="invisible" mouseoverdisabled="true" mouseoutdisabled="true"
						onloadlua="
							lib_button.initializeTemplate('multiUnitControl', self, 'simpleAbility')

							local lastIsOn = false

							self:RegisterWatch('AIUnitControlStatus', function(widget, unitControlOn, unitControlAvailable)
								local isOn = AtoB(unitControlOn)
								local isAvailable = AtoB(unitControlAvailable)

								widget:SetEnabled(isAvailable)
								lastIsOn = isOn

								local tipTitle		= GetWidget('multiUnitControlTipTitle', 'game')
								local tipBody		= GetWidget('multiUnitControlTipBody', 'game')
								local tipIcon		= GetWidget('multiUnitControlTipIcon', 'game')

								if isAvailable then
									if isOn then
										tipTitle:SetText(Translate('multi_unit_control_on'))
										tipBody:SetText(Translate('multi_unit_control_on_tip'))
										tipIcon:SetTexture('/ui/common/minion_automatic.tga')
									else
										tipTitle:SetText(Translate('multi_unit_control_off'))
										tipBody:SetText(Translate('multi_unit_control_off_tip'))
										tipIcon:SetTexture('/ui/common/minion_manual.tga')
									end
									tipIcon:SetRenderMode('normal')
								else
									tipTitle:SetText(Translate('multi_unit_control_disabled'))
									tipBody:SetText(Translate('multi_unit_control_disabled_tip'))
									tipIcon:SetTexture('/ui/common/minion_manual.tga')
									tipIcon:SetRenderMode('grayscale')
								end
							end)

							self:SetCallback('onmouseover', function(widget)
								if lastIsOn then
									GetWidget('multiUnitControlTip', 'game'):SetVisible(true)
								else
									GetWidget('multiUnitControlTip', 'game'):SetVisible(true)
								end
							end)

							self:SetCallback('onmouseout', function(widget)
								GetWidget('multiUnitControlTip', 'game'):SetVisible(false)
							end)

							self:SetCallback('onmouseoverdisabled', function(widget)
								GetWidget('multiUnitControlTip', 'game'):SetVisible(true)
							end)

							self:SetCallback('onmouseoutdisabled', function(widget)
								GetWidget('multiUnitControlTip', 'game'):SetVisible(false)
							end)

							self:SetCallback('onclick', function(widget)
								SetAIUnitControl(not lastIsOn)
							end)

						"

					>
						<panel name="multiUnitControlBody" align="center" valign="center">
							<image name="multiUnitControlToggleIcon"
								onloadlua="
									self:RegisterWatch('AIUnitControlStatus', function(widget, unitControlOn, unitControlAvailable)
										local isOn = AtoB(unitControlOn)
										local isAvailable = AtoB(unitControlAvailable)

										if isAvailable then
											widget:SetRenderMode('normal')
										else
											widget:SetRenderMode('grayscale')
										end

										if isAvailable then
											if isOn then
												widget:SetTexture('/ui/common/minion_automatic.tga')
											else
												widget:SetTexture('/ui/common/minion_manual.tga')
											end
										else
											widget:SetTexture('/ui/common/minion_manual.tga')
										end
									end)
								"
							/>
							<image name="multiUnitControlFrame" texture="/ui/elements/button_bevel_up.tga"/>
						</panel>
					</button>

				</panel>

				<!-- Courier Button -->
				<panel name="game_info_courier_button" x="77.0%" y="29.25%" width="15.5%" height="31.5%" noclick="true">
					<instance name="inventory_button" slot="12" simple_tooltip_interface="game_shop_shared"/>
					<!--
					<instance name="inventory_game_button"
						texture="/ui/common/courier/courier_action.tga"
						onclicklua="UseBestCourier()"
						onmouseoverlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(0)"
						button_watch="CourierControllable"
						button_ontriggerlua="self:SetEnabled(AtoB(param))"
						cover_onmouseoverlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(1)"
						cover_onmouseoutlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(0)"
						cover_watch="CourierControllable"
						cover_ontriggerlua="self:SetVisible(not AtoB(param))"
						image_watch="CourierState"
						image_ontriggerlua="self:SetTexture('/ui/common/courier/courier_state_'..param..'.tga')"
						image_watch3="CourierControllable"
						image_ontrigger3="
							if (AtoB(param)) then
								self:SetRenderMode('normal')
							else
								self:SetRenderMode('grayscale')
							end
						"
					/>
					-->
				</panel>

				<!-- courier stats bubbles -->
				<!-- status (private, dead) -->
				<!--
				<panel name="game_info_courier_private" x="93.5%" y="28%" width="5%" height="11%" noclick="true">
					<panel color="black" noclick="1" />
					<label y="5%" font="dyn_9" color="yellow" textalign="center" textvalign="center"
						onmouseoverlua="GetWidget('courier_status_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('courier_status_tooltip', 'game'):SetVisible(0)"
						watch1="CourierPrivate"
						ontrigger1="If(StringEquals(CourierState, 'Dead'),
										Split(
											SetText('D'),
											SetColor('red')
										),
										If(param,
											Split(
												SetText('P'),
												SetColor('yellow')
											),
											Split(
												SetText('S'),
												SetColor('white')
											)
										)
									);"
						watch2="CourierState"
						ontrigger2="If(StringEquals(param, 'Dead'),
										Split(
											SetText('D'),
											SetColor('red')
										),
										If(CourierPrivate,
											Split(
												SetText('P'),
												SetColor('yellow')
											),
											Split(
												SetText('S'),
												SetColor('white')
											)
										)
									);"
						canclick="false"
					/>
				</panel>
				-->

				<!-- controller (player, color) -->
				<panel name="game_info_courier_controller" x="88.5%" y="21%" width="5%" height="11%" noclick="true">
					<!--
					<panel color="black" noclick="1" />
					<panel
						color="invisible"
						watch="CourierController"
						ontriggerlua="
							if (NotEmpty(param0)) then
								self:SetColor(param0)
							else
								self:SetColor('invisible')
							end
						"
						onmouseoverlua="GetWidget('courier_controller_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('courier_controller_tooltip', 'game'):SetVisible(0)"
						canclick="false"
					/>
					-->
					<!-- <image
						texture="$invis" noclick="1"
						watch="CourierController"
						ontriggerlua="
							if (NotEmpty(param2)) then
								self:SetTexture(GetEntityIconPath(param2))
							else
								self:SetTexture('$invis')
							end
						"
					/> -->
				</panel>


			</panel>
		</panel>


		<!-- Info - Units/Heroes -->
		<!-- UIScript -->
		<panel name="game_selected_info_unit" group="selected_info" watch="SelectedVisible0 SelectedVisible1 SelectedType0" ontrigger="SetVisible(SelectedVisible0 and !SelectedVisible1 and !StringEquals(SelectedType0, 'building'));" color="invisible" noclick="1">
			<panel name="game_selected_info_unit_bg" width="24.0h" height="16.0h" align="right" valign="bottom" color="black" noclick="true"/>
			<!-- Icon -->
			<panel name="game_selected_info_unit_icon" x="-17.1h" y="-8.7h" height="6.0h" width="6.0h" align="right" valign="bottom">
				<image texture="/ui/legion/portrait_background.tga" color="1 1 1 1"/>
				<image name="game_botright_portrait_icon_0"
					onmouseldownlua="Action('PortraitCenterInfo', 1.0)" onmouseluplua="Action('PortraitCenterInfo', 0.0)"
					onmouseoverlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(1)"   onmouseoutlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(0)"
					onhidelua="Action('PortraitCenterInfo', 0.0);"
				/>
				<!-- lifetime bar section-->
				<panel name="game_botright_life_bar_backer" visible="false" noclick="true" passivechildren="true">
					<piegraph texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color=".2 .2 .1 1" value="1" noclick="true"/>
					<piegraph name="game_botright_life_bar_ring" texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color="#e5df2f" value=".2" noclick="true"/>
					<label name="game_botright_life_bar_label" width="100%" height="100%" valign="center" textalign="center" textvalign="center" font="dyn_14" color="white" shadow="true" shadowoffset="2" />
				</panel>
				<image texture="/ui/common/portrait_gloss_up.tga" color="#ffffffbb" noclick="true" />
			</panel>

			<!-- Item catcher -->
			<!-- UIScript -->
			<panel name="game_selected_info_unit_item_catcher" x="-17.1h" y="-8.7h" height="6.0h" width="6.0h"
				align="right" valign="bottom" color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
				onmouseoverlua="self:SetColor('white');"
				onmouseoutlua="self:SetColor('invisible');"
				onclick="ItemPlaceSelected(0);"
				onrightclick="ItemPlaceSelected(0);"
			/>

			<!-- Inventory -->
			<!-- To Do: Make recently purchased icon glitch on selected units properly fixed, using blanket fix for now -->
			<panel name="game_selected_info_unit_inventory" x="-1.75h" y="-0.4h" width="11.9h" height="7.9h" align="right" valign="bottom" color="invisible" noclick="true">
				<panel height="3.9h" width="3.9h" align="left" valign="top" color="invisible" noclick="true">
					<instance name="inventory_info" slot="48" texture="$invis" />
				</panel>
				<panel height="3.9h" width="3.9h" align="center" valign="top" color="invisible" noclick="true">
					<instance name="inventory_info" slot="49" texture="$invis" />
				</panel>
				<panel height="3.9h" width="3.9h" align="right" valign="top" color="invisible" noclick="true">
					<instance name="inventory_info" slot="50" texture="$invis" />
				</panel>

				<panel height="3.9h" width="3.9h" align="left" valign="bottom" color="invisible" noclick="true">
					<instance name="inventory_info" slot="51" texture="$invis" />
				</panel>
				<panel height="3.9h" width="3.9h" align="center" valign="bottom" color="invisible" noclick="true">
					<instance name="inventory_info" slot="52" texture="$invis" />
				</panel>
				<panel height="3.9h" width="3.9h" align="right" valign="bottom" color="invisible" noclick="true">
					<instance name="inventory_info" slot="53" texture="$invis" />
				</panel>
			</panel>

			<!-- Health -->
			<panel name="game_botright_health_bar_bg_0"
				x="-1.2h"
				y="-10.8h"
				width="14.5h"
				height="1.4h"
				align="right" valign="bottom"
				color="0 .2 0 0"
				onmouseoverlua="GetWidget('health_tooltip_info', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('health_tooltip_info', 'game'):SetVisible(0)"
				onclicklua="if Input.IsAltDown() then SendGamePing('alt_enemy_health') end"
				passivechildren="true"
			>
				<panel name="game_botright_health_bar_backer_0" color="0 1 0 0" noclick="1">
					<panel color="0 0 0 .85"/>
				</panel>
				<panel name="game_botright_health_bar_0" color="0 1 0 0" noclick="1">
					<panel color="1 1 1 .1" align="right" width=".1h" rendermode="additive"/>
				</panel>
				<instance name="statusbar_overlay"/>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label name="game_botright_health_label_0" font="dyn_8" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
			</panel>

			<!-- Mana -->
			<panel name="game_botright_mana_bar_bg_0"
				x="-1.2h"
				y="-9.0h"
				width="14.5h"
				height="1.4h"
				align="right" valign="bottom"
				color="0 0 .1 1"
				onmouseoverlua="GetWidget('mana_tooltip_info', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('mana_tooltip_info', 'game'):SetVisible(0)"
				onclicklua="if Input.IsAltDown() then SendGamePing('alt_enemy_mana') end"
				passivechildren="true"
			>
				<panel name="game_botright_mana_bar_0" color="0 .4 1 1">
					<instance name="statusbar_overlay"/>
				</panel>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label name="game_botright_mana_label_0" font="dyn_8" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
			</panel>

			<!-- Framing -->
			<image name="game_botright_units_right" texture="/ui/common/bot_right.tga" noclick="1" visible="1" />
			<image name="game_botright_units_left" hflip="1" texture="/ui/common/bot_right.tga" noclick="1" visible="0" />

			<!-- Ward Slot -->
			<panel name="game_botright_units_ward_slot" x="-1.75h" y="-0.4h" width="11.9h" height="7.9h" align="right" valign="bottom" color="invisible" noclick="1" >
				<panel width="5h" height="5h" x="-2.5h" valign="top" noclick="1" >
					<instance name="inventory_info_ward" slot="63" />
				</panel>
				<panel width="5h" height="5h" x="-2.5h" valign="bottom" noclick="1" >
					<instance name="inventory_info_ward" slot="64" />
				</panel>
			</panel>

			<!-- Inventory Cover -->
			<panel name="game_selected_info_unit_inventory_cover" x="-1.85h" y="-0.4h" width="11.9h" height="7.9h" align="right" valign="bottom" color="invisible" watch="SelectedHasInventory" ontriggerlua="self:SetVisible(not AtoB(param))" passivechildren="true" noclick="true">
				<image width="22.5h" height="11.25h" texture="/ui/common/inventory_cover.tga" />
			</panel>

			<!-- Level -->
			<panel name="game_botright_level_bg_0"
				x="-0.7h" y="-12.2h" height="3.6h" width="3.6h" valign="bottom" align="right"
				passivechildren="true"
				onmouseoverlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(0)"
				canclick="false"
			>
				<image name="game_botright_level_img_0" x="-0.5h" y="-0.5h" width="5.0h" height="5.0h" texture="/ui/common/ability_toggle.tga" noclick="true" />
				<piegraph width="3.0h" height="3.0h" align="center" valign="center" texture="/ui/common/exp_ring.tga"  watch="SelectedExperience" ontrigger="SetValue(param3); SetVisible(param0);" start="270" end="-90" square="1" color="0.7 0 1 1" value=".2" noclick="true"/>
				<piegraph width="2.8h" height="2.8h" align="center" valign="center" texture="/ui/common/exp_ring.tga"  watch="SelectedExperience" ontrigger="SetValue(param3); SetVisible(param0);" start="270" end="-90" square="1" color="0.7 0 1 1" value=".2" noclick="true"/>
				<label name="game_botright_level_label_0" width="100%" textalign="center" height="100%" textvalign="center" font="dyn_9" color="yellow" shadow="true" />
			</panel>

			<!-- Name -->
			<label name="game_botright_name_label_0" x="0.7h" y="-13.1h" width="-13.2h" height="1.6h" align="right" valign="bottom" textalign="left" textvalign="center" color="white" font="dyn_10" shadow="true" shadowoffset="2" noclick="true" />
			<label name="game_botright_name_label_0B" x="0.7h" y="-13.1h" width="-13.2h" height="1.6h" align="right" valign="bottom" textalign="right" textvalign="center" color="white" font="dyn_10" shadow="true" shadowoffset="2" noclick="true" />

			<!-- Selected Stats -->
			<panel name="game_selected_info_unit_stats" x="-14.5h" y="-1.0h" width="8.8h" height="6.8h" align="right" valign="bottom" color="invisible" float="bottom" padding="0.25h" noclick="true">
				<!-- Damage -->
				<panel height="1.6h" width="8h" watch="SelectedDamage" ontriggerlua="self:SetVisible(tonumber(param1) ~= 0)" onmouseoverlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(0)" passivechildren="true" canclick="false">
					<image width="100@" height="100%" texture="/ui/common/damage_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedDamage"
						ontriggerlua="self:SetText(round(tonumber(param0) + tonumber(param2)) .. ' - ' .. round(tonumber(param1) + tonumber(param2)))"
					/>
				</panel>
				<!-- Armor -->
				<panel height="1.6h" width="8h" name="game_selected_info_unit_stats_armor" onmouseoverlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(0)" passivechildren="true" canclick="false"
					onload="
						CreateFloat('game_player_info_armor', 0);
						CreateFloat('game_player_info_magicarmor', 0);
					"
				>
					<image width="100@" height="100%" texture="/ui/common/armor_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedArmor"
						ontriggerlua="self:SetText(FtoA(param1, 1)..' ^777/^999 '..FtoA(GetCvarNumber('game_player_info_magicarmor'), 1)) Set('game_player_info_armor', param1)"
						watch1="SelectedMagicArmor"
						ontrigger1lua="self:SetText(FtoA(GetCvarNumber('game_player_info_armor'), 1)..' ^777/^999 '..FtoA(param1, 1)) Set('game_player_info_magicarmor', param1)"
					/>
				</panel>
				<!-- Movement Speed -->
				<panel height="1.6h" width="8h" name="game_selected_info_unit_stats_movementspeed" watch="SelectedMoveSpeed" ontriggerlua="self:SetVisible(tonumber(param1) ~= 0)" onmouseoverlua="GetWidget('movement_tooltip_info', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('movement_tooltip_info', 'game'):SetVisible(0)" passivechildren="true" canclick="false">
					<image width="100@" height="100%" texture="/ui/common/move_speed_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedMoveSpeed"
						ontriggerlua="self:SetText(round(param1))"
					/>
				</panel>
				<!-- Attributes -->
				<panel height="1.6h" name="game_selected_info_unit_stats_attributes" color="invisible" float="right" watch="SelectedHasAttributes" ontriggerlua="self:SetVisible(AtoB(param))" onmouseoverlua="GetWidget('attribute_tooltip_info', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('attribute_tooltip_info', 'game'):SetVisible(0)" passivechildren="true" canclick="false">
					<image width="100@" height="100%" name="game_selected_info_unit_stats_attributes_image" texture="/ui/common/plus_icon.tga"/>
					<label x="15@" width="-100@" height="100%" name="game_selected_info_unit_stats_attributes_label" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedAttributes"
						ontriggerlua="self:SetText(round(param0)..' '..round(param1)..' '..round(param2))"
					/>
				</panel>
			</panel>

			<!-- Targetting Catcher -->
			<!-- UIScript -->
			<button
				color="invisible"
				watch="ToolTargetingEntity"
				ontrigger="SetVisible(param); RefreshCursor();"
				onclick="SelectUnit(SelectedIndex0);"
				interactive="false"
			/>
		</panel>


		<!-- Info - Buildings -->
		<!-- UIScript -->
		<panel name="game_selected_info_building" visible="1" color="invisible" noclick="1" watch="SelectedVisible0 SelectedVisible1 SelectedType0" ontrigger="SetVisible(SelectedVisible0 and !SelectedVisible1 and StringEquals(SelectedType0, 'building'));">

			<panel name="game_selected_info_building_bg" width="24.0h" height="12.0h" align="right" valign="bottom" color="black"/>

			<!-- Icon -->
			<panel name="game_selected_info_building_icon" x="-17.1h" y="-4.8h" height="6.0h" width="6.0h" align="right" valign="bottom">
				<image texture="/ui/legion/portrait_background.tga" color="1 1 1 1"/>
				<image name="game_botright_portrait_icon_1"
					onmouseldownlua="Action('PortraitCenterInfo', 1.0)"
					onmouseluplua="Action('PortraitCenterInfo', 0.0)"
					onmouseoverlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(0)"
					onhidelua="Action('PortraitCenterInfo', 0.0)"
				/>
				<image texture="/ui/common/portrait_gloss_up.tga" color="#ffffffbb" noclick="true" />
			</panel>

			<!-- Item catcher -->
			<!-- UIScript -->
			<panel name="game_selected_info_building_item_catcher"
				x="-17.1h" y="-4.8h" height="6.0h" width="6.0h"
				align="right" valign="bottom"
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
				onmouseoverlua="self:SetColor('white');"
				onmouseoutlua="self:SetColor('invisible');"
				onclick="ItemPlaceSelected(0);"
				onrightclick="ItemPlaceSelected(0);"
			/>

			<!-- Health -->
			<panel name="game_botright_health_bar_bg_1"
				x="-1.2h"
				y="-7.0h"
				width="14.5h"
				height="1.4h"
				align="right" valign="bottom"
				color="0 .2 0 0"
				onmouseoverlua="GetWidget('health_tooltip_info', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('health_tooltip_info', 'game'):SetVisible(0)"
				passivechildren="true"
			>
				<panel name="game_botright_health_bar_backer_1" color="0 1 0 0" noclick="1">
					<panel color="0 0 0 .85"/>
				</panel>
				<panel name="game_botright_health_bar_1" color="0 1 0 0" noclick="1">
					<panel color="1 1 1 .1" align="right" width=".1h" rendermode="additive"/>
					<instance name="statusbar_overlay"/>
				</panel>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label name="game_botright_health_label_1" font="dyn_9" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
			</panel>

			<!-- Framing -->
			<image name="game_botright_building_right" texture="/ui/common/bot_right_structure.tga" noclick="1" visible="1" height="50%" valign="bottom" />
			<image name="game_botright_building_left" hflip="1" texture="/ui/common/bot_right_structure.tga" noclick="1" visible="0" height="50%" valign="bottom" />

			<!-- Shared abilities -->
			<panel name="game_selected_info_building_shared_abilities" width="15.0h" height="8.0h" align="right" valign="bottom" color="invisible" noclick="1">
				<panel name="game_selected_info_building_shared_abilities_pos" x="0.4h" y="0.35h" width="100%" align="center" float="right" color="invisible" padding="0" noclick="0">
					<instance name="ability_frame_shared" slot="45"/>
					<instance name="ability_frame_shared" slot="46"/>
					<instance name="ability_frame_shared" slot="47"/>
				</panel>
			</panel>

			<!-- Level -->
			<panel name="game_botright_level_bg_1"
				x="-0.7h" y="-8.3h" height="3.6h" width="3.6h" valign="bottom" align="right"
				passivechildren="true"
				onmouseoverlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(0)"
			>
				<image x="-0.5h" y="-0.5h" width="5.0h" height="5.0h" texture="/ui/common/ability_toggle.tga" noclick="true" />
				<label name="game_botright_level_label_1" width="100%" textalign="center" height="100%" textvalign="center" font="dyn_9" color="yellow" shadow="true" />
			</panel>

			<!-- Name -->
			<label name="game_botright_name_label_1" x="0.7h" y="-9.3h" width="-13.2h" height="1.6h" align="right" valign="bottom" textalign="left" textvalign="center" color="white" font="dyn_10" shadow="true" shadowoffset="2" noclick="true" />
			<label name="game_botright_name_label_1B" x="0h" y="-9.3h" width="-13.2h" height="1.6h" align="right" valign="bottom" textalign="right" textvalign="center" color="white" font="dyn_10" shadow="true" shadowoffset="2" noclick="true" />

			<!-- Selected Stats -->
			<panel name="game_selected_info_building_stats" x="-14.9h" y="-0.8h" width="8.8h" height="3.3h" align="right" valign="bottom" color="invisible" float="bottom" padding="0.2h">

				<!-- Selected Damage -->
				<panel width="-0.25h" height="1.7h" align="right" watch="SelectedDamage" ontriggerlua="self:SetVisible(tonumber(param1) ~= 0)" onmouseoverlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(0)" passivechildren="true">
					<image width="1.7h" height="1.7h" texture="/ui/common/damage_icon.tga"/>
					<label width="-1.5h" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedDamage"
						ontriggerlua="
							if (tonumber(param1) == 0) then
								self:SetText('')
							elseif (tonumber(param2) == 0) then
								self:SetText(round(param0)..' - '..round(param1))
							elseif (tonumber(param2) > 0) then
								self:SetText(round(param0)..' - '..round(param1)..' ^g+'..round(param2))
							else
								self:SetText(round(param0)..' - '..round(param1)..' ^r'..round(param2))
							end
						"
					/>
				</panel>

				<!-- Selected Armor -->
				<panel width="-0.25h" height="1.7h" align="right" onmouseoverlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(0)" passivechildren="true">
					<image width="1.7h" height="1.7h" texture="/ui/common/armor_icon.tga"/>
					<label width="-1.7h" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedArmor"
						ontriggerlua="
							local diff = (tonumber(param1) - tonumber(param0))
							if (diff == 0.0) then
								self:SetText(FtoA(param0, 2))
							elseif (diff > 0) then
								self:SetText(FtoA(param0, 2)..' ^g+'..FtoA(diff, 2))
							else
								self:SetText(FtoA(param0, 2)..' ^r'..FtoA(diff, 2))
							end
						"
					/>
				</panel>

			</panel>
		</panel>

		<!-- Multiple Selected -->
		<!-- UIScript -->
		<panel watch="SelectedVisible0 SelectedVisible1" ontrigger="SetVisible(SelectedVisible0 and SelectedVisible1);" noclick="1">

			<panel name="game_selected_info_mult_backer" width="24.0h" height="13.0h" align="right" valign="bottom" color="black"/>

			<!-- Framing -->
			<image name="game_botright_mult_right" texture="/ui/common/bot_right_multi.tga" noclick="1" visible="1" valign="bottom" />
			<image name="game_botright_mult_left" hflip="1" texture="/ui/common/bot_right_multi.tga" noclick="1" visible="0" valign="bottom" />

			<panel name="game_selected_info_mult_units" x="-0.8h" y="-0.4h" width="21.4h" height="13.8h" align="right" valign="bottom" color="invisible" visible="1" float="bottom" padding="0.2h">
				<panel y="0.5h" height="4.2h" float="right" padding="0.1h">
					<instance name="multi_select_unit" index="0"/>
					<instance name="multi_select_unit" index="1"/>
					<instance name="multi_select_unit" index="2"/>
					<instance name="multi_select_unit" index="3"/>
					<instance name="multi_select_unit" index="4"/>
				</panel>

				<panel height="4.2h" float="right" padding="0.1h">
					<instance name="multi_select_unit" index="5"/>
					<instance name="multi_select_unit" index="6"/>
					<instance name="multi_select_unit" index="7"/>
					<instance name="multi_select_unit" index="8"/>
					<instance name="multi_select_unit" index="9"/>
				</panel>

				<panel height="4.2h" float="right" padding="0.1h">
					<instance name="multi_select_unit" index="10"/>
					<instance name="multi_select_unit" index="11"/>
					<instance name="multi_select_unit" index="12"/>
					<instance name="multi_select_unit" index="13"/>
					<instance name="multi_select_unit" index="14"/>
				</panel>
			</panel>
		</panel>

		<!-- Stash -->
		<instance name="stash"/>
	</panel>
	<!-- END BOTTOM RIGHT -->

	<instance name="facebookstreamingame" x="30h" y="2.5h"/>

	<template name="courierInventoryContainer">
		<panel name="gameCourierInventoryContainer{slot}" noclick="true" width="100@" height="100%" sticky="true" stickytoinvis="false"
			onloadlua="
				self:RegisterWatch('StashStatus'..{slot}, function(widget, canAccess, level, levelMax, purchasedRecently, isOnCourier)
					widget:SetVisible(AtoB(isOnCourier))
				end)
			"
		>
			<instance name="stash_button" width="100%" height="100%" prefix="courierInventoryButton" courierSlot="true" slot="{slot}" />
		</panel>
	</template>

	<panel name="courierInventory" grow="true" regrow="true" height="4h" align="right" valign="bottom" y="-18h" color="1 1 1 0.1"
		onloadlua="
			self:RegisterWatch('StashValidCourierDisplay', function(widget, ...)
				local validStashDisplay = false
				for i=1,6,1 do
					if arg[i] ~= nil and AtoB(arg[i]) then
						validStashDisplay = true
					end
				end

				widget:SetVisible(validStashDisplay)
			end)
		"
	>
		<panel name="courierInventoryBody" height="100%" grow="true" regrow="true" float="right" growinvis="false" align="right" noclick="true">
			<instance name="courierInventoryContainer" slot="0"/>
			<instance name="courierInventoryContainer" slot="1"/>
			<instance name="courierInventoryContainer" slot="2"/>
			<instance name="courierInventoryContainer" slot="3"/>
			<instance name="courierInventoryContainer" slot="4"/>
			<instance name="courierInventoryContainer" slot="5"/>
		</panel>
		<panel noclick="true">
			<panel name="courierInventoryBackSize" noclick="true" align="right" passivechildren="true" width="200@" height="100%">
	 			<image name="courierInventoryBacker" texture="/ui/elements/courier_inventory.tga" valign="center" align="right" width="383.5%" height="383.5%" x="97.5@" y="-33.5%" hflip="true"/>
			</panel>
		</panel>


	</panel>

	<!-- =========================== -->

	<!-- Animated preview for various images (typically grows on hover) -->
	<!-- UIScript -->
	<panel noclick="true" color="invisible" visible="false"
		width="1h" height="1h"
		watch="GameImagePreviewInit"
		ontriggerlua="
			self:SetWidth(param0)
			self:SetHeight(param1)
			self:UICmd('SetAbsoluteX('..param2..')')
			self:UICmd('SetAbsoluteY('..param3..')')
		"
		watch1="GameImagePreviewVis"
		ontrigger1lua="
			if (AtoB(param0)) then
				self:FadeIn(200)
			else
				self:FadeOut(200)
			end
		"
	>
		<webimage noclick="true" align="center" valign="center"
			watch="GameImagePreviewInit"
			ontriggerlua="
				if (AtoB(param4)) then
					self:SetTextureURL(param5)
				else
					self:SetTexture(param5)
				end
			"
			watch1="GameImagePreviewVis"
			ontrigger1lua="
				if ((not self:IsVisible()) or (AtoB(param0) and self:IsVisible())) then
					self:SetWidth('100%')
					self:SetHeight('100%')
				end

				if (AtoB(param0)) then
					self:ScaleWidth(param1, 200)
					self:ScaleHeight(param1, 200)
				elseif (self:IsVisible()) then
					self:ScaleWidth('100%', 200)
					self:ScaleHeight('100%', 200)
				end
			"
		/>
	</panel>

	<!-- Tooltips -->
	<instance name="command_tooltip" slot="1" header="game_command_tooltip_name_move" description="game_command_tooltip_desc_move" texture="/shared/icons/move.tga" command="OrderMove" />
	<instance name="command_tooltip" slot="2" header="game_command_tooltip_name_attack" description="game_command_tooltip_desc_attack" texture="/shared/icons/attack.tga" command="OrderAttack" />
	<instance name="command_tooltip" slot="3" header="game_command_tooltip_name_stop" description="game_command_tooltip_desc_stop" texture="/shared/icons/stop.tga" command="OrderStop" />
	<instance name="command_tooltip" slot="4" header="game_command_tooltip_name_hold" description="game_command_tooltip_desc_hold" texture="/shared/icons/hold.tga" command="OrderHold" />
	<instance name="command_tooltip" slot="5" header="game_command_tooltip_name_patrol" description="game_command_tooltip_desc_patrol" />
	<instance name="command_tooltip" slot="6" header="game_command_tooltip_name_taunt" description="game_command_tooltip_desc_taunt" />

	<panel
		name="tooltip_placement"
		x="-1.0h"
		y="-21h"
		align="right"
		valign="bottom"
		width="0"
		height="0"
		noclick="true"
		passivechildren="true"
	>

		<instance name="ability_tooltip" id="ability_tooltip0" slot="0" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip1" slot="1" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip2" slot="2" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip3" slot="3" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip4" slot="4" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip5" slot="5" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip6" slot="6" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip7" slot="7" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip8" slot="8" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip9" slot="9" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip10" slot="10" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip11" slot="11" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip12" slot="12" help="true" />

		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip0" slot="0" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip1" slot="1" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip2" slot="2" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip3" slot="3" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip4" slot="4" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip45" slot="45" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip48" slot="48" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip49" slot="49" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip50" slot="50" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip51" slot="51" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip52" slot="52" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip53" slot="53" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip63" slot="63" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip64" slot="64" help="true" />

		<instance name="ability_tooltip" id="stash_tooltip0" slot="65" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip1" slot="66" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip2" slot="67" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip3" slot="68" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip4" slot="69" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip5" slot="70" help="false" />

		<instance name="ability_tooltip" id="state_tooltip13" slot="13" help="false" />
		<instance name="ability_tooltip" id="state_tooltip14" slot="14" help="false" />
		<instance name="ability_tooltip" id="state_tooltip15" slot="15" help="false" />
		<instance name="ability_tooltip" id="state_tooltip16" slot="16" help="false" />
		<instance name="ability_tooltip" id="state_tooltip17" slot="17" help="false" />
		<instance name="ability_tooltip" id="state_tooltip18" slot="18" help="false" />
		<instance name="ability_tooltip" id="state_tooltip19" slot="19" help="false" />
		<instance name="ability_tooltip" id="state_tooltip20" slot="20" help="false" />
		<instance name="ability_tooltip" id="state_tooltip21" slot="21" help="false" />
		<instance name="ability_tooltip" id="state_tooltip22" slot="22" help="false" />
		<instance name="ability_tooltip" id="state_tooltip23" slot="23" help="false" />

		<instance name="ability_tooltip" id="ability_tooltip_shared45" slot="45" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared46" slot="46" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared47" slot="47" help="true" />

		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared45" slot="45" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared46" slot="46" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared47" slot="47" help="true" />

		<instance name="attack_tooltip" />
		<instance name="defense_tooltip" />
		<instance name="attribute_tooltip" />
		<instance name="attribute2_tooltip" />
		<instance name="health_tooltip" />
		<instance name="mana_tooltip" />
		<instance name="experience_tooltip" />
		<instance name="movement_tooltip" />
		<instance name="unit_tooltip" />

		<instance name="attack_tooltip_info" />
		<instance name="defense_tooltip_info" />
		<instance name="attribute_tooltip_info" />
		<instance name="health_tooltip_info" />
		<instance name="mana_tooltip_info" />
		<instance name="experience_tooltip_info" />
		<instance name="movement_tooltip_info" />

		<instance name="unit_tooltip_info" slot="0" />
		<instance name="unit_tooltip_info" slot="1" />
		<instance name="unit_tooltip_info" slot="2" />
		<instance name="unit_tooltip_info" slot="3" />
		<instance name="unit_tooltip_info" slot="4" />
		<instance name="unit_tooltip_info" slot="5" />
		<instance name="unit_tooltip_info" slot="6" />
		<instance name="unit_tooltip_info" slot="7" />
		<instance name="unit_tooltip_info" slot="8" />
		<instance name="unit_tooltip_info" slot="9" />
		<instance name="unit_tooltip_info" slot="10" />
		<instance name="unit_tooltip_info" slot="11" />
		<instance name="unit_tooltip_info" slot="12" />
		<instance name="unit_tooltip_info" slot="13" />
		<instance name="unit_tooltip_info" slot="14" />

		<instance name="unit_tooltip_hero" />
		<instance name="health_tooltip_hero" />
		<instance name="mana_tooltip_hero" />
		<instance name="experience_tooltip_hero" />

		<instance name="ability_info_tooltip" id="inventory_info_tooltip48" slot="48" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip49" slot="49" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip50" slot="50" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip51" slot="51" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip52" slot="52" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip53" slot="53" help="true" />

		<instance name="ability_info_tooltip" id="inventory_info_tooltip63" slot="63" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip64" slot="64" help="true" />

		<instance name="ability_info_tooltip" id="state_info_tooltip13" slot="13" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip14" slot="14" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip15" slot="15" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip16" slot="16" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip17" slot="17" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip18" slot="18" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip19" slot="19" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip20" slot="20" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip21" slot="21" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip22" slot="22" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip23" slot="23" help="false" />

		<instance name="ability_hero_tooltip" id="hero_state_tooltip13" slot="13" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip14" slot="14" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip15" slot="15" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip16" slot="16" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip17" slot="17" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip18" slot="18" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip19" slot="19" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip20" slot="20" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip21" slot="21" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip22" slot="22" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip23" slot="23" help="false" />

		<instance name="hero_tooltip" id="ally_tooltip0" type="Ally" slot="0" help="false" />
		<instance name="hero_tooltip" id="ally_tooltip1" type="Ally" slot="1" help="false" />
		<instance name="hero_tooltip" id="ally_tooltip2" type="Ally" slot="2" help="false" />
		<instance name="hero_tooltip" id="ally_tooltip3" type="Ally" slot="3" help="false" />

		<instance name="ability_tooltip" id="ability_tooltip_simple48" slot="48" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple49" slot="49" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple50" slot="50" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple51" slot="51" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple52" slot="52" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple53" slot="53" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip_simple63" slot="63" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple64" slot="64" help="true" />

		<instance name="ability_tooltip" id="stash_tooltip_simple0" slot="65" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple1" slot="66" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple2" slot="67" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple3" slot="68" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple4" slot="69" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple5" slot="70" help="false" />

		<instance name="ability_tooltip" id="state_tooltip_simple9" slot="9" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple10" slot="10" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple11" slot="11" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple12" slot="12" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple13" slot="13" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple14" slot="14" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple15" slot="15" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple16" slot="16" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple17" slot="17" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple18" slot="18" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple19" slot="19" help="false" />

		<instance name="ability_tooltip" id="ability_tooltip_shared_simple45" slot="45" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared_simple46" slot="46" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared_simple47" slot="47" help="true" />

		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared_simple45" slot="45" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared_simple46" slot="46" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared_simple47" slot="47" help="true" />

		<instance name="courier_state_tooltip" />
		<instance name="courier_status_tooltip" />
		<instance name="courier_controller_tooltip" />
		<instance name="courier_action_tooltip" />

		<instance name="dice_tooltip" />
	</panel>

	<childinterface file="game_shop_shared.interface" />

	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_menu" title="game_button_menu" label="game_menu_menu_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_vote" title="game_menu_vote" label="game_menu_vote_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_chat" title="game_menu_chat" label="game_menu_chat_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_options" title="general_options" label="game_menu_options_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_disconnect" title="general_disconnect" label="game_menu_disconnect_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_quit" title="main_button_quit" label="game_menu_quit_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_kick" title="game_menu_kick_afk" label="game_menu_kick_afk_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_spec" title="game_menu_spec" label="game_menu_spec_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_mentor" title="game_menu_mentor" label="game_menu_mentor_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_pause" title="game_menu_pause_button" label="game_menu_pause_tip" />

	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_sharing" title="game_menu_sharing_button" label="game_menu_sharing_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_nohelp" title="game_menu_nohelp_button" label="game_menu_nohelp_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_voice" title="game_menu_voice_button" label="game_menu_voice_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_voice_spec" title="game_menu_voice_button" label="game_menu_voice_tip_spec" />

	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_RAP" title="game_menu_report_a_player" label="game_menu_report_a_player_tip" />

	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_nopauseleft" title="game_menu_nopauseleft" label="game_menu_nopauseleft_tooltip" />

	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_unpause" title="game_menu_unpause_button" label="game_menu_unpause_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_remake" title="game_menu_remake_button" label="game_menu_remake_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_concede" title="game_menu_concede_button" label="game_menu_concede_tip" />

	<instance name="simple_tooltip_floater" tip_id="alt_courier_select_tip" align="left" valign="bottom" width="13.0h" x="-6.5h" y="16" label="game_alt_couriers"  />
	<instance name="simple_tooltip_nowrap" tip_id="alt_courier_lock_tip" align="center" valign="bottom" y="20" label="game_alt_couriers_lock"  />
	<instance name="simple_tooltip_nowrap" tip_id="alt_courier_unlock_tip" align="center" valign="bottom" y="20" label="game_alt_couriers_unlock"  />

	<instance name="team_colors_tooltip" />
	<instance name="teamshare_tooltip" />
	<instance name="score_tooltips" />

	<!-- Menu Tootlips -->
	<!-- Tooltip -->
	<floater name="menu_tooltip" visible="false" grow="true" color="invisible" align="right" valign="top" x="-0.5h" y="-0.5h">
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" align="left" valign="top" noclick="1"/>
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" noclick="1"/>
		<label
			y="0.8h" x="0.8h"
			name="tooltip_label"
			textalign="left" textvalign="top"
			fitx="true" fity="true"
			fitxpadding="0.8h" fitypadding="0.8h"
			color="white" font="dyn_10"
			watch="GameMenuTooltipText"
			ontriggerlua="self:SetText(param)"
		/>
	</floater>


	<!-- Stash Tooltips -->
	<floater
		name="stash_tooltip"
		x="-0.8h" y="-0.5h"
		width="30.0h"
		align="right"
		valign="bottom"
		color="invisible"
		visible="false"
		passivechildren="true"
		grow="true"
	>
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" />
			<label
				y="0.6h"
				width="-1.6h"
				textvalign="top"
				textalign="left"
				align="center"
				font="dyn_10"
				noclick="1"
				color="white"
				shadow="1"
				wrap="1"
				fity="true"
				fitypadding="2.5h"
				content="game_label_stash_tool_tip"
			/>
	</floater>

	<floater
		name="stash_deconstruct_tooltip"
		x="-0.8h" y="-0.5h"
		width="24.0h"
		align="right"
		valign="bottom"
		color="invisible"
		visible="false"
		passivechildren="true"
		grow="true"
	>
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" />
			<label
				y="0.6h"
				width="-1.6h"
				textvalign="top"
				textalign="left"
				align="center"
				font="dyn_10"
				noclick="1"
				color="white"
				shadow="1"
				wrap="1"
				fity="true"
				fitypadding="0.6h"
				content="game_label_stash_deconstruct_tool_tip"
			/>
	</floater>

	<effectpanel
		name="effect_panel"
		camerawidth="100a"
		cameraheight="100"
		noclick="true"
	/>

	<instance name="vote_panel" align="center"/>

	<!-- Watch Bullet -->
	<childinterface file="/ui/fe2/watch_bullet.interface"/>

	<!-- Test +++ -->
	<panel name="testppp_mainButton" x="28h" height="2h" width="8h" noclick="true" visible="0"
		watch="GamePhase"
		ontriggerlua="
			if (TestSuite.ServerAccessible()) then
				self:SetVisible(true)
			else
				self:SetVisible(false)
				TestSuite.ResetTestSuite()
			end
		"
	>
		<instance name="button2" button_name="test_suite_server" label="test_suite_title" font="dyn_9" interactive="false" playsounds="false"
			onclicklua="UIManager.GetInterface('test_suite_server'):GetWidget('test_suite_server_basic'):ToggleVisible()"
		/>
	</panel>

	<!-- Notification Toast -->
	<include file="game_notifications.package"/>
	<instance name="notification_toast_game"/>

	<!-- Movable Frames GUI -->
	<panel name="movf_control_button" noclick="1" x="37.0h"  height="2.0h" width="9.0h" />
	<panel noclick="1" watch="movf_show" ontriggerlua="self:BringToFront()">
		<panel visible="false" noclick="1" watch="movf_show" ontriggerlua="self:SetVisible(AtoB(param))">
			<instance name="movf_dragcollect"/>
		</panel>
		<panel name="movf_overlays" visible="false" noclick="1" watch="movf_show" ontriggerlua="self:SetVisible(AtoB(param))"/>
		<panel visible="false" noclick="1" watch="movf_show" ontriggerlua="self:SetVisible(AtoB(param))">
			<instance name="movf_dragbox"/>
		</panel>
		<include file="movf_control.package"/>
	</panel>

	<!-- Report a player stuff -->
	<include file="rap_templates.package" />

	<!-- Confirmations -->
	<instance name="disband_confirm" interactive="false" visible="0"/>
	<instance name="disconnect_confirm" interactive="false" visible="0"/>
	<instance name="quit_confirm" interactive="false" visible="0"/>
	<instance name="disconnect_confirm_leaver" interactive="false" visible="0"/>
	<instance name="quit_confirm_leaver" interactive="false" visible="0"/>

	<!-- Super temp display for level up mode - replace this -->
	<!--
	<panel align="center" valign="center" height="50%" width="50%" onload="ForceToFront();" noclick="1">
		<label align="center" valign="center"
			content="Level up mode enabled"
			color="white"
			outline="true"
			font="dyn_18"
			visible="false"
			noclick="1"
			watch="HeroLevelupMode"
			ontrigger="SetVisible(param0);" />
	</panel>
	-->

	<!-- Channeling bar -->
	<panel name="channel_bars"
		x="3.4h" y="-25h"
		width="27h"
		valign="bottom"
		align="center"
		noclick="true"
		passivechildren="true"
		grow="true"
		regrow="true"
		growinvis="false"
	>
		<!-- Inventory slots -->
		<instance name="channel_bar" slot="0" />
		<instance name="channel_bar" slot="1" />
		<instance name="channel_bar" slot="2" />
		<instance name="channel_bar" slot="3" />
		<instance name="channel_bar" slot="4" />
		<instance name="channel_bar" slot="5" />
		<instance name="channel_bar" slot="6" />
		<instance name="channel_bar" slot="7" />
		<instance name="channel_bar" slot="8" />

		<!-- State slots -->
		<instance name="channel_bar" slot="9" />
		<instance name="channel_bar" slot="10" />
		<instance name="channel_bar" slot="11" />
		<instance name="channel_bar" slot="12" />
		<instance name="channel_bar" slot="13" />
		<instance name="channel_bar" slot="14" />
		<instance name="channel_bar" slot="15" />
		<instance name="channel_bar" slot="16" />
		<instance name="channel_bar" slot="17" />
		<instance name="channel_bar" slot="18" />
		<instance name="channel_bar" slot="19" />
		<instance name="channel_bar" slot="20" />
		<instance name="channel_bar" slot="21" />
		<instance name="channel_bar" slot="22" />
		<instance name="channel_bar" slot="23" />
		<instance name="channel_bar" slot="24" />
		<instance name="channel_bar" slot="25" />
		<instance name="channel_bar" slot="26" />
		<instance name="channel_bar" slot="27" />
		<instance name="channel_bar" slot="28" />
		<instance name="channel_bar" slot="29" />
		<instance name="channel_bar" slot="30" />
		<instance name="channel_bar" slot="31" />
		<instance name="channel_bar" slot="32" />
		<instance name="channel_bar" slot="33" />
		<instance name="channel_bar" slot="34" />
		<instance name="channel_bar" slot="35" />
		<instance name="channel_bar" slot="36" />
		<instance name="channel_bar" slot="37" />
		<instance name="channel_bar" slot="38" />
		<instance name="channel_bar" slot="39" />
		<instance name="channel_bar" slot="40" />
		<instance name="channel_bar" slot="41" />
		<instance name="channel_bar" slot="42" />
		<instance name="channel_bar" slot="43" />
		<instance name="channel_bar" slot="44" />

		<!-- Backpack slots -->
		<instance name="channel_bar" slot="48" />
		<instance name="channel_bar" slot="49" />
		<instance name="channel_bar" slot="50" />
		<instance name="channel_bar" slot="51" />
		<instance name="channel_bar" slot="52" />
		<instance name="channel_bar" slot="53" />
	</panel>

	<if condition="cl_AlienFXEnabled" >
		<frame name="alienfx_delete_me" noclick="1" valign="center" align="center" borderthickness="5h" bordercolor="invisible" color="invisible" />
		<panel name="alienfx_panel_game" noclick="1" />
		<trigger name="AlienFX" />
	</if>

	<panel name="game_hero_tip_parent" grow="1" regrow="1" growinvis="0" noclick="0" onclicklua="self:FadeOut(150)" onrightclicklua="self:FadeOut(150)" width="70h" align="center" valign="bottom" y="-21h" visible="0"
		onshowlua="self:SetNoClick(1) self:Sleep(750, function() self:SetNoClick(0) end)"
	>
		<frame texture="/ui/frames/rounded_bg_blue.tga" borderthickness="0.7h" color="0 0 0 .9" blockinput="false" noclick="1" />
		<frame texture="/ui/frames/roundframe.tga" color="#3e474a" borderthickness="0.7h" blockinput="false" noclick="1" />
		<panel name="game_hero_tip_info_parent" grow="1" regrow="1" growinvis="0" y="1.0h" width="-2.0h" align="center" noclick="1" float="bottom">
			<panel grow="1" regrow="1" growinvis="0" width="100%" noclick="true">
				<panel width="11.0h" height="11.0h" valign="top">
					<image name="game_hero_tip_icon" texture="$invis" noclick="1" visible="0"  />
					<frame color="invisible" bordercolor=".4 .4 .4 1" borderthickness="1" noclick="true" />
				</panel>
				<panel grow="1" regrow="1" growinvis="0" width="-12.0h" align="right" noclick="1" float="bottom" padding="0.3h">
					<label name="game_hero_tip_icon_label" fity="true" color="red" outline="1" font="dyn_16" textalign="left" content="" noclick="1" visible="0" />
					<label name="game_hero_tip_icon_desc" fity="true" wrap="true" color="1 1 1 1" shadow="1" font="dyn_14" noclick="1" visible="0"
						content=""
					/>
				</panel>
			</panel>
			<panel name="game_hero_tip_dontask_parent" width="100%" height="3h" noclick="1" valign="bottom" onloadlua="self:BringToFront()" onshowlua="self:BringToFront()" visible="0">
				<instance
					name="Noptions_checkbox"
					width="10.0h"
					align="right" valign="center"
					font="dyn_10" label="hero_tip_disable_tips"
					tip_id=""
					interactive="false"
					onclicklua="
						local heroTips = GetCvarBool('ui_hideGameHeroTips')
						SetSave('ui_hideGameHeroTips', not heroTips, 'bool')
						if (GetCvarBool('ui_hideGameHeroTips')) then
							self:SetButtonState(1)
						else
							self:SetButtonState(0)
						end
						"
					onloadlua="
						SetSave('ui_hideGameHeroTips', false, 'bool', true)
						if (GetCvarBool('ui_hideGameHeroTips')) then
							self:SetButtonState(1)
						else
							self:SetButtonState(0)
						end
					"
				/>
			</panel>
		</panel>
	</panel>

	<trigger name="deadlift_do_you_want_rezzed" />
	<trigger name="hide_deadlift_do_you_want_rezzed" />

	<panel name="deadliftTest" align="center" valign="center" width="35h" height="35h" noclick="true" visible="false" watch="deadlift_do_you_want_rezzed" ontriggerlua="self:SetVisible(not ViewingReplay())" watch2="hide_deadlift_do_you_want_rezzed" ontrigger2lua="self:SetVisible(0)">
		<image texture="/ui/common/prompt_revive_backer.tga" noclick="true"/>
		<instance name="promptReviveButtonOK" id="promptReviveButtonOK" width="33@" height="16.5%" x="12@" y="55.35%"
			watch="deadlift_do_you_want_rezzed"
			ontriggerlua="
				local index = tonumber(param2)
				self:SetCallback('onclick', function()
					SendScriptMessage('deadlift_yes_i_want_rezzed', '1', index)
					GetWidget('deadliftTest', 'game'):SetVisible(0)
				end)
			"/>
		<instance name="promptReviveButtonOK" id="promptReviveButtonCancel" width="33@" height="16.5%" x="55@" y="55.35%" texture="/ui/common/prompt_revive_button_cancel.tga"
			watch="deadlift_do_you_want_rezzed"
			ontriggerlua="
				local index = tonumber(param2)
				self:SetCallback('onclick', function()
					SendScriptMessage('deadlift_yes_i_want_rezzed', '-1', index)
					GetWidget('deadliftTest', 'game'):SetVisible(0)
				end)
			"/>

		<label name="promptReviveTitle" noclick="true" align="center" height="3h" valign="bottom" y="-93%" color="white" outline="true" font="dyn_18" textalign="center" textvalign="center" content="game_prompt_revive_title"/><!-- U wanna rez bby? -->
		<label name="promptReviveTime" noclick="true" align="center" y="72.26%" width="24@" height="11%" font="dyn_14" color="white" textalign="center" textvalign="center" outline="true" content=":00"
			watch="deadlift_do_you_want_rezzed"
			ontriggerlua="
			local time = ((tonumber(param0) * 1000) + tonumber(GetTrigger('GameTime'):GetLastValue()))
			self:RegisterWatch('GameTime', function(self, gameTime)
				gameTime = tonumber(gameTime)
				local timeDiff = time - gameTime

				if (0 >= timeDiff) then
					GetWidget('deadliftTest', 'game'):SetVisible(0)
					self:UnregisterWatch('GameTime')
				end
				self:SetText(round(timeDiff / 1000, 1)..'s')
			end)
		"/>
	</panel>

	<include file="/ui/lane_select.package"/>
	<lua file="/ui/scripts/lane_select.lua"/>

	<if condition="releaseStage_test">
		<include file="/ui/sotm_select.package"/>
		<lua file="/ui/scripts/sotm_select.lua"/>
	</if>

	<childinterface file="/ui/test_suite/test_suite_server.interface" />

	<instance name="generic_dialog_box_game_template" />
	<instance name="generic_dialog_box_combo_game_template" />

	<!-- Gold Report -->
	<include file="game_gold_report.package"/>

	<frame
		name="multiUnitControlTip"
		texture="/ui/frames/rounded_bg_white.tga"
		borderthickness="0.6h" color="0 0 0 .75" visible="false" align="right" valign="bottom" y="-28h" width="30h" height="5.0h" float="bottom"
		group="tooltip_group"
		grow="1" regrow="1" growinvis="0"
	>
		<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" bordercolor="#434d50"/>
		<anchor x="1.0h" y="0.6h" />

		<panel width="-2.0h" height="3.6h">
			<!-- Icon -->
			<panel width="100@" height="100%" >
				<image name="multiUnitControlTipIcon"/>
				<frame color="invisible" borderthickness="1" bordercolor=".3 .3 .3 1" />
			</panel>

			<panel width="-120@" align="right">
				<!-- Name -->
				<label
					name="multiUnitControlTipTitle"
					valign="top"
					textalign="left"
					font="dyn_12" color="#ffab01" shadow="true" textvalign="center"
				/>
			</panel>

		</panel>

		<!-- padding -->
		<panel width="-2.0h" height="1.0h" sticky="true" stickytoinvis="false"/>

		<!-- Description text -->
		<label
			name="multiUnitControlTipBody"
			width="-2.0h" height="0.0h"
			font="dyn_11" wrap="true" color="white"
			sticky="true"
			fity="1"
			fitypadding="0.2h"
			stickytoinvis="false"
		/>
	</frame>

	<!--
		Generic Floating Tooltip System
		=========================
		Just a generally flexible tooltip with up to a title, 3 text bodies and a top-right corner image.  Can be expanded later on.

		param0		General visibility (you can also just hidewidget on genericGameFloatingTip so you don't need to re-trigger)
		param1		Width
		param2		Icon Path (blank for none) - small square icon at top-right
		param3		Title text
		param4		Body text 1
		param5		Body text 2
		param6		Body text 3
		param7		X
		param8		Y
	-->

	<trigger name="genericGameFloatingTip"/>
	<floater passivechildren="true" visible="false" x="22" y="-22" width="20h" grow="true" regrow="true" name="genericGameFloatingTip"
		watch="genericGameFloatingTip"
		ontriggerlua="
			self:SetVisible(AtoB(param0))
			if (NotEmpty(param1)) then
				self:SetWidth(param1)
			end

			if (NotEmpty(param7)) then
				self:SetX(param7)
			end

			if (NotEmpty(param8)) then
				self:SetY(param8)
			end

			if (NotEmpty(param2)) then
				self:GetWidget('genericGameFloatingTipIcon'):SetTexture(param2)
				self:GetWidget('genericGameFloatingTipIcon'):SetVisible(1)
			else
				self:GetWidget('genericGameFloatingTipIcon'):SetVisible(0)
			end

			if (NotEmpty(param3)) then
				self:GetWidget('genericGameFloatingTipTitle'):SetVisible(1)
				self:GetWidget('genericGameFloatingTipTitle'):SetText(Translate(param3))
			else
				self:GetWidget('genericGameFloatingTipTitle'):SetVisible(0)
			end

			if (NotEmpty(param4)) then
				self:GetWidget('genericGameFloatingTipBody1'):SetVisible(1)
				self:GetWidget('genericGameFloatingTipBody1'):SetText(FormatStringNewline(Translate(param4)))
			else
				self:GetWidget('genericGameFloatingTipBody1'):SetVisible(0)
			end

			self:GetWidget('genericGameFloatingTipDivider1'):SetVisible(NotEmpty(param5))

			if (NotEmpty(param5)) then
				self:GetWidget('genericGameFloatingTipBody2'):SetVisible(1)
				self:GetWidget('genericGameFloatingTipBody2'):SetText(FormatStringNewline(Translate(param5)))
			else
				self:GetWidget('genericGameFloatingTipBody2'):SetVisible(0)
			end

			self:GetWidget('genericGameFloatingTipDivider2'):SetVisible(NotEmpty(param6))


			if (NotEmpty(param6)) then
				self:GetWidget('genericGameFloatingTipBody3'):SetVisible(1)
				self:GetWidget('genericGameFloatingTipBody3'):SetText(FormatStringNewline(Translate(param6)))
			else
				self:GetWidget('genericGameFloatingTipBody3'):SetVisible(0)
			end
		"
	>
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .95" borderthickness=".6h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" />
		<image name="genericGameFloatingTipIcon" visible="false" align="right" valign="top" width="2h" height="2h" x="-0.5h" y="0.5h"/>
		<panel grow="true" regrow="true" growinvis="false" float="bottom" width="-1h" align="center">
			<panel height="2" /><!-- Spacer and to get rid of the padding issue -->
			<panel width="100%" grow="true" regrow="true" growinvis="false" float="bottom" padding="0.5h"><!-- Actual usable space -->
				<label name="genericGameFloatingTipTitle" align="center" color="#ffab01" font="dyn_12" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" content="-"/>
				<label name="genericGameFloatingTipBody1" align="center" color="white" font="dyn_10" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" visible="false" content="-"/>
				<panel name="genericGameFloatingTipDivider1" height="0.5h" width="100%" visible="false" sticky="true" stickytoinvis="false">
					<panel align="center" valign="center" height="1" width="-1h" color="#555555" />
				</panel>
				<label name="genericGameFloatingTipBody2" align="center" color="white" font="dyn_10" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" visible="false" content="-"/>
				<panel name="genericGameFloatingTipDivider2" height="0.5h" width="100%" visible="false" sticky="true" stickytoinvis="false">
					<panel align="center" valign="center" height="1" width="-1h" color="#555555" />
				</panel>
				<label name="genericGameFloatingTipBody3" align="center" color="white" font="dyn_10" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" visible="false" content="-"/>
			</panel>
			<panel height="1h"/><!-- Spacer and to get rid of the padding issue -->
		</panel>

	</floater>

	<!-- Popup Scoreboard -->
	<instance name="game_scoreboard_popup_instance" backpack="/ui/common/empty_pack.tga" ward="/ui/common/empty_ward.tga" />

	<!-- Client Info -->
	<include file="/ui/game_clientinfo.package" />
	<instance name="game_clientinfo" />
</interface>
